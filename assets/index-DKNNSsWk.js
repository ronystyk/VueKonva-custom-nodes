(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function i(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=i(s);fetch(s.href,r)}})();/**
* @vue/shared v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Ur(e){const t=Object.create(null);for(const i of e.split(","))t[i]=1;return i=>i in t}const Tt={},Ti=[],Ce=()=>{},Ac=()=>!1,zn=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Br=e=>e.startsWith("onUpdate:"),zt=Object.assign,$r=(e,t)=>{const i=e.indexOf(t);i>-1&&e.splice(i,1)},Ec=Object.prototype.hasOwnProperty,mt=(e,t)=>Ec.call(e,t),nt=Array.isArray,Pi=e=>Kn(e)==="[object Map]",Da=e=>Kn(e)==="[object Set]",rt=e=>typeof e=="function",Nt=e=>typeof e=="string",Xe=e=>typeof e=="symbol",Et=e=>e!==null&&typeof e=="object",La=e=>(Et(e)||rt(e))&&rt(e.then)&&rt(e.catch),Ga=Object.prototype.toString,Kn=e=>Ga.call(e),Rc=e=>Kn(e).slice(8,-1),Ia=e=>Kn(e)==="[object Object]",Hr=e=>Nt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Xi=Ur(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Yn=e=>{const t=Object.create(null);return i=>t[i]||(t[i]=e(i))},Mc=/-(\w)/g,oe=Yn(e=>e.replace(Mc,(t,i)=>i?i.toUpperCase():"")),Fc=/\B([A-Z])/g,ci=Yn(e=>e.replace(Fc,"-$1").toLowerCase()),Xn=Yn(e=>e.charAt(0).toUpperCase()+e.slice(1)),Xs=Yn(e=>e?`on${Xn(e)}`:""),We=(e,t)=>!Object.is(e,t),qs=(e,...t)=>{for(let i=0;i<e.length;i++)e[i](...t)},vr=(e,t,i,n=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:n,value:i})},kc=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let To;const qn=()=>To||(To=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Vr(e){if(nt(e)){const t={};for(let i=0;i<e.length;i++){const n=e[i],s=Nt(n)?Lc(n):Vr(n);if(s)for(const r in s)t[r]=s[r]}return t}else if(Nt(e)||Et(e))return e}const Nc=/;(?![^(]*\))/g,Oc=/:([^]+)/,Dc=/\/\*[^]*?\*\//g;function Lc(e){const t={};return e.replace(Dc,"").split(Nc).forEach(i=>{if(i){const n=i.split(Oc);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function sn(e){let t="";if(Nt(e))t=e;else if(nt(e))for(let i=0;i<e.length;i++){const n=sn(e[i]);n&&(t+=n+" ")}else if(Et(e))for(const i in e)e[i]&&(t+=i+" ");return t.trim()}const Gc="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Ic=Ur(Gc);function Ua(e){return!!e||e===""}const Ba=e=>!!(e&&e.__v_isRef===!0),Lt=e=>Nt(e)?e:e==null?"":nt(e)||Et(e)&&(e.toString===Ga||!rt(e.toString))?Ba(e)?Lt(e.value):JSON.stringify(e,$a,2):String(e),$a=(e,t)=>Ba(t)?$a(e,t.value):Pi(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((i,[n,s],r)=>(i[Js(n,r)+" =>"]=s,i),{})}:Da(t)?{[`Set(${t.size})`]:[...t.values()].map(i=>Js(i))}:Xe(t)?Js(t):Et(t)&&!nt(t)&&!Ia(t)?String(t):t,Js=(e,t="")=>{var i;return Xe(e)?`Symbol(${(i=e.description)!=null?i:t})`:e};/**
* @vue/reactivity v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Zt;class Uc{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Zt,!t&&Zt&&(this.index=(Zt.scopes||(Zt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,i;if(this.scopes)for(t=0,i=this.scopes.length;t<i;t++)this.scopes[t].pause();for(t=0,i=this.effects.length;t<i;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,i;if(this.scopes)for(t=0,i=this.scopes.length;t<i;t++)this.scopes[t].resume();for(t=0,i=this.effects.length;t<i;t++)this.effects[t].resume()}}run(t){if(this._active){const i=Zt;try{return Zt=this,t()}finally{Zt=i}}}on(){++this._on===1&&(this.prevScope=Zt,Zt=this)}off(){this._on>0&&--this._on===0&&(Zt=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let i,n;for(i=0,n=this.effects.length;i<n;i++)this.effects[i].stop();for(this.effects.length=0,i=0,n=this.cleanups.length;i<n;i++)this.cleanups[i]();if(this.cleanups.length=0,this.scopes){for(i=0,n=this.scopes.length;i<n;i++)this.scopes[i].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function Bc(){return Zt}let xt;const Qs=new WeakSet;class Ha{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Zt&&Zt.active&&Zt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Qs.has(this)&&(Qs.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Wa(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Po(this),ja(this);const t=xt,i=fe;xt=this,fe=!0;try{return this.fn()}finally{za(this),xt=t,fe=i,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)zr(t);this.deps=this.depsTail=void 0,Po(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Qs.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){br(this)&&this.run()}get dirty(){return br(this)}}let Va=0,qi,Ji;function Wa(e,t=!1){if(e.flags|=8,t){e.next=Ji,Ji=e;return}e.next=qi,qi=e}function Wr(){Va++}function jr(){if(--Va>0)return;if(Ji){let t=Ji;for(Ji=void 0;t;){const i=t.next;t.next=void 0,t.flags&=-9,t=i}}let e;for(;qi;){let t=qi;for(qi=void 0;t;){const i=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(n){e||(e=n)}t=i}}if(e)throw e}function ja(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function za(e){let t,i=e.depsTail,n=i;for(;n;){const s=n.prevDep;n.version===-1?(n===i&&(i=s),zr(n),$c(n)):t=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=s}e.deps=t,e.depsTail=i}function br(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Ka(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Ka(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===rn)||(e.globalVersion=rn,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!br(e))))return;e.flags|=2;const t=e.dep,i=xt,n=fe;xt=e,fe=!0;try{ja(e);const s=e.fn(e._value);(t.version===0||We(s,e._value))&&(e.flags|=128,e._value=s,t.version++)}catch(s){throw t.version++,s}finally{xt=i,fe=n,za(e),e.flags&=-3}}function zr(e,t=!1){const{dep:i,prevSub:n,nextSub:s}=e;if(n&&(n.nextSub=s,e.prevSub=void 0),s&&(s.prevSub=n,e.nextSub=void 0),i.subs===e&&(i.subs=n,!n&&i.computed)){i.computed.flags&=-5;for(let r=i.computed.deps;r;r=r.nextDep)zr(r,!0)}!t&&!--i.sc&&i.map&&i.map.delete(i.key)}function $c(e){const{prevDep:t,nextDep:i}=e;t&&(t.nextDep=i,e.prevDep=void 0),i&&(i.prevDep=t,e.nextDep=void 0)}let fe=!0;const Ya=[];function Fe(){Ya.push(fe),fe=!1}function ke(){const e=Ya.pop();fe=e===void 0?!0:e}function Po(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const i=xt;xt=void 0;try{t()}finally{xt=i}}}let rn=0;class Hc{constructor(t,i){this.sub=t,this.dep=i,this.version=i.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Kr{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!xt||!fe||xt===this.computed)return;let i=this.activeLink;if(i===void 0||i.sub!==xt)i=this.activeLink=new Hc(xt,this),xt.deps?(i.prevDep=xt.depsTail,xt.depsTail.nextDep=i,xt.depsTail=i):xt.deps=xt.depsTail=i,Xa(i);else if(i.version===-1&&(i.version=this.version,i.nextDep)){const n=i.nextDep;n.prevDep=i.prevDep,i.prevDep&&(i.prevDep.nextDep=n),i.prevDep=xt.depsTail,i.nextDep=void 0,xt.depsTail.nextDep=i,xt.depsTail=i,xt.deps===i&&(xt.deps=n)}return i}trigger(t){this.version++,rn++,this.notify(t)}notify(t){Wr();try{for(let i=this.subs;i;i=i.prevSub)i.sub.notify()&&i.sub.dep.notify()}finally{jr()}}}function Xa(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let n=t.deps;n;n=n.nextDep)Xa(n)}const i=e.dep.subs;i!==e&&(e.prevSub=i,i&&(i.nextSub=e)),e.dep.subs=e}}const Sr=new WeakMap,ai=Symbol(""),Cr=Symbol(""),on=Symbol("");function Vt(e,t,i){if(fe&&xt){let n=Sr.get(e);n||Sr.set(e,n=new Map);let s=n.get(i);s||(n.set(i,s=new Kr),s.map=n,s.key=i),s.track()}}function Re(e,t,i,n,s,r){const o=Sr.get(e);if(!o){rn++;return}const a=l=>{l&&l.trigger()};if(Wr(),t==="clear")o.forEach(a);else{const l=nt(e),h=l&&Hr(i);if(l&&i==="length"){const c=Number(n);o.forEach((u,p)=>{(p==="length"||p===on||!Xe(p)&&p>=c)&&a(u)})}else switch((i!==void 0||o.has(void 0))&&a(o.get(i)),h&&a(o.get(on)),t){case"add":l?h&&a(o.get("length")):(a(o.get(ai)),Pi(e)&&a(o.get(Cr)));break;case"delete":l||(a(o.get(ai)),Pi(e)&&a(o.get(Cr)));break;case"set":Pi(e)&&a(o.get(ai));break}}jr()}function yi(e){const t=pt(e);return t===e?t:(Vt(t,"iterate",on),re(e)?t:t.map(Ht))}function Jn(e){return Vt(e=pt(e),"iterate",on),e}const Vc={__proto__:null,[Symbol.iterator](){return Zs(this,Symbol.iterator,Ht)},concat(...e){return yi(this).concat(...e.map(t=>nt(t)?yi(t):t))},entries(){return Zs(this,"entries",e=>(e[1]=Ht(e[1]),e))},every(e,t){return Te(this,"every",e,t,void 0,arguments)},filter(e,t){return Te(this,"filter",e,t,i=>i.map(Ht),arguments)},find(e,t){return Te(this,"find",e,t,Ht,arguments)},findIndex(e,t){return Te(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Te(this,"findLast",e,t,Ht,arguments)},findLastIndex(e,t){return Te(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Te(this,"forEach",e,t,void 0,arguments)},includes(...e){return tr(this,"includes",e)},indexOf(...e){return tr(this,"indexOf",e)},join(e){return yi(this).join(e)},lastIndexOf(...e){return tr(this,"lastIndexOf",e)},map(e,t){return Te(this,"map",e,t,void 0,arguments)},pop(){return Vi(this,"pop")},push(...e){return Vi(this,"push",e)},reduce(e,...t){return Ao(this,"reduce",e,t)},reduceRight(e,...t){return Ao(this,"reduceRight",e,t)},shift(){return Vi(this,"shift")},some(e,t){return Te(this,"some",e,t,void 0,arguments)},splice(...e){return Vi(this,"splice",e)},toReversed(){return yi(this).toReversed()},toSorted(e){return yi(this).toSorted(e)},toSpliced(...e){return yi(this).toSpliced(...e)},unshift(...e){return Vi(this,"unshift",e)},values(){return Zs(this,"values",Ht)}};function Zs(e,t,i){const n=Jn(e),s=n[t]();return n!==e&&!re(e)&&(s._next=s.next,s.next=()=>{const r=s._next();return r.value&&(r.value=i(r.value)),r}),s}const Wc=Array.prototype;function Te(e,t,i,n,s,r){const o=Jn(e),a=o!==e&&!re(e),l=o[t];if(l!==Wc[t]){const u=l.apply(e,r);return a?Ht(u):u}let h=i;o!==e&&(a?h=function(u,p){return i.call(this,Ht(u),p,e)}:i.length>2&&(h=function(u,p){return i.call(this,u,p,e)}));const c=l.call(o,h,n);return a&&s?s(c):c}function Ao(e,t,i,n){const s=Jn(e);let r=i;return s!==e&&(re(e)?i.length>3&&(r=function(o,a,l){return i.call(this,o,a,l,e)}):r=function(o,a,l){return i.call(this,o,Ht(a),l,e)}),s[t](r,...n)}function tr(e,t,i){const n=pt(e);Vt(n,"iterate",on);const s=n[t](...i);return(s===-1||s===!1)&&qr(i[0])?(i[0]=pt(i[0]),n[t](...i)):s}function Vi(e,t,i=[]){Fe(),Wr();const n=pt(e)[t].apply(e,i);return jr(),ke(),n}const jc=Ur("__proto__,__v_isRef,__isVue"),qa=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Xe));function zc(e){Xe(e)||(e=String(e));const t=pt(this);return Vt(t,"has",e),t.hasOwnProperty(e)}class Ja{constructor(t=!1,i=!1){this._isReadonly=t,this._isShallow=i}get(t,i,n){if(i==="__v_skip")return t.__v_skip;const s=this._isReadonly,r=this._isShallow;if(i==="__v_isReactive")return!s;if(i==="__v_isReadonly")return s;if(i==="__v_isShallow")return r;if(i==="__v_raw")return n===(s?r?ih:el:r?tl:Za).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(n)?t:void 0;const o=nt(t);if(!s){let l;if(o&&(l=Vc[i]))return l;if(i==="hasOwnProperty")return zc}const a=Reflect.get(t,i,jt(t)?t:n);return(Xe(i)?qa.has(i):jc(i))||(s||Vt(t,"get",i),r)?a:jt(a)?o&&Hr(i)?a:a.value:Et(a)?s?il(a):Oi(a):a}}class Qa extends Ja{constructor(t=!1){super(!1,t)}set(t,i,n,s){let r=t[i];if(!this._isShallow){const l=ze(r);if(!re(n)&&!ze(n)&&(r=pt(r),n=pt(n)),!nt(t)&&jt(r)&&!jt(n))return l?!1:(r.value=n,!0)}const o=nt(t)&&Hr(i)?Number(i)<t.length:mt(t,i),a=Reflect.set(t,i,n,jt(t)?t:s);return t===pt(s)&&(o?We(n,r)&&Re(t,"set",i,n):Re(t,"add",i,n)),a}deleteProperty(t,i){const n=mt(t,i);t[i];const s=Reflect.deleteProperty(t,i);return s&&n&&Re(t,"delete",i,void 0),s}has(t,i){const n=Reflect.has(t,i);return(!Xe(i)||!qa.has(i))&&Vt(t,"has",i),n}ownKeys(t){return Vt(t,"iterate",nt(t)?"length":ai),Reflect.ownKeys(t)}}class Kc extends Ja{constructor(t=!1){super(!0,t)}set(t,i){return!0}deleteProperty(t,i){return!0}}const Yc=new Qa,Xc=new Kc,qc=new Qa(!0);const wr=e=>e,bn=e=>Reflect.getPrototypeOf(e);function Jc(e,t,i){return function(...n){const s=this.__v_raw,r=pt(s),o=Pi(r),a=e==="entries"||e===Symbol.iterator&&o,l=e==="keys"&&o,h=s[e](...n),c=i?wr:t?Nn:Ht;return!t&&Vt(r,"iterate",l?Cr:ai),{next(){const{value:u,done:p}=h.next();return p?{value:u,done:p}:{value:a?[c(u[0]),c(u[1])]:c(u),done:p}},[Symbol.iterator](){return this}}}}function Sn(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function Qc(e,t){const i={get(s){const r=this.__v_raw,o=pt(r),a=pt(s);e||(We(s,a)&&Vt(o,"get",s),Vt(o,"get",a));const{has:l}=bn(o),h=t?wr:e?Nn:Ht;if(l.call(o,s))return h(r.get(s));if(l.call(o,a))return h(r.get(a));r!==o&&r.get(s)},get size(){const s=this.__v_raw;return!e&&Vt(pt(s),"iterate",ai),Reflect.get(s,"size",s)},has(s){const r=this.__v_raw,o=pt(r),a=pt(s);return e||(We(s,a)&&Vt(o,"has",s),Vt(o,"has",a)),s===a?r.has(s):r.has(s)||r.has(a)},forEach(s,r){const o=this,a=o.__v_raw,l=pt(a),h=t?wr:e?Nn:Ht;return!e&&Vt(l,"iterate",ai),a.forEach((c,u)=>s.call(r,h(c),h(u),o))}};return zt(i,e?{add:Sn("add"),set:Sn("set"),delete:Sn("delete"),clear:Sn("clear")}:{add(s){!t&&!re(s)&&!ze(s)&&(s=pt(s));const r=pt(this);return bn(r).has.call(r,s)||(r.add(s),Re(r,"add",s,s)),this},set(s,r){!t&&!re(r)&&!ze(r)&&(r=pt(r));const o=pt(this),{has:a,get:l}=bn(o);let h=a.call(o,s);h||(s=pt(s),h=a.call(o,s));const c=l.call(o,s);return o.set(s,r),h?We(r,c)&&Re(o,"set",s,r):Re(o,"add",s,r),this},delete(s){const r=pt(this),{has:o,get:a}=bn(r);let l=o.call(r,s);l||(s=pt(s),l=o.call(r,s)),a&&a.call(r,s);const h=r.delete(s);return l&&Re(r,"delete",s,void 0),h},clear(){const s=pt(this),r=s.size!==0,o=s.clear();return r&&Re(s,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(s=>{i[s]=Jc(s,e,t)}),i}function Yr(e,t){const i=Qc(e,t);return(n,s,r)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?n:Reflect.get(mt(i,s)&&s in n?i:n,s,r)}const Zc={get:Yr(!1,!1)},th={get:Yr(!1,!0)},eh={get:Yr(!0,!1)};const Za=new WeakMap,tl=new WeakMap,el=new WeakMap,ih=new WeakMap;function nh(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function sh(e){return e.__v_skip||!Object.isExtensible(e)?0:nh(Rc(e))}function Oi(e){return ze(e)?e:Xr(e,!1,Yc,Zc,Za)}function rh(e){return Xr(e,!1,qc,th,tl)}function il(e){return Xr(e,!0,Xc,eh,el)}function Xr(e,t,i,n,s){if(!Et(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const r=sh(e);if(r===0)return e;const o=s.get(e);if(o)return o;const a=new Proxy(e,r===2?n:i);return s.set(e,a),a}function Ai(e){return ze(e)?Ai(e.__v_raw):!!(e&&e.__v_isReactive)}function ze(e){return!!(e&&e.__v_isReadonly)}function re(e){return!!(e&&e.__v_isShallow)}function qr(e){return e?!!e.__v_raw:!1}function pt(e){const t=e&&e.__v_raw;return t?pt(t):e}function oh(e){return!mt(e,"__v_skip")&&Object.isExtensible(e)&&vr(e,"__v_skip",!0),e}const Ht=e=>Et(e)?Oi(e):e,Nn=e=>Et(e)?il(e):e;function jt(e){return e?e.__v_isRef===!0:!1}function _t(e){return ah(e,!1)}function ah(e,t){return jt(e)?e:new lh(e,t)}class lh{constructor(t,i){this.dep=new Kr,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=i?t:pt(t),this._value=i?t:Ht(t),this.__v_isShallow=i}get value(){return this.dep.track(),this._value}set value(t){const i=this._rawValue,n=this.__v_isShallow||re(t)||ze(t);t=n?t:pt(t),We(t,i)&&(this._rawValue=t,this._value=n?t:Ht(t),this.dep.trigger())}}function ee(e){return jt(e)?e.value:e}const ch={get:(e,t,i)=>t==="__v_raw"?e:ee(Reflect.get(e,t,i)),set:(e,t,i,n)=>{const s=e[t];return jt(s)&&!jt(i)?(s.value=i,!0):Reflect.set(e,t,i,n)}};function nl(e){return Ai(e)?e:new Proxy(e,ch)}class hh{constructor(t,i,n){this.fn=t,this.setter=i,this._value=void 0,this.dep=new Kr(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=rn-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!i,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&xt!==this)return Wa(this,!0),!0}get value(){const t=this.dep.track();return Ka(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function dh(e,t,i=!1){let n,s;return rt(e)?n=e:(n=e.get,s=e.set),new hh(n,s,i)}const Cn={},On=new WeakMap;let ri;function fh(e,t=!1,i=ri){if(i){let n=On.get(i);n||On.set(i,n=[]),n.push(e)}}function uh(e,t,i=Tt){const{immediate:n,deep:s,once:r,scheduler:o,augmentJob:a,call:l}=i,h=m=>s?m:re(m)||s===!1||s===0?Ve(m,1):Ve(m);let c,u,p,g,f=!1,_=!1;if(jt(e)?(u=()=>e.value,f=re(e)):Ai(e)?(u=()=>h(e),f=!0):nt(e)?(_=!0,f=e.some(m=>Ai(m)||re(m)),u=()=>e.map(m=>{if(jt(m))return m.value;if(Ai(m))return h(m);if(rt(m))return l?l(m,2):m()})):rt(e)?t?u=l?()=>l(e,2):e:u=()=>{if(p){Fe();try{p()}finally{ke()}}const m=ri;ri=c;try{return l?l(e,3,[g]):e(g)}finally{ri=m}}:u=Ce,t&&s){const m=u,S=s===!0?1/0:s;u=()=>Ve(m(),S)}const v=Bc(),C=()=>{c.stop(),v&&v.active&&$r(v.effects,c)};if(r&&t){const m=t;t=(...S)=>{m(...S),C()}}let T=_?new Array(e.length).fill(Cn):Cn;const d=m=>{if(!(!(c.flags&1)||!c.dirty&&!m))if(t){const S=c.run();if(s||f||(_?S.some((P,F)=>We(P,T[F])):We(S,T))){p&&p();const P=ri;ri=c;try{const F=[S,T===Cn?void 0:_&&T[0]===Cn?[]:T,g];T=S,l?l(t,3,F):t(...F)}finally{ri=P}}}else c.run()};return a&&a(d),c=new Ha(u),c.scheduler=o?()=>o(d,!1):d,g=m=>fh(m,!1,c),p=c.onStop=()=>{const m=On.get(c);if(m){if(l)l(m,4);else for(const S of m)S();On.delete(c)}},t?n?d(!0):T=c.run():o?o(d.bind(null,!0),!0):c.run(),C.pause=c.pause.bind(c),C.resume=c.resume.bind(c),C.stop=C,C}function Ve(e,t=1/0,i){if(t<=0||!Et(e)||e.__v_skip||(i=i||new Set,i.has(e)))return e;if(i.add(e),t--,jt(e))Ve(e.value,t,i);else if(nt(e))for(let n=0;n<e.length;n++)Ve(e[n],t,i);else if(Da(e)||Pi(e))e.forEach(n=>{Ve(n,t,i)});else if(Ia(e)){for(const n in e)Ve(e[n],t,i);for(const n of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,n)&&Ve(e[n],t,i)}return e}/**
* @vue/runtime-core v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function fn(e,t,i,n){try{return n?e(...n):e()}catch(s){Qn(s,t,i)}}function we(e,t,i,n){if(rt(e)){const s=fn(e,t,i,n);return s&&La(s)&&s.catch(r=>{Qn(r,t,i)}),s}if(nt(e)){const s=[];for(let r=0;r<e.length;r++)s.push(we(e[r],t,i,n));return s}}function Qn(e,t,i,n=!0){const s=t?t.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:o}=t&&t.appContext.config||Tt;if(t){let a=t.parent;const l=t.proxy,h=`https://vuejs.org/error-reference/#runtime-${i}`;for(;a;){const c=a.ec;if(c){for(let u=0;u<c.length;u++)if(c[u](e,l,h)===!1)return}a=a.parent}if(r){Fe(),fn(r,null,10,[e,l,h]),ke();return}}gh(e,i,s,n,o)}function gh(e,t,i,n=!0,s=!1){if(s)throw e;console.error(e)}const Xt=[];let ve=-1;const Ei=[];let $e=null,xi=0;const sl=Promise.resolve();let Dn=null;function ph(e){const t=Dn||sl;return e?t.then(this?e.bind(this):e):t}function mh(e){let t=ve+1,i=Xt.length;for(;t<i;){const n=t+i>>>1,s=Xt[n],r=an(s);r<e||r===e&&s.flags&2?t=n+1:i=n}return t}function Jr(e){if(!(e.flags&1)){const t=an(e),i=Xt[Xt.length-1];!i||!(e.flags&2)&&t>=an(i)?Xt.push(e):Xt.splice(mh(t),0,e),e.flags|=1,rl()}}function rl(){Dn||(Dn=sl.then(al))}function _h(e){nt(e)?Ei.push(...e):$e&&e.id===-1?$e.splice(xi+1,0,e):e.flags&1||(Ei.push(e),e.flags|=1),rl()}function Eo(e,t,i=ve+1){for(;i<Xt.length;i++){const n=Xt[i];if(n&&n.flags&2){if(e&&n.id!==e.uid)continue;Xt.splice(i,1),i--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function ol(e){if(Ei.length){const t=[...new Set(Ei)].sort((i,n)=>an(i)-an(n));if(Ei.length=0,$e){$e.push(...t);return}for($e=t,xi=0;xi<$e.length;xi++){const i=$e[xi];i.flags&4&&(i.flags&=-2),i.flags&8||i(),i.flags&=-2}$e=null,xi=0}}const an=e=>e.id==null?e.flags&2?-1:1/0:e.id;function al(e){try{for(ve=0;ve<Xt.length;ve++){const t=Xt[ve];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),fn(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;ve<Xt.length;ve++){const t=Xt[ve];t&&(t.flags&=-2)}ve=-1,Xt.length=0,ol(),Dn=null,(Xt.length||Ei.length)&&al()}}let de=null,ll=null;function Ln(e){const t=de;return de=e,ll=e&&e.type.__scopeId||null,t}function je(e,t=de,i){if(!t||e._n)return e;const n=(...s)=>{n._d&&Uo(-1);const r=Ln(t);let o;try{o=e(...s)}finally{Ln(r),n._d&&Uo(1)}return o};return n._n=!0,n._c=!0,n._d=!0,n}function ii(e,t,i,n){const s=e.dirs,r=t&&t.dirs;for(let o=0;o<s.length;o++){const a=s[o];r&&(a.oldValue=r[o].value);let l=a.dir[n];l&&(Fe(),we(l,i,8,[e.el,a,e,t]),ke())}}const yh=Symbol("_vte"),vh=e=>e.__isTeleport;function Qr(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Qr(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}/*! #__NO_SIDE_EFFECTS__ */function cl(e,t){return rt(e)?zt({name:e.name},t,{setup:e}):e}function hl(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function Qi(e,t,i,n,s=!1){if(nt(e)){e.forEach((f,_)=>Qi(f,t&&(nt(t)?t[_]:t),i,n,s));return}if(Zi(n)&&!s){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&Qi(e,t,i,n.component.subTree);return}const r=n.shapeFlag&4?so(n.component):n.el,o=s?null:r,{i:a,r:l}=e,h=t&&t.r,c=a.refs===Tt?a.refs={}:a.refs,u=a.setupState,p=pt(u),g=u===Tt?()=>!1:f=>mt(p,f);if(h!=null&&h!==l&&(Nt(h)?(c[h]=null,g(h)&&(u[h]=null)):jt(h)&&(h.value=null)),rt(l))fn(l,a,12,[o,c]);else{const f=Nt(l),_=jt(l);if(f||_){const v=()=>{if(e.f){const C=f?g(l)?u[l]:c[l]:l.value;s?nt(C)&&$r(C,r):nt(C)?C.includes(r)||C.push(r):f?(c[l]=[r],g(l)&&(u[l]=c[l])):(l.value=[r],e.k&&(c[e.k]=l.value))}else f?(c[l]=o,g(l)&&(u[l]=o)):_&&(l.value=o,e.k&&(c[e.k]=o))};o?(v.id=-1,ie(v,i)):v()}}}qn().requestIdleCallback;qn().cancelIdleCallback;const Zi=e=>!!e.type.__asyncLoader,dl=e=>e.type.__isKeepAlive;function bh(e,t){fl(e,"a",t)}function Sh(e,t){fl(e,"da",t)}function fl(e,t,i=Wt){const n=e.__wdc||(e.__wdc=()=>{let s=i;for(;s;){if(s.isDeactivated)return;s=s.parent}return e()});if(Zn(t,n,i),i){let s=i.parent;for(;s&&s.parent;)dl(s.parent.vnode)&&Ch(n,t,i,s),s=s.parent}}function Ch(e,t,i,n){const s=Zn(t,e,n,!0);ts(()=>{$r(n[t],s)},i)}function Zn(e,t,i=Wt,n=!1){if(i){const s=i[e]||(i[e]=[]),r=t.__weh||(t.__weh=(...o)=>{Fe();const a=gn(i),l=we(t,i,e,o);return a(),ke(),l});return n?s.unshift(r):s.push(r),r}}const Ne=e=>(t,i=Wt)=>{(!cn||e==="sp")&&Zn(e,(...n)=>t(...n),i)},ul=Ne("bm"),un=Ne("m"),wh=Ne("bu"),Zr=Ne("u"),gl=Ne("bum"),ts=Ne("um"),xh=Ne("sp"),Th=Ne("rtg"),Ph=Ne("rtc");function Ah(e,t=Wt){Zn("ec",e,t)}const pl="components";function $t(e,t){return _l(pl,e,!0,t)||e}const ml=Symbol.for("v-ndc");function Eh(e){return Nt(e)?_l(pl,e,!1)||e:e||ml}function _l(e,t,i=!0,n=!1){const s=de||Wt;if(s){const r=s.type;{const a=md(r,!1);if(a&&(a===t||a===oe(t)||a===Xn(oe(t))))return r}const o=Ro(s[e]||r[e],t)||Ro(s.appContext[e],t);return!o&&n?r:o}}function Ro(e,t){return e&&(e[t]||e[oe(t)]||e[Xn(oe(t))])}function Mo(e,t,i,n){let s;const r=i,o=nt(e);if(o||Nt(e)){const a=o&&Ai(e);let l=!1,h=!1;a&&(l=!re(e),h=ze(e),e=Jn(e)),s=new Array(e.length);for(let c=0,u=e.length;c<u;c++)s[c]=t(l?h?Nn(Ht(e[c])):Ht(e[c]):e[c],c,void 0,r)}else if(typeof e=="number"){s=new Array(e);for(let a=0;a<e;a++)s[a]=t(a+1,a,void 0,r)}else if(Et(e))if(e[Symbol.iterator])s=Array.from(e,(a,l)=>t(a,l,void 0,r));else{const a=Object.keys(e);s=new Array(a.length);for(let l=0,h=a.length;l<h;l++){const c=a[l];s[l]=t(e[c],c,l,r)}}else s=[];return s}const xr=e=>e?Gl(e)?so(e):xr(e.parent):null,tn=zt(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>xr(e.parent),$root:e=>xr(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>vl(e),$forceUpdate:e=>e.f||(e.f=()=>{Jr(e.update)}),$nextTick:e=>e.n||(e.n=ph.bind(e.proxy)),$watch:e=>qh.bind(e)}),er=(e,t)=>e!==Tt&&!e.__isScriptSetup&&mt(e,t),Rh={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:i,setupState:n,data:s,props:r,accessCache:o,type:a,appContext:l}=e;let h;if(t[0]!=="$"){const g=o[t];if(g!==void 0)switch(g){case 1:return n[t];case 2:return s[t];case 4:return i[t];case 3:return r[t]}else{if(er(n,t))return o[t]=1,n[t];if(s!==Tt&&mt(s,t))return o[t]=2,s[t];if((h=e.propsOptions[0])&&mt(h,t))return o[t]=3,r[t];if(i!==Tt&&mt(i,t))return o[t]=4,i[t];Tr&&(o[t]=0)}}const c=tn[t];let u,p;if(c)return t==="$attrs"&&Vt(e.attrs,"get",""),c(e);if((u=a.__cssModules)&&(u=u[t]))return u;if(i!==Tt&&mt(i,t))return o[t]=4,i[t];if(p=l.config.globalProperties,mt(p,t))return p[t]},set({_:e},t,i){const{data:n,setupState:s,ctx:r}=e;return er(s,t)?(s[t]=i,!0):n!==Tt&&mt(n,t)?(n[t]=i,!0):mt(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(r[t]=i,!0)},has({_:{data:e,setupState:t,accessCache:i,ctx:n,appContext:s,propsOptions:r}},o){let a;return!!i[o]||e!==Tt&&mt(e,o)||er(t,o)||(a=r[0])&&mt(a,o)||mt(n,o)||mt(tn,o)||mt(s.config.globalProperties,o)},defineProperty(e,t,i){return i.get!=null?e._.accessCache[t]=0:mt(i,"value")&&this.set(e,t,i.value,null),Reflect.defineProperty(e,t,i)}};function Fo(e){return nt(e)?e.reduce((t,i)=>(t[i]=null,t),{}):e}let Tr=!0;function Mh(e){const t=vl(e),i=e.proxy,n=e.ctx;Tr=!1,t.beforeCreate&&ko(t.beforeCreate,e,"bc");const{data:s,computed:r,methods:o,watch:a,provide:l,inject:h,created:c,beforeMount:u,mounted:p,beforeUpdate:g,updated:f,activated:_,deactivated:v,beforeDestroy:C,beforeUnmount:T,destroyed:d,unmounted:m,render:S,renderTracked:P,renderTriggered:F,errorCaptured:y,serverPrefetch:E,expose:x,inheritAttrs:R,components:k,directives:L,filters:j}=t;if(h&&Fh(h,n,null),o)for(const K in o){const B=o[K];rt(B)&&(n[K]=B.bind(i))}if(s){const K=s.call(i,i);Et(K)&&(e.data=Oi(K))}if(Tr=!0,r)for(const K in r){const B=r[K],ot=rt(B)?B.bind(i,i):rt(B.get)?B.get.bind(i,i):Ce,J=!rt(B)&&rt(B.set)?B.set.bind(i):Ce,z=yd({get:ot,set:J});Object.defineProperty(n,K,{enumerable:!0,configurable:!0,get:()=>z.value,set:st=>z.value=st})}if(a)for(const K in a)yl(a[K],n,i,K);if(l){const K=rt(l)?l.call(i):l;Reflect.ownKeys(K).forEach(B=>{Gh(B,K[B])})}c&&ko(c,e,"c");function Z(K,B){nt(B)?B.forEach(ot=>K(ot.bind(i))):B&&K(B.bind(i))}if(Z(ul,u),Z(un,p),Z(wh,g),Z(Zr,f),Z(bh,_),Z(Sh,v),Z(Ah,y),Z(Ph,P),Z(Th,F),Z(gl,T),Z(ts,m),Z(xh,E),nt(x))if(x.length){const K=e.exposed||(e.exposed={});x.forEach(B=>{Object.defineProperty(K,B,{get:()=>i[B],set:ot=>i[B]=ot,enumerable:!0})})}else e.exposed||(e.exposed={});S&&e.render===Ce&&(e.render=S),R!=null&&(e.inheritAttrs=R),k&&(e.components=k),L&&(e.directives=L),E&&hl(e)}function Fh(e,t,i=Ce){nt(e)&&(e=Pr(e));for(const n in e){const s=e[n];let r;Et(s)?"default"in s?r=En(s.from||n,s.default,!0):r=En(s.from||n):r=En(s),jt(r)?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):t[n]=r}}function ko(e,t,i){we(nt(e)?e.map(n=>n.bind(t.proxy)):e.bind(t.proxy),t,i)}function yl(e,t,i,n){let s=n.includes(".")?kl(i,n):()=>i[n];if(Nt(e)){const r=t[e];rt(r)&&en(s,r)}else if(rt(e))en(s,e.bind(i));else if(Et(e))if(nt(e))e.forEach(r=>yl(r,t,i,n));else{const r=rt(e.handler)?e.handler.bind(i):t[e.handler];rt(r)&&en(s,r,e)}}function vl(e){const t=e.type,{mixins:i,extends:n}=t,{mixins:s,optionsCache:r,config:{optionMergeStrategies:o}}=e.appContext,a=r.get(t);let l;return a?l=a:!s.length&&!i&&!n?l=t:(l={},s.length&&s.forEach(h=>Gn(l,h,o,!0)),Gn(l,t,o)),Et(t)&&r.set(t,l),l}function Gn(e,t,i,n=!1){const{mixins:s,extends:r}=t;r&&Gn(e,r,i,!0),s&&s.forEach(o=>Gn(e,o,i,!0));for(const o in t)if(!(n&&o==="expose")){const a=kh[o]||i&&i[o];e[o]=a?a(e[o],t[o]):t[o]}return e}const kh={data:No,props:Oo,emits:Oo,methods:Yi,computed:Yi,beforeCreate:Yt,created:Yt,beforeMount:Yt,mounted:Yt,beforeUpdate:Yt,updated:Yt,beforeDestroy:Yt,beforeUnmount:Yt,destroyed:Yt,unmounted:Yt,activated:Yt,deactivated:Yt,errorCaptured:Yt,serverPrefetch:Yt,components:Yi,directives:Yi,watch:Oh,provide:No,inject:Nh};function No(e,t){return t?e?function(){return zt(rt(e)?e.call(this,this):e,rt(t)?t.call(this,this):t)}:t:e}function Nh(e,t){return Yi(Pr(e),Pr(t))}function Pr(e){if(nt(e)){const t={};for(let i=0;i<e.length;i++)t[e[i]]=e[i];return t}return e}function Yt(e,t){return e?[...new Set([].concat(e,t))]:t}function Yi(e,t){return e?zt(Object.create(null),e,t):t}function Oo(e,t){return e?nt(e)&&nt(t)?[...new Set([...e,...t])]:zt(Object.create(null),Fo(e),Fo(t??{})):t}function Oh(e,t){if(!e)return t;if(!t)return e;const i=zt(Object.create(null),e);for(const n in t)i[n]=Yt(e[n],t[n]);return i}function bl(){return{app:null,config:{isNativeTag:Ac,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Dh=0;function Lh(e,t){return function(n,s=null){rt(n)||(n=zt({},n)),s!=null&&!Et(s)&&(s=null);const r=bl(),o=new WeakSet,a=[];let l=!1;const h=r.app={_uid:Dh++,_component:n,_props:s,_container:null,_context:r,_instance:null,version:vd,get config(){return r.config},set config(c){},use(c,...u){return o.has(c)||(c&&rt(c.install)?(o.add(c),c.install(h,...u)):rt(c)&&(o.add(c),c(h,...u))),h},mixin(c){return r.mixins.includes(c)||r.mixins.push(c),h},component(c,u){return u?(r.components[c]=u,h):r.components[c]},directive(c,u){return u?(r.directives[c]=u,h):r.directives[c]},mount(c,u,p){if(!l){const g=h._ceVNode||at(n,s);return g.appContext=r,p===!0?p="svg":p===!1&&(p=void 0),e(g,c,p),l=!0,h._container=c,c.__vue_app__=h,so(g.component)}},onUnmount(c){a.push(c)},unmount(){l&&(we(a,h._instance,16),e(null,h._container),delete h._container.__vue_app__)},provide(c,u){return r.provides[c]=u,h},runWithContext(c){const u=Ri;Ri=h;try{return c()}finally{Ri=u}}};return h}}let Ri=null;function Gh(e,t){if(Wt){let i=Wt.provides;const n=Wt.parent&&Wt.parent.provides;n===i&&(i=Wt.provides=Object.create(n)),i[e]=t}}function En(e,t,i=!1){const n=no();if(n||Ri){let s=Ri?Ri._context.provides:n?n.parent==null||n.ce?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(s&&e in s)return s[e];if(arguments.length>1)return i&&rt(t)?t.call(n&&n.proxy):t}}const Sl={},Cl=()=>Object.create(Sl),wl=e=>Object.getPrototypeOf(e)===Sl;function Ih(e,t,i,n=!1){const s={},r=Cl();e.propsDefaults=Object.create(null),xl(e,t,s,r);for(const o in e.propsOptions[0])o in s||(s[o]=void 0);i?e.props=n?s:rh(s):e.type.props?e.props=s:e.props=r,e.attrs=r}function Uh(e,t,i,n){const{props:s,attrs:r,vnode:{patchFlag:o}}=e,a=pt(s),[l]=e.propsOptions;let h=!1;if((n||o>0)&&!(o&16)){if(o&8){const c=e.vnode.dynamicProps;for(let u=0;u<c.length;u++){let p=c[u];if(es(e.emitsOptions,p))continue;const g=t[p];if(l)if(mt(r,p))g!==r[p]&&(r[p]=g,h=!0);else{const f=oe(p);s[f]=Ar(l,a,f,g,e,!1)}else g!==r[p]&&(r[p]=g,h=!0)}}}else{xl(e,t,s,r)&&(h=!0);let c;for(const u in a)(!t||!mt(t,u)&&((c=ci(u))===u||!mt(t,c)))&&(l?i&&(i[u]!==void 0||i[c]!==void 0)&&(s[u]=Ar(l,a,u,void 0,e,!0)):delete s[u]);if(r!==a)for(const u in r)(!t||!mt(t,u))&&(delete r[u],h=!0)}h&&Re(e.attrs,"set","")}function xl(e,t,i,n){const[s,r]=e.propsOptions;let o=!1,a;if(t)for(let l in t){if(Xi(l))continue;const h=t[l];let c;s&&mt(s,c=oe(l))?!r||!r.includes(c)?i[c]=h:(a||(a={}))[c]=h:es(e.emitsOptions,l)||(!(l in n)||h!==n[l])&&(n[l]=h,o=!0)}if(r){const l=pt(i),h=a||Tt;for(let c=0;c<r.length;c++){const u=r[c];i[u]=Ar(s,l,u,h[u],e,!mt(h,u))}}return o}function Ar(e,t,i,n,s,r){const o=e[i];if(o!=null){const a=mt(o,"default");if(a&&n===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&rt(l)){const{propsDefaults:h}=s;if(i in h)n=h[i];else{const c=gn(s);n=h[i]=l.call(null,t),c()}}else n=l;s.ce&&s.ce._setProp(i,n)}o[0]&&(r&&!a?n=!1:o[1]&&(n===""||n===ci(i))&&(n=!0))}return n}const Bh=new WeakMap;function Tl(e,t,i=!1){const n=i?Bh:t.propsCache,s=n.get(e);if(s)return s;const r=e.props,o={},a=[];let l=!1;if(!rt(e)){const c=u=>{l=!0;const[p,g]=Tl(u,t,!0);zt(o,p),g&&a.push(...g)};!i&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}if(!r&&!l)return Et(e)&&n.set(e,Ti),Ti;if(nt(r))for(let c=0;c<r.length;c++){const u=oe(r[c]);Do(u)&&(o[u]=Tt)}else if(r)for(const c in r){const u=oe(c);if(Do(u)){const p=r[c],g=o[u]=nt(p)||rt(p)?{type:p}:zt({},p),f=g.type;let _=!1,v=!0;if(nt(f))for(let C=0;C<f.length;++C){const T=f[C],d=rt(T)&&T.name;if(d==="Boolean"){_=!0;break}else d==="String"&&(v=!1)}else _=rt(f)&&f.name==="Boolean";g[0]=_,g[1]=v,(_||mt(g,"default"))&&a.push(u)}}const h=[o,a];return Et(e)&&n.set(e,h),h}function Do(e){return e[0]!=="$"&&!Xi(e)}const to=e=>e==="_"||e==="__"||e==="_ctx"||e==="$stable",eo=e=>nt(e)?e.map(be):[be(e)],$h=(e,t,i)=>{if(t._n)return t;const n=je((...s)=>eo(t(...s)),i);return n._c=!1,n},Pl=(e,t,i)=>{const n=e._ctx;for(const s in e){if(to(s))continue;const r=e[s];if(rt(r))t[s]=$h(s,r,n);else if(r!=null){const o=eo(r);t[s]=()=>o}}},Al=(e,t)=>{const i=eo(t);e.slots.default=()=>i},El=(e,t,i)=>{for(const n in t)(i||!to(n))&&(e[n]=t[n])},Hh=(e,t,i)=>{const n=e.slots=Cl();if(e.vnode.shapeFlag&32){const s=t.__;s&&vr(n,"__",s,!0);const r=t._;r?(El(n,t,i),i&&vr(n,"_",r,!0)):Pl(t,n)}else t&&Al(e,t)},Vh=(e,t,i)=>{const{vnode:n,slots:s}=e;let r=!0,o=Tt;if(n.shapeFlag&32){const a=t._;a?i&&a===1?r=!1:El(s,t,i):(r=!t.$stable,Pl(t,s)),o=t}else t&&(Al(e,t),o={default:1});if(r)for(const a in s)!to(a)&&o[a]==null&&delete s[a]},ie=nd;function Wh(e){return jh(e)}function jh(e,t){const i=qn();i.__VUE__=!0;const{insert:n,remove:s,patchProp:r,createElement:o,createText:a,createComment:l,setText:h,setElementText:c,parentNode:u,nextSibling:p,setScopeId:g=Ce,insertStaticContent:f}=e,_=(b,w,M,N=null,O=null,D=null,$=void 0,H=null,U=!!w.dynamicChildren)=>{if(b===w)return;b&&!Wi(b,w)&&(N=A(b),st(b,O,D,!0),b=null),w.patchFlag===-2&&(U=!1,w.dynamicChildren=null);const{type:I,ref:q,shapeFlag:W}=w;switch(I){case is:v(b,w,M,N);break;case Ke:C(b,w,M,N);break;case nr:b==null&&T(w,M,N,$);break;case he:k(b,w,M,N,O,D,$,H,U);break;default:W&1?S(b,w,M,N,O,D,$,H,U):W&6?L(b,w,M,N,O,D,$,H,U):(W&64||W&128)&&I.process(b,w,M,N,O,D,$,H,U,gt)}q!=null&&O?Qi(q,b&&b.ref,D,w||b,!w):q==null&&b&&b.ref!=null&&Qi(b.ref,null,D,b,!0)},v=(b,w,M,N)=>{if(b==null)n(w.el=a(w.children),M,N);else{const O=w.el=b.el;w.children!==b.children&&h(O,w.children)}},C=(b,w,M,N)=>{b==null?n(w.el=l(w.children||""),M,N):w.el=b.el},T=(b,w,M,N)=>{[b.el,b.anchor]=f(b.children,w,M,N,b.el,b.anchor)},d=({el:b,anchor:w},M,N)=>{let O;for(;b&&b!==w;)O=p(b),n(b,M,N),b=O;n(w,M,N)},m=({el:b,anchor:w})=>{let M;for(;b&&b!==w;)M=p(b),s(b),b=M;s(w)},S=(b,w,M,N,O,D,$,H,U)=>{w.type==="svg"?$="svg":w.type==="math"&&($="mathml"),b==null?P(w,M,N,O,D,$,H,U):E(b,w,O,D,$,H,U)},P=(b,w,M,N,O,D,$,H)=>{let U,I;const{props:q,shapeFlag:W,transition:X,dirs:it}=b;if(U=b.el=o(b.type,D,q&&q.is,q),W&8?c(U,b.children):W&16&&y(b.children,U,null,N,O,ir(b,D),$,H),it&&ii(b,null,N,"created"),F(U,b,b.scopeId,$,N),q){for(const wt in q)wt!=="value"&&!Xi(wt)&&r(U,wt,null,q[wt],D,N);"value"in q&&r(U,"value",null,q.value,D),(I=q.onVnodeBeforeMount)&&ye(I,N,b)}it&&ii(b,null,N,"beforeMount");const ft=zh(O,X);ft&&X.beforeEnter(U),n(U,w,M),((I=q&&q.onVnodeMounted)||ft||it)&&ie(()=>{I&&ye(I,N,b),ft&&X.enter(U),it&&ii(b,null,N,"mounted")},O)},F=(b,w,M,N,O)=>{if(M&&g(b,M),N)for(let D=0;D<N.length;D++)g(b,N[D]);if(O){let D=O.subTree;if(w===D||Ol(D.type)&&(D.ssContent===w||D.ssFallback===w)){const $=O.vnode;F(b,$,$.scopeId,$.slotScopeIds,O.parent)}}},y=(b,w,M,N,O,D,$,H,U=0)=>{for(let I=U;I<b.length;I++){const q=b[I]=H?He(b[I]):be(b[I]);_(null,q,w,M,N,O,D,$,H)}},E=(b,w,M,N,O,D,$)=>{const H=w.el=b.el;let{patchFlag:U,dynamicChildren:I,dirs:q}=w;U|=b.patchFlag&16;const W=b.props||Tt,X=w.props||Tt;let it;if(M&&ni(M,!1),(it=X.onVnodeBeforeUpdate)&&ye(it,M,w,b),q&&ii(w,b,M,"beforeUpdate"),M&&ni(M,!0),(W.innerHTML&&X.innerHTML==null||W.textContent&&X.textContent==null)&&c(H,""),I?x(b.dynamicChildren,I,H,M,N,ir(w,O),D):$||B(b,w,H,null,M,N,ir(w,O),D,!1),U>0){if(U&16)R(H,W,X,M,O);else if(U&2&&W.class!==X.class&&r(H,"class",null,X.class,O),U&4&&r(H,"style",W.style,X.style,O),U&8){const ft=w.dynamicProps;for(let wt=0;wt<ft.length;wt++){const yt=ft[wt],qt=W[yt],Jt=X[yt];(Jt!==qt||yt==="value")&&r(H,yt,qt,Jt,O,M)}}U&1&&b.children!==w.children&&c(H,w.children)}else!$&&I==null&&R(H,W,X,M,O);((it=X.onVnodeUpdated)||q)&&ie(()=>{it&&ye(it,M,w,b),q&&ii(w,b,M,"updated")},N)},x=(b,w,M,N,O,D,$)=>{for(let H=0;H<w.length;H++){const U=b[H],I=w[H],q=U.el&&(U.type===he||!Wi(U,I)||U.shapeFlag&198)?u(U.el):M;_(U,I,q,null,N,O,D,$,!0)}},R=(b,w,M,N,O)=>{if(w!==M){if(w!==Tt)for(const D in w)!Xi(D)&&!(D in M)&&r(b,D,w[D],null,O,N);for(const D in M){if(Xi(D))continue;const $=M[D],H=w[D];$!==H&&D!=="value"&&r(b,D,H,$,O,N)}"value"in M&&r(b,"value",w.value,M.value,O)}},k=(b,w,M,N,O,D,$,H,U)=>{const I=w.el=b?b.el:a(""),q=w.anchor=b?b.anchor:a("");let{patchFlag:W,dynamicChildren:X,slotScopeIds:it}=w;it&&(H=H?H.concat(it):it),b==null?(n(I,M,N),n(q,M,N),y(w.children||[],M,q,O,D,$,H,U)):W>0&&W&64&&X&&b.dynamicChildren?(x(b.dynamicChildren,X,M,O,D,$,H),(w.key!=null||O&&w===O.subTree)&&Rl(b,w,!0)):B(b,w,M,q,O,D,$,H,U)},L=(b,w,M,N,O,D,$,H,U)=>{w.slotScopeIds=H,b==null?w.shapeFlag&512?O.ctx.activate(w,M,N,$,U):j(w,M,N,O,D,$,U):V(b,w,U)},j=(b,w,M,N,O,D,$)=>{const H=b.component=dd(b,N,O);if(dl(b)&&(H.ctx.renderer=gt),fd(H,!1,$),H.asyncDep){if(O&&O.registerDep(H,Z,$),!b.el){const U=H.subTree=at(Ke);C(null,U,w,M),b.placeholder=U.el}}else Z(H,b,w,M,O,D,$)},V=(b,w,M)=>{const N=w.component=b.component;if(ed(b,w,M))if(N.asyncDep&&!N.asyncResolved){K(N,w,M);return}else N.next=w,N.update();else w.el=b.el,N.vnode=w},Z=(b,w,M,N,O,D,$)=>{const H=()=>{if(b.isMounted){let{next:W,bu:X,u:it,parent:ft,vnode:wt}=b;{const me=Ml(b);if(me){W&&(W.el=wt.el,K(b,W,$)),me.asyncDep.then(()=>{b.isUnmounted||H()});return}}let yt=W,qt;ni(b,!1),W?(W.el=wt.el,K(b,W,$)):W=wt,X&&qs(X),(qt=W.props&&W.props.onVnodeBeforeUpdate)&&ye(qt,ft,W,wt),ni(b,!0);const Jt=Go(b),pe=b.subTree;b.subTree=Jt,_(pe,Jt,u(pe.el),A(pe),b,O,D),W.el=Jt.el,yt===null&&id(b,Jt.el),it&&ie(it,O),(qt=W.props&&W.props.onVnodeUpdated)&&ie(()=>ye(qt,ft,W,wt),O)}else{let W;const{el:X,props:it}=w,{bm:ft,m:wt,parent:yt,root:qt,type:Jt}=b,pe=Zi(w);ni(b,!1),ft&&qs(ft),!pe&&(W=it&&it.onVnodeBeforeMount)&&ye(W,yt,w),ni(b,!0);{qt.ce&&qt.ce._def.shadowRoot!==!1&&qt.ce._injectChildStyle(Jt);const me=b.subTree=Go(b);_(null,me,M,N,b,O,D),w.el=me.el}if(wt&&ie(wt,O),!pe&&(W=it&&it.onVnodeMounted)){const me=w;ie(()=>ye(W,yt,me),O)}(w.shapeFlag&256||yt&&Zi(yt.vnode)&&yt.vnode.shapeFlag&256)&&b.a&&ie(b.a,O),b.isMounted=!0,w=M=N=null}};b.scope.on();const U=b.effect=new Ha(H);b.scope.off();const I=b.update=U.run.bind(U),q=b.job=U.runIfDirty.bind(U);q.i=b,q.id=b.uid,U.scheduler=()=>Jr(q),ni(b,!0),I()},K=(b,w,M)=>{w.component=b;const N=b.vnode.props;b.vnode=w,b.next=null,Uh(b,w.props,N,M),Vh(b,w.children,M),Fe(),Eo(b),ke()},B=(b,w,M,N,O,D,$,H,U=!1)=>{const I=b&&b.children,q=b?b.shapeFlag:0,W=w.children,{patchFlag:X,shapeFlag:it}=w;if(X>0){if(X&128){J(I,W,M,N,O,D,$,H,U);return}else if(X&256){ot(I,W,M,N,O,D,$,H,U);return}}it&8?(q&16&&Dt(I,O,D),W!==I&&c(M,W)):q&16?it&16?J(I,W,M,N,O,D,$,H,U):Dt(I,O,D,!0):(q&8&&c(M,""),it&16&&y(W,M,N,O,D,$,H,U))},ot=(b,w,M,N,O,D,$,H,U)=>{b=b||Ti,w=w||Ti;const I=b.length,q=w.length,W=Math.min(I,q);let X;for(X=0;X<W;X++){const it=w[X]=U?He(w[X]):be(w[X]);_(b[X],it,M,null,O,D,$,H,U)}I>q?Dt(b,O,D,!0,!1,W):y(w,M,N,O,D,$,H,U,W)},J=(b,w,M,N,O,D,$,H,U)=>{let I=0;const q=w.length;let W=b.length-1,X=q-1;for(;I<=W&&I<=X;){const it=b[I],ft=w[I]=U?He(w[I]):be(w[I]);if(Wi(it,ft))_(it,ft,M,null,O,D,$,H,U);else break;I++}for(;I<=W&&I<=X;){const it=b[W],ft=w[X]=U?He(w[X]):be(w[X]);if(Wi(it,ft))_(it,ft,M,null,O,D,$,H,U);else break;W--,X--}if(I>W){if(I<=X){const it=X+1,ft=it<q?w[it].el:N;for(;I<=X;)_(null,w[I]=U?He(w[I]):be(w[I]),M,ft,O,D,$,H,U),I++}}else if(I>X)for(;I<=W;)st(b[I],O,D,!0),I++;else{const it=I,ft=I,wt=new Map;for(I=ft;I<=X;I++){const te=w[I]=U?He(w[I]):be(w[I]);te.key!=null&&wt.set(te.key,I)}let yt,qt=0;const Jt=X-ft+1;let pe=!1,me=0;const Hi=new Array(Jt);for(I=0;I<Jt;I++)Hi[I]=0;for(I=it;I<=W;I++){const te=b[I];if(qt>=Jt){st(te,O,D,!0);continue}let _e;if(te.key!=null)_e=wt.get(te.key);else for(yt=ft;yt<=X;yt++)if(Hi[yt-ft]===0&&Wi(te,w[yt])){_e=yt;break}_e===void 0?st(te,O,D,!0):(Hi[_e-ft]=I+1,_e>=me?me=_e:pe=!0,_(te,w[_e],M,null,O,D,$,H,U),qt++)}const Co=pe?Kh(Hi):Ti;for(yt=Co.length-1,I=Jt-1;I>=0;I--){const te=ft+I,_e=w[te],wo=w[te+1],xo=te+1<q?wo.el||wo.placeholder:N;Hi[I]===0?_(null,_e,M,xo,O,D,$,H,U):pe&&(yt<0||I!==Co[yt]?z(_e,M,xo,2):yt--)}}},z=(b,w,M,N,O=null)=>{const{el:D,type:$,transition:H,children:U,shapeFlag:I}=b;if(I&6){z(b.component.subTree,w,M,N);return}if(I&128){b.suspense.move(w,M,N);return}if(I&64){$.move(b,w,M,gt);return}if($===he){n(D,w,M);for(let W=0;W<U.length;W++)z(U[W],w,M,N);n(b.anchor,w,M);return}if($===nr){d(b,w,M);return}if(N!==2&&I&1&&H)if(N===0)H.beforeEnter(D),n(D,w,M),ie(()=>H.enter(D),O);else{const{leave:W,delayLeave:X,afterLeave:it}=H,ft=()=>{b.ctx.isUnmounted?s(D):n(D,w,M)},wt=()=>{W(D,()=>{ft(),it&&it()})};X?X(D,ft,wt):wt()}else n(D,w,M)},st=(b,w,M,N=!1,O=!1)=>{const{type:D,props:$,ref:H,children:U,dynamicChildren:I,shapeFlag:q,patchFlag:W,dirs:X,cacheIndex:it}=b;if(W===-2&&(O=!1),H!=null&&(Fe(),Qi(H,null,M,b,!0),ke()),it!=null&&(w.renderCache[it]=void 0),q&256){w.ctx.deactivate(b);return}const ft=q&1&&X,wt=!Zi(b);let yt;if(wt&&(yt=$&&$.onVnodeBeforeUnmount)&&ye(yt,w,b),q&6)le(b.component,M,N);else{if(q&128){b.suspense.unmount(M,N);return}ft&&ii(b,null,w,"beforeUnmount"),q&64?b.type.remove(b,w,M,gt,N):I&&!I.hasOnce&&(D!==he||W>0&&W&64)?Dt(I,w,M,!1,!0):(D===he&&W&384||!O&&q&16)&&Dt(U,w,M),N&&Ct(b)}(wt&&(yt=$&&$.onVnodeUnmounted)||ft)&&ie(()=>{yt&&ye(yt,w,b),ft&&ii(b,null,w,"unmounted")},M)},Ct=b=>{const{type:w,el:M,anchor:N,transition:O}=b;if(w===he){Ie(M,N);return}if(w===nr){m(b);return}const D=()=>{s(M),O&&!O.persisted&&O.afterLeave&&O.afterLeave()};if(b.shapeFlag&1&&O&&!O.persisted){const{leave:$,delayLeave:H}=O,U=()=>$(M,D);H?H(b.el,D,U):U()}else D()},Ie=(b,w)=>{let M;for(;b!==w;)M=p(b),s(b),b=M;s(w)},le=(b,w,M)=>{const{bum:N,scope:O,job:D,subTree:$,um:H,m:U,a:I,parent:q,slots:{__:W}}=b;Lo(U),Lo(I),N&&qs(N),q&&nt(W)&&W.forEach(X=>{q.renderCache[X]=void 0}),O.stop(),D&&(D.flags|=8,st($,b,w,M)),H&&ie(H,w),ie(()=>{b.isUnmounted=!0},w),w&&w.pendingBranch&&!w.isUnmounted&&b.asyncDep&&!b.asyncResolved&&b.suspenseId===w.pendingId&&(w.deps--,w.deps===0&&w.resolve())},Dt=(b,w,M,N=!1,O=!1,D=0)=>{for(let $=D;$<b.length;$++)st(b[$],w,M,N,O)},A=b=>{if(b.shapeFlag&6)return A(b.component.subTree);if(b.shapeFlag&128)return b.suspense.next();const w=p(b.anchor||b.el),M=w&&w[yh];return M?p(M):w};let G=!1;const Y=(b,w,M)=>{b==null?w._vnode&&st(w._vnode,null,null,!0):_(w._vnode||null,b,w,null,null,null,M),w._vnode=b,G||(G=!0,Eo(),ol(),G=!1)},gt={p:_,um:st,m:z,r:Ct,mt:j,mc:y,pc:B,pbc:x,n:A,o:e};return{render:Y,hydrate:void 0,createApp:Lh(Y)}}function ir({type:e,props:t},i){return i==="svg"&&e==="foreignObject"||i==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:i}function ni({effect:e,job:t},i){i?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function zh(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Rl(e,t,i=!1){const n=e.children,s=t.children;if(nt(n)&&nt(s))for(let r=0;r<n.length;r++){const o=n[r];let a=s[r];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[r]=He(s[r]),a.el=o.el),!i&&a.patchFlag!==-2&&Rl(o,a)),a.type===is&&(a.el=o.el),a.type===Ke&&!a.el&&(a.el=o.el)}}function Kh(e){const t=e.slice(),i=[0];let n,s,r,o,a;const l=e.length;for(n=0;n<l;n++){const h=e[n];if(h!==0){if(s=i[i.length-1],e[s]<h){t[n]=s,i.push(n);continue}for(r=0,o=i.length-1;r<o;)a=r+o>>1,e[i[a]]<h?r=a+1:o=a;h<e[i[r]]&&(r>0&&(t[n]=i[r-1]),i[r]=n)}}for(r=i.length,o=i[r-1];r-- >0;)i[r]=o,o=t[o];return i}function Ml(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Ml(t)}function Lo(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const Yh=Symbol.for("v-scx"),Xh=()=>En(Yh);function en(e,t,i){return Fl(e,t,i)}function Fl(e,t,i=Tt){const{immediate:n,deep:s,flush:r,once:o}=i,a=zt({},i),l=t&&n||!t&&r!=="post";let h;if(cn){if(r==="sync"){const g=Xh();h=g.__watcherHandles||(g.__watcherHandles=[])}else if(!l){const g=()=>{};return g.stop=Ce,g.resume=Ce,g.pause=Ce,g}}const c=Wt;a.call=(g,f,_)=>we(g,c,f,_);let u=!1;r==="post"?a.scheduler=g=>{ie(g,c&&c.suspense)}:r!=="sync"&&(u=!0,a.scheduler=(g,f)=>{f?g():Jr(g)}),a.augmentJob=g=>{t&&(g.flags|=4),u&&(g.flags|=2,c&&(g.id=c.uid,g.i=c))};const p=uh(e,t,a);return cn&&(h?h.push(p):l&&p()),p}function qh(e,t,i){const n=this.proxy,s=Nt(e)?e.includes(".")?kl(n,e):()=>n[e]:e.bind(n,n);let r;rt(t)?r=t:(r=t.handler,i=t);const o=gn(this),a=Fl(s,r.bind(n),i);return o(),a}function kl(e,t){const i=t.split(".");return()=>{let n=e;for(let s=0;s<i.length&&n;s++)n=n[i[s]];return n}}const Jh=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${oe(t)}Modifiers`]||e[`${ci(t)}Modifiers`];function Qh(e,t,...i){if(e.isUnmounted)return;const n=e.vnode.props||Tt;let s=i;const r=t.startsWith("update:"),o=r&&Jh(n,t.slice(7));o&&(o.trim&&(s=i.map(c=>Nt(c)?c.trim():c)),o.number&&(s=i.map(kc)));let a,l=n[a=Xs(t)]||n[a=Xs(oe(t))];!l&&r&&(l=n[a=Xs(ci(t))]),l&&we(l,e,6,s);const h=n[a+"Once"];if(h){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,we(h,e,6,s)}}function Nl(e,t,i=!1){const n=t.emitsCache,s=n.get(e);if(s!==void 0)return s;const r=e.emits;let o={},a=!1;if(!rt(e)){const l=h=>{const c=Nl(h,t,!0);c&&(a=!0,zt(o,c))};!i&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!r&&!a?(Et(e)&&n.set(e,null),null):(nt(r)?r.forEach(l=>o[l]=null):zt(o,r),Et(e)&&n.set(e,o),o)}function es(e,t){return!e||!zn(t)?!1:(t=t.slice(2).replace(/Once$/,""),mt(e,t[0].toLowerCase()+t.slice(1))||mt(e,ci(t))||mt(e,t))}function Go(e){const{type:t,vnode:i,proxy:n,withProxy:s,propsOptions:[r],slots:o,attrs:a,emit:l,render:h,renderCache:c,props:u,data:p,setupState:g,ctx:f,inheritAttrs:_}=e,v=Ln(e);let C,T;try{if(i.shapeFlag&4){const m=s||n,S=m;C=be(h.call(S,m,c,u,g,p,f)),T=a}else{const m=t;C=be(m.length>1?m(u,{attrs:a,slots:o,emit:l}):m(u,null)),T=t.props?a:Zh(a)}}catch(m){nn.length=0,Qn(m,e,1),C=at(Ke)}let d=C;if(T&&_!==!1){const m=Object.keys(T),{shapeFlag:S}=d;m.length&&S&7&&(r&&m.some(Br)&&(T=td(T,r)),d=Mi(d,T,!1,!0))}return i.dirs&&(d=Mi(d,null,!1,!0),d.dirs=d.dirs?d.dirs.concat(i.dirs):i.dirs),i.transition&&Qr(d,i.transition),C=d,Ln(v),C}const Zh=e=>{let t;for(const i in e)(i==="class"||i==="style"||zn(i))&&((t||(t={}))[i]=e[i]);return t},td=(e,t)=>{const i={};for(const n in e)(!Br(n)||!(n.slice(9)in t))&&(i[n]=e[n]);return i};function ed(e,t,i){const{props:n,children:s,component:r}=e,{props:o,children:a,patchFlag:l}=t,h=r.emitsOptions;if(t.dirs||t.transition)return!0;if(i&&l>=0){if(l&1024)return!0;if(l&16)return n?Io(n,o,h):!!o;if(l&8){const c=t.dynamicProps;for(let u=0;u<c.length;u++){const p=c[u];if(o[p]!==n[p]&&!es(h,p))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:n===o?!1:n?o?Io(n,o,h):!0:!!o;return!1}function Io(e,t,i){const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(let s=0;s<n.length;s++){const r=n[s];if(t[r]!==e[r]&&!es(i,r))return!0}return!1}function id({vnode:e,parent:t},i){for(;t;){const n=t.subTree;if(n.suspense&&n.suspense.activeBranch===e&&(n.el=e.el),n===e)(e=t.vnode).el=i,t=t.parent;else break}}const Ol=e=>e.__isSuspense;function nd(e,t){t&&t.pendingBranch?nt(e)?t.effects.push(...e):t.effects.push(e):_h(e)}const he=Symbol.for("v-fgt"),is=Symbol.for("v-txt"),Ke=Symbol.for("v-cmt"),nr=Symbol.for("v-stc"),nn=[];let ne=null;function Pt(e=!1){nn.push(ne=e?null:[])}function sd(){nn.pop(),ne=nn[nn.length-1]||null}let ln=1;function Uo(e,t=!1){ln+=e,e<0&&ne&&t&&(ne.hasOnce=!0)}function Dl(e){return e.dynamicChildren=ln>0?ne||Ti:null,sd(),ln>0&&ne&&ne.push(e),e}function Bt(e,t,i,n,s,r){return Dl(tt(e,t,i,n,s,r,!0))}function li(e,t,i,n,s){return Dl(at(e,t,i,n,s,!0))}function In(e){return e?e.__v_isVNode===!0:!1}function Wi(e,t){return e.type===t.type&&e.key===t.key}const Ll=({key:e})=>e??null,Rn=({ref:e,ref_key:t,ref_for:i})=>(typeof e=="number"&&(e=""+e),e!=null?Nt(e)||jt(e)||rt(e)?{i:de,r:e,k:t,f:!!i}:e:null);function tt(e,t=null,i=null,n=0,s=null,r=e===he?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Ll(t),ref:t&&Rn(t),scopeId:ll,slotScopeIds:null,children:i,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:n,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:de};return a?(io(l,i),r&128&&e.normalize(l)):i&&(l.shapeFlag|=Nt(i)?8:16),ln>0&&!o&&ne&&(l.patchFlag>0||r&6)&&l.patchFlag!==32&&ne.push(l),l}const at=rd;function rd(e,t=null,i=null,n=0,s=null,r=!1){if((!e||e===ml)&&(e=Ke),In(e)){const a=Mi(e,t,!0);return i&&io(a,i),ln>0&&!r&&ne&&(a.shapeFlag&6?ne[ne.indexOf(e)]=a:ne.push(a)),a.patchFlag=-2,a}if(_d(e)&&(e=e.__vccOpts),t){t=od(t);let{class:a,style:l}=t;a&&!Nt(a)&&(t.class=sn(a)),Et(l)&&(qr(l)&&!nt(l)&&(l=zt({},l)),t.style=Vr(l))}const o=Nt(e)?1:Ol(e)?128:vh(e)?64:Et(e)?4:rt(e)?2:0;return tt(e,t,i,n,s,o,r,!0)}function od(e){return e?qr(e)||wl(e)?zt({},e):e:null}function Mi(e,t,i=!1,n=!1){const{props:s,ref:r,patchFlag:o,children:a,transition:l}=e,h=t?ld(s||{},t):s,c={__v_isVNode:!0,__v_skip:!0,type:e.type,props:h,key:h&&Ll(h),ref:t&&t.ref?i&&r?nt(r)?r.concat(Rn(t)):[r,Rn(t)]:Rn(t):r,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==he?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:l,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Mi(e.ssContent),ssFallback:e.ssFallback&&Mi(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return l&&n&&Qr(c,l.clone(c)),c}function ad(e=" ",t=0){return at(is,null,e,t)}function Qt(e="",t=!1){return t?(Pt(),li(Ke,null,e)):at(Ke,null,e)}function be(e){return e==null||typeof e=="boolean"?at(Ke):nt(e)?at(he,null,e.slice()):In(e)?He(e):at(is,null,String(e))}function He(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Mi(e)}function io(e,t){let i=0;const{shapeFlag:n}=e;if(t==null)t=null;else if(nt(t))i=16;else if(typeof t=="object")if(n&65){const s=t.default;s&&(s._c&&(s._d=!1),io(e,s()),s._c&&(s._d=!0));return}else{i=32;const s=t._;!s&&!wl(t)?t._ctx=de:s===3&&de&&(de.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else rt(t)?(t={default:t,_ctx:de},i=32):(t=String(t),n&64?(i=16,t=[ad(t)]):i=8);e.children=t,e.shapeFlag|=i}function ld(...e){const t={};for(let i=0;i<e.length;i++){const n=e[i];for(const s in n)if(s==="class")t.class!==n.class&&(t.class=sn([t.class,n.class]));else if(s==="style")t.style=Vr([t.style,n.style]);else if(zn(s)){const r=t[s],o=n[s];o&&r!==o&&!(nt(r)&&r.includes(o))&&(t[s]=r?[].concat(r,o):o)}else s!==""&&(t[s]=n[s])}return t}function ye(e,t,i,n=null){we(e,t,7,[i,n])}const cd=bl();let hd=0;function dd(e,t,i){const n=e.type,s=(t?t.appContext:e.appContext)||cd,r={uid:hd++,vnode:e,type:n,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Uc(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Tl(n,s),emitsOptions:Nl(n,s),emit:null,emitted:null,propsDefaults:Tt,inheritAttrs:n.inheritAttrs,ctx:Tt,data:Tt,props:Tt,attrs:Tt,slots:Tt,refs:Tt,setupState:Tt,setupContext:null,suspense:i,suspenseId:i?i.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=t?t.root:r,r.emit=Qh.bind(null,r),e.ce&&e.ce(r),r}let Wt=null;const no=()=>Wt||de;let Un,Er;{const e=qn(),t=(i,n)=>{let s;return(s=e[i])||(s=e[i]=[]),s.push(n),r=>{s.length>1?s.forEach(o=>o(r)):s[0](r)}};Un=t("__VUE_INSTANCE_SETTERS__",i=>Wt=i),Er=t("__VUE_SSR_SETTERS__",i=>cn=i)}const gn=e=>{const t=Wt;return Un(e),e.scope.on(),()=>{e.scope.off(),Un(t)}},Bo=()=>{Wt&&Wt.scope.off(),Un(null)};function Gl(e){return e.vnode.shapeFlag&4}let cn=!1;function fd(e,t=!1,i=!1){t&&Er(t);const{props:n,children:s}=e.vnode,r=Gl(e);Ih(e,n,r,t),Hh(e,s,i||t);const o=r?ud(e,t):void 0;return t&&Er(!1),o}function ud(e,t){const i=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,Rh);const{setup:n}=i;if(n){Fe();const s=e.setupContext=n.length>1?pd(e):null,r=gn(e),o=fn(n,e,0,[e.props,s]),a=La(o);if(ke(),r(),(a||e.sp)&&!Zi(e)&&hl(e),a){if(o.then(Bo,Bo),t)return o.then(l=>{$o(e,l)}).catch(l=>{Qn(l,e,0)});e.asyncDep=o}else $o(e,o)}else Il(e)}function $o(e,t,i){rt(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Et(t)&&(e.setupState=nl(t)),Il(e)}function Il(e,t,i){const n=e.type;e.render||(e.render=n.render||Ce);{const s=gn(e);Fe();try{Mh(e)}finally{ke(),s()}}}const gd={get(e,t){return Vt(e,"get",""),e[t]}};function pd(e){const t=i=>{e.exposed=i||{}};return{attrs:new Proxy(e.attrs,gd),slots:e.slots,emit:e.emit,expose:t}}function so(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(nl(oh(e.exposed)),{get(t,i){if(i in t)return t[i];if(i in tn)return tn[i](e)},has(t,i){return i in t||i in tn}})):e.proxy}function md(e,t=!0){return rt(e)?e.displayName||e.name:e.name||t&&e.__name}function _d(e){return rt(e)&&"__vccOpts"in e}const yd=(e,t)=>dh(e,t,cn);function Ul(e,t,i){const n=arguments.length;return n===2?Et(t)&&!nt(t)?In(t)?at(e,null,[t]):at(e,t):at(e,null,t):(n>3?i=Array.prototype.slice.call(arguments,2):n===3&&In(i)&&(i=[i]),at(e,t,i))}const vd="3.5.18";/**
* @vue/runtime-dom v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Rr;const Ho=typeof window<"u"&&window.trustedTypes;if(Ho)try{Rr=Ho.createPolicy("vue",{createHTML:e=>e})}catch{}const Bl=Rr?e=>Rr.createHTML(e):e=>e,bd="http://www.w3.org/2000/svg",Sd="http://www.w3.org/1998/Math/MathML",Ee=typeof document<"u"?document:null,Vo=Ee&&Ee.createElement("template"),Cd={insert:(e,t,i)=>{t.insertBefore(e,i||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,i,n)=>{const s=t==="svg"?Ee.createElementNS(bd,e):t==="mathml"?Ee.createElementNS(Sd,e):i?Ee.createElement(e,{is:i}):Ee.createElement(e);return e==="select"&&n&&n.multiple!=null&&s.setAttribute("multiple",n.multiple),s},createText:e=>Ee.createTextNode(e),createComment:e=>Ee.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Ee.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,i,n,s,r){const o=i?i.previousSibling:t.lastChild;if(s&&(s===r||s.nextSibling))for(;t.insertBefore(s.cloneNode(!0),i),!(s===r||!(s=s.nextSibling)););else{Vo.innerHTML=Bl(n==="svg"?`<svg>${e}</svg>`:n==="mathml"?`<math>${e}</math>`:e);const a=Vo.content;if(n==="svg"||n==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,i)}return[o?o.nextSibling:t.firstChild,i?i.previousSibling:t.lastChild]}},wd=Symbol("_vtc");function xd(e,t,i){const n=e[wd];n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?e.removeAttribute("class"):i?e.setAttribute("class",t):e.className=t}const Wo=Symbol("_vod"),Td=Symbol("_vsh"),Pd=Symbol(""),Ad=/(^|;)\s*display\s*:/;function Ed(e,t,i){const n=e.style,s=Nt(i);let r=!1;if(i&&!s){if(t)if(Nt(t))for(const o of t.split(";")){const a=o.slice(0,o.indexOf(":")).trim();i[a]==null&&Mn(n,a,"")}else for(const o in t)i[o]==null&&Mn(n,o,"");for(const o in i)o==="display"&&(r=!0),Mn(n,o,i[o])}else if(s){if(t!==i){const o=n[Pd];o&&(i+=";"+o),n.cssText=i,r=Ad.test(i)}}else t&&e.removeAttribute("style");Wo in e&&(e[Wo]=r?n.display:"",e[Td]&&(n.display="none"))}const jo=/\s*!important$/;function Mn(e,t,i){if(nt(i))i.forEach(n=>Mn(e,t,n));else if(i==null&&(i=""),t.startsWith("--"))e.setProperty(t,i);else{const n=Rd(e,t);jo.test(i)?e.setProperty(ci(n),i.replace(jo,""),"important"):e[n]=i}}const zo=["Webkit","Moz","ms"],sr={};function Rd(e,t){const i=sr[t];if(i)return i;let n=oe(t);if(n!=="filter"&&n in e)return sr[t]=n;n=Xn(n);for(let s=0;s<zo.length;s++){const r=zo[s]+n;if(r in e)return sr[t]=r}return t}const Ko="http://www.w3.org/1999/xlink";function Yo(e,t,i,n,s,r=Ic(t)){n&&t.startsWith("xlink:")?i==null?e.removeAttributeNS(Ko,t.slice(6,t.length)):e.setAttributeNS(Ko,t,i):i==null||r&&!Ua(i)?e.removeAttribute(t):e.setAttribute(t,r?"":Xe(i)?String(i):i)}function Xo(e,t,i,n,s){if(t==="innerHTML"||t==="textContent"){i!=null&&(e[t]=t==="innerHTML"?Bl(i):i);return}const r=e.tagName;if(t==="value"&&r!=="PROGRESS"&&!r.includes("-")){const a=r==="OPTION"?e.getAttribute("value")||"":e.value,l=i==null?e.type==="checkbox"?"on":"":String(i);(a!==l||!("_value"in e))&&(e.value=l),i==null&&e.removeAttribute(t),e._value=i;return}let o=!1;if(i===""||i==null){const a=typeof e[t];a==="boolean"?i=Ua(i):i==null&&a==="string"?(i="",o=!0):a==="number"&&(i=0,o=!0)}try{e[t]=i}catch{}o&&e.removeAttribute(s||t)}function Md(e,t,i,n){e.addEventListener(t,i,n)}function Fd(e,t,i,n){e.removeEventListener(t,i,n)}const qo=Symbol("_vei");function kd(e,t,i,n,s=null){const r=e[qo]||(e[qo]={}),o=r[t];if(n&&o)o.value=n;else{const[a,l]=Nd(t);if(n){const h=r[t]=Ld(n,s);Md(e,a,h,l)}else o&&(Fd(e,a,o,l),r[t]=void 0)}}const Jo=/(?:Once|Passive|Capture)$/;function Nd(e){let t;if(Jo.test(e)){t={};let n;for(;n=e.match(Jo);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):ci(e.slice(2)),t]}let rr=0;const Od=Promise.resolve(),Dd=()=>rr||(Od.then(()=>rr=0),rr=Date.now());function Ld(e,t){const i=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=i.attached)return;we(Gd(n,i.value),t,5,[n])};return i.value=e,i.attached=Dd(),i}function Gd(e,t){if(nt(t)){const i=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{i.call(e),e._stopped=!0},t.map(n=>s=>!s._stopped&&n&&n(s))}else return t}const Qo=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Id=(e,t,i,n,s,r)=>{const o=s==="svg";t==="class"?xd(e,n,o):t==="style"?Ed(e,i,n):zn(t)?Br(t)||kd(e,t,i,n,r):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Ud(e,t,n,o))?(Xo(e,t,n),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Yo(e,t,n,o,r,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Nt(n))?Xo(e,oe(t),n,r,t):(t==="true-value"?e._trueValue=n:t==="false-value"&&(e._falseValue=n),Yo(e,t,n,o))};function Ud(e,t,i,n){if(n)return!!(t==="innerHTML"||t==="textContent"||t in e&&Qo(t)&&rt(i));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const s=e.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return Qo(t)&&Nt(i)?!1:t in e}const Bd=zt({patchProp:Id},Cd);let Zo;function $d(){return Zo||(Zo=Wh(Bd))}const Hd=(...e)=>{const t=$d().createApp(...e),{mount:i}=t;return t.mount=n=>{const s=Wd(n);if(!s)return;const r=t._component;!rt(r)&&!r.render&&!r.template&&(r.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const o=i(s,!1,Vd(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},t};function Vd(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Wd(e){return Nt(e)?document.querySelector(e):e}const ns=(e,t)=>{const i=e.__vccOpts||e;for(const[n,s]of t)i[n]=s;return i},jd={key:0,class:"loading-overlay"},zd={key:0},Kd={__name:"LoadingOverlay",props:{loading:{type:Boolean,default:!0},initTime:{type:Number,default:0}},setup(e){return(t,i)=>e.loading?(Pt(),Bt("div",jd,[i[0]||(i[0]=tt("div",{class:"loading-spinner"},null,-1)),i[1]||(i[1]=tt("p",null,"Inicializando aplicacin...",-1)),e.initTime>0?(Pt(),Bt("p",zd,"Tiempo de inicializacin: "+Lt(e.initTime)+"ms",1)):Qt("",!0)])):Qt("",!0)}},Yd=ns(Kd,[["__scopeId","data-v-722eaa54"]]),Xd={class:"metrics-panel"},qd={class:"section"},Jd={class:"metric"},Qd={class:"value"},Zd={class:"metric"},tf={class:"value"},ef={class:"metric"},nf={class:"value"},sf={key:0,class:"metric"},rf={class:"value"},of={class:"section"},af={class:"metric"},lf={class:"value"},cf={key:0,class:"metric"},hf={class:"value"},df={key:1,class:"metric"},ff={class:"value"},uf={class:"section"},gf={key:0,class:"metric"},pf={class:"value"},mf={key:1,class:"metric"},_f={key:2,class:"metric"},yf={class:"value"},vf={key:3,class:"metric"},bf={class:"value"},Sf={class:"section"},Cf={key:0,class:"metric"},wf={key:1,class:"metric"},xf={class:"value"},Tf={key:2,class:"metric"},Pf={class:"value"},Af={key:3,class:"metric"},Ef={class:"value"},Rf={__name:"MetricsPanel",props:{initTime:{type:Number,default:0},paneReadyTime:{type:Number,default:0},totalAppTime:{type:Number,default:0},memoryUsage:{type:String,default:"N/A"},memoryInfo:{type:Object,default:()=>({})},cpuInfo:{type:Object,default:()=>({})},performanceMetrics:{type:Object,default:()=>({})},cpuUsage:{type:Number,default:0},frameTime:{type:Number,default:0}},setup(e){const t=n=>n>=80?"high-usage":n>=50?"medium-usage":"low-usage",i=n=>n>=55?"good-fps":n>=30?"medium-fps":"low-fps";return(n,s)=>(Pt(),Bt("div",Xd,[s[19]||(s[19]=tt("h3",null," Mtricas de Rendimiento",-1)),tt("div",qd,[s[4]||(s[4]=tt("h4",null," Tiempos",-1)),tt("div",Jd,[s[0]||(s[0]=tt("span",null,"Inicializacin:",-1)),tt("span",Qd,Lt(e.initTime.toFixed(2))+"ms",1)]),tt("div",Zd,[s[1]||(s[1]=tt("span",null,"Flow listo:",-1)),tt("span",tf,Lt(e.paneReadyTime.toFixed(2))+"ms",1)]),tt("div",ef,[s[2]||(s[2]=tt("span",null,"Tiempo total:",-1)),tt("span",nf,Lt(e.totalAppTime)+"ms",1)]),e.performanceMetrics.frameTime?(Pt(),Bt("div",sf,[s[3]||(s[3]=tt("span",null,"Frame time:",-1)),tt("span",rf,Lt(e.performanceMetrics.frameTime)+"ms",1)])):Qt("",!0)]),tt("div",of,[s[8]||(s[8]=tt("h4",null," Memoria",-1)),tt("div",af,[s[5]||(s[5]=tt("span",null,"Usada:",-1)),tt("span",lf,Lt(e.memoryUsage)+Lt(e.memoryInfo.used?"MB":""),1)]),e.memoryInfo.total?(Pt(),Bt("div",cf,[s[6]||(s[6]=tt("span",null,"Total:",-1)),tt("span",hf,Lt(e.memoryInfo.total)+"MB",1)])):Qt("",!0),e.memoryInfo.limit?(Pt(),Bt("div",df,[s[7]||(s[7]=tt("span",null,"Lmite:",-1)),tt("span",ff,Lt(e.memoryInfo.limit)+"MB",1)])):Qt("",!0)]),tt("div",uf,[s[13]||(s[13]=tt("h4",null," CPU",-1)),e.cpuInfo.cores?(Pt(),Bt("div",gf,[s[9]||(s[9]=tt("span",null,"Ncleos:",-1)),tt("span",pf,Lt(e.cpuInfo.cores),1)])):Qt("",!0),e.cpuInfo.usage!==void 0?(Pt(),Bt("div",mf,[s[10]||(s[10]=tt("span",null,"Uso actual:",-1)),tt("span",{class:sn(["value",t(e.cpuInfo.usage)])},Lt(e.cpuInfo.usage)+"%",3)])):Qt("",!0),e.cpuInfo.processingTime?(Pt(),Bt("div",_f,[s[11]||(s[11]=tt("span",null,"Tiempo proc:",-1)),tt("span",yf,Lt(e.cpuInfo.processingTime)+"ms",1)])):Qt("",!0),e.cpuInfo.platform?(Pt(),Bt("div",vf,[s[12]||(s[12]=tt("span",null,"Plataforma:",-1)),tt("span",bf,Lt(e.cpuInfo.platform),1)])):Qt("",!0)]),tt("div",Sf,[s[18]||(s[18]=tt("h4",null," Rendimiento",-1)),e.performanceMetrics.fps?(Pt(),Bt("div",Cf,[s[14]||(s[14]=tt("span",null,"FPS:",-1)),tt("span",{class:sn(["value",i(e.performanceMetrics.fps)])},Lt(e.performanceMetrics.fps),3)])):Qt("",!0),e.performanceMetrics.viewportWidth?(Pt(),Bt("div",wf,[s[15]||(s[15]=tt("span",null,"Viewport:",-1)),tt("span",xf,Lt(e.performanceMetrics.viewportWidth)+"x"+Lt(e.performanceMetrics.viewportHeight),1)])):Qt("",!0),e.performanceMetrics.screenWidth?(Pt(),Bt("div",Tf,[s[16]||(s[16]=tt("span",null,"Pantalla:",-1)),tt("span",Pf,Lt(e.performanceMetrics.screenWidth)+"x"+Lt(e.performanceMetrics.screenHeight),1)])):Qt("",!0),e.performanceMetrics.domContentLoaded?(Pt(),Bt("div",Af,[s[17]||(s[17]=tt("span",null,"DOM Ready:",-1)),tt("span",Ef,Lt(e.performanceMetrics.domContentLoaded.toFixed(2))+"ms",1)])):Qt("",!0)])]))}},Mf=ns(Rf,[["__scopeId","data-v-f0f5bc29"]]);function Ff(){const e=_t(performance.now()),t=_t(0),i=_t(!0),n=_t(0),s=_t(0),r=_t("N/A"),o=_t({}),a=_t({}),l=_t({}),h=_t(0),c=_t(0),u=_t(performance.now()),p=()=>{const y=performance.now();let E=0;for(let L=0;L<1e6;L++)E+=Math.sqrt(L)*Math.sin(L);const R=performance.now()-y,k=Math.min(100,R/50*100);return{usage:Math.round(k),processingTime:R.toFixed(2),benchmark:E}};let g=0,f=performance.now();const _=()=>{const y=performance.now(),E=y-u.value;if(c.value=E,u.value=y,g++,y-f>=1e3){const x=Math.round(g*1e3/(y-f));l.value.fps=x,l.value.frameTime=(1e3/x).toFixed(2),g=0,f=y}requestAnimationFrame(_)},v=()=>{const y={};navigator.hardwareConcurrency&&(y.cores=navigator.hardwareConcurrency),navigator.userAgent&&(y.userAgent=navigator.userAgent),navigator.platform&&(y.platform=navigator.platform);const E=p();return y.usage=E.usage,y.processingTime=E.processingTime,y},C=()=>{const y={};if(window.screen&&(y.screenWidth=window.screen.width,y.screenHeight=window.screen.height,y.colorDepth=window.screen.colorDepth,y.pixelDepth=window.screen.pixelDepth),window.innerWidth&&window.innerHeight&&(y.viewportWidth=window.innerWidth,y.viewportHeight=window.innerHeight),performance.getEntriesByType){const E=performance.getEntriesByType("navigation");if(E.length>0){const x=E[0];y.domContentLoaded=x.domContentLoadedEventEnd-x.domContentLoadedEventStart,y.loadComplete=x.loadEventEnd-x.loadEventStart}}return y},T=()=>{const y={};return performance.memory?(y.used=(performance.memory.usedJSHeapSize/1024/1024).toFixed(2),y.total=(performance.memory.totalJSHeapSize/1024/1024).toFixed(2),y.limit=(performance.memory.jsHeapSizeLimit/1024/1024).toFixed(2),y.source="Chrome/Edge"):navigator.memory?(y.used=(navigator.memory.used/1024/1024).toFixed(2),y.total=(navigator.memory.total/1024/1024).toFixed(2),y.source="Firefox"):navigator.deviceMemory&&(y.available=`${navigator.deviceMemory}GB`,y.source="Device Memory"),y},d=()=>{const y=T();return y.used?y.used:y.available?y.available:"N/A"},m=()=>{o.value=T(),r.value=d()},S=()=>{a.value=v(),l.value=C()},P=()=>{n.value=performance.now()-e.value,console.log(`  Panel listo en: ${n.value.toFixed(2)}ms`)},F=()=>{i.value=!1,t.value=performance.now()-e.value,s.value=t.value,console.log(` Tiempo total de inicializacin: ${t.value.toFixed(2)}ms`),console.log(` Tiempo total de la aplicacin: ${s.value.toFixed(2)}ms`),m(),S(),console.log(` Memoria usada: ${r.value}`,o.value),console.log(" CPU Info:",a.value)};return ul(()=>{console.log(" Iniciando medicin de tiempo de inicializacin..."),e.value=performance.now()}),un(()=>{const y=performance.now()-e.value;console.log(` Tiempo de montaje del componente: ${y.toFixed(2)}ms`),m(),S(),requestAnimationFrame(_),setTimeout(()=>{F()},100),setInterval(()=>{const E=T(),x=d();x!=="N/A"&&(o.value=E,r.value=x);const R=v();a.value={...a.value,...R},performance.now()%5e3<1e3&&S()},1e3)}),{startTime:e,initTime:t,loading:i,paneReadyTime:n,totalAppTime:s,memoryUsage:r,memoryInfo:o,cpuInfo:a,performanceMetrics:l,cpuUsage:h,frameTime:c,getMemoryInfo:T,getMemoryUsage:d,getCPUInfo:v,getPerformanceMetrics:C,updateMemoryMetrics:m,updateHardwareMetrics:S,measureCPUUsage:p,measureFramePerformance:_,onPaneReady:P,finishLoading:F}}const kf={__name:"StartNode",props:{params:{type:Object,required:!0,default:()=>({x:50,y:50,title:"Inicio",id:"start-node"})}},emits:["update:position","node-click"],setup(e,{expose:t,emit:i}){const n=e,s=i,r=_t(!1),o=_t(null),a=u=>{const p=u.target,g={x:p.x(),y:p.y()};s("update:position",g)},l=()=>{s("node-click",{id:n.params.id,type:"start",title:n.params.title})},h=u=>{r.value=u};return t({getNode:()=>{var u;return(u=o.value)==null?void 0:u.getNode()},getDimensions:()=>{var f;const u=(f=o.value)==null?void 0:f.getNode();if(!u)return{width:0,height:0};const p=u.width(),g=u.height();return{width:p,height:g}}}),(u,p)=>{const g=$t("v-rect"),f=$t("v-text"),_=$t("v-circle"),v=$t("v-group");return Pt(),li(v,{config:{x:e.params.x,y:e.params.y,draggable:!0},onDragmove:a,onClick:l,onMouseenter:p[0]||(p[0]=C=>h(!0)),onMouseleave:p[1]||(p[1]=C=>h(!1))},{default:je(()=>[at(g,{config:{width:180,height:50,cornerRadius:8,stroke:"#42b883",fill:"#ffffff",strokeWidth:2},ref_key:"nodeRef",ref:o},null,512),at(f,{config:{text:e.params.title,fontSize:14,x:0,y:0,fill:"#42b883",fontStyle:"bold",width:180,height:50,verticalAlign:"middle",align:"center"}},null,8,["config"]),at(_,{config:{x:180,y:25,radius:6,fill:"#ffffff",stroke:"#9999",strokeWidth:2}})]),_:1},8,["config"])}}},or={__name:"InputField",props:{label:{type:String,required:!0},value:{type:String,default:""},placeholder:{type:String,default:""},x:{type:Number,default:20},y:{type:Number,default:90},width:{type:Number,default:210},height:{type:Number,default:25}},setup(e){return(t,i)=>{const n=$t("v-text"),s=$t("v-rect"),r=$t("v-group");return Pt(),li(r,null,{default:je(()=>[at(n,{config:{text:e.label,fontSize:12,x:e.x,y:e.y,fill:"#666666",fontStyle:"bold"}},null,8,["config"]),at(s,{config:{x:e.x,y:e.y+20,width:e.width,height:e.height,fill:"#f8f9fa",stroke:"#dee2e6",strokeWidth:1,cornerRadius:4}},null,8,["config"]),at(n,{config:{text:e.value||e.placeholder,fontSize:11,x:e.x+5,y:e.y+20+e.height/2-4,fill:e.value?"#333333":"#999999",width:e.width-10}},null,8,["config"])]),_:1})}}},Nf={__name:"FormNode",props:{params:{type:Object,required:!0,default:()=>({x:50,y:50,title:"Formulario",subtitle:"Proceso",id:"form-node"})}},emits:["update:position","node-click","form-submit"],setup(e,{expose:t,emit:i}){const n=e,s=i,r=_t(!1),o=_t(null),a=Oi({name:"",email:"",comments:""}),l=f=>{const _=f.target,v={x:_.x(),y:_.y()};s("update:position",v)},h=()=>{s("node-click",{id:n.params.id,type:"form",title:n.params.title,subtitle:n.params.subtitle})},c=f=>{r.value=f},u=(f,_)=>{a[f]=_},p=()=>{s("form-submit",{...a,nodeId:n.params.id})},g=()=>{var C;const f=(C=o.value)==null?void 0:C.getNode();if(!f)return{width:0,height:0};const _=f.width(),v=f.height();return{width:_,height:v}};return t({getNode:()=>{var f;return(f=o.value)==null?void 0:f.getNode()},getDimensions:g,updateFormData:u,submitForm:p,formData:a}),(f,_)=>{const v=$t("v-rect"),C=$t("v-text"),T=$t("v-circle"),d=$t("v-group");return Pt(),li(d,{config:{x:e.params.x,y:e.params.y,draggable:!0},onDragmove:l,onClick:h,onMouseenter:_[0]||(_[0]=m=>c(!0)),onMouseleave:_[1]||(_[1]=m=>c(!1))},{default:je(()=>[at(v,{config:{width:250,height:380,fill:"#ffffff",cornerRadius:8,stroke:"#42b883"},ref_key:"nodeRef",ref:o},null,512),at(C,{config:{text:"",fontSize:18,x:10,y:30,fill:"#f7b731",width:30,align:"center"}}),at(C,{config:{text:e.params.title,fontSize:16,x:50,y:30,fill:"#999",fontStyle:"bold"}},null,8,["config"]),at(C,{config:{text:e.params.subtitle,fontSize:14,x:50,y:55,fill:"#999999"}},null,8,["config"]),at(or,{label:"Nombre:",value:a.name,placeholder:"Ingrese su nombre",x:20,y:90,width:210,height:25},null,8,["value"]),at(or,{label:"Email:",value:a.email,placeholder:"ejemplo@email.com",x:20,y:150,width:210,height:25},null,8,["value"]),at(or,{label:"Comentarios:",value:a.comments,placeholder:"Escriba sus comentarios aqu...",x:20,y:210,width:210,height:60},null,8,["value"]),at(v,{config:{x:20,y:310,width:210,height:30,fill:"#42b883",stroke:"#42b883",strokeWidth:1,cornerRadius:6,className:"submit-button"}}),at(C,{config:{text:"Enviar",fontSize:12,x:125,y:320,fill:"#ffffff",fontStyle:"bold",align:"center",width:100}}),at(T,{config:{x:0,y:g().height/2,radius:6,fill:"#ff0",stroke:"#9999",strokeWidth:2}},null,8,["config"]),at(T,{config:{x:g().width,y:g().height/2,radius:6,fill:"#ffffff",stroke:"#9999",strokeWidth:2}},null,8,["config"])]),_:1},8,["config"])}}},ta=ns(Nf,[["__scopeId","data-v-ae89bb18"]]),Of={__name:"EndNode",props:{params:{type:Object,required:!0,default:()=>({x:50,y:50,title:"Fin",id:"end-node"})}},emits:["update:position","node-click"],setup(e,{expose:t,emit:i}){const n=e,s=i,r=_t(!1),o=_t(null),a=u=>{const p=u.target,g={x:p.x(),y:p.y()};s("update:position",g)},l=()=>{s("node-click",{id:n.params.id,type:"start",title:n.params.title})},h=u=>{r.value=u};return t({getNode:()=>{var u;return(u=o.value)==null?void 0:u.getNode()},getDimensions:()=>{var f;const u=(f=o.value)==null?void 0:f.getNode();if(!u)return{width:0,height:0};const p=u.width(),g=u.height();return{width:p,height:g}}}),(u,p)=>{const g=$t("v-rect"),f=$t("v-text"),_=$t("v-circle"),v=$t("v-group");return Pt(),li(v,{config:{x:e.params.x,y:e.params.y,draggable:!0},onDragmove:a,onClick:l,onMouseenter:p[0]||(p[0]=C=>h(!0)),onMouseleave:p[1]||(p[1]=C=>h(!1))},{default:je(()=>[at(g,{config:{width:180,height:50,cornerRadius:8,stroke:"#F44336",fill:"#ffffff",strokeWidth:2},ref_key:"nodeRef",ref:o},null,512),at(f,{config:{text:e.params.title,fontSize:14,x:0,y:0,fill:"#F44336",fontStyle:"bold",width:180,height:50,verticalAlign:"middle",align:"center"}},null,8,["config"]),at(_,{config:{x:0,y:25,radius:6,fill:"#ff0",stroke:"#9999",strokeWidth:2}})]),_:1},8,["config"])}}},vi={START:"start",FORM:"form",END:"end"},Df={class:"flow-editor"},Lf={__name:"VueKonva",props:{onPaneReady:{type:Function,required:!0}},setup(e){const t=_t(null),i=_t(null),n=_t(null),s=_t({}),r=_t(window.innerWidth),o=_t(window.innerHeight),a=_t(!0),l=_t(!0),h=_t([]),c=_t([]),u=_t({}),p={[vi.START]:kf,[vi.FORM]:ta,[vi.END]:Of},g=e,f=y=>p[y]||ta,_=()=>{const y={rows:10,cols:10},E=[],x=[],R=500;E.push({id:"start-1",type:vi.START,title:"Inicio del Proceso",x:100,y:R});for(let k=1;k<=y.rows;k++)for(let L=1;L<=y.cols;L++)E.push({id:`form-${k}-${L}`,type:vi.FORM,title:`Form ${k}-${L}`,subtitle:"Proceso",x:100+L*R,y:100+k*R}),x.push({from:"start-1",to:`form-${k}-${L}`}),x.push({from:`form-${k}-${L}`,to:"end-1"});E.push({id:"end-1",type:vi.END,title:"Proceso Completado",x:200+(y.cols+1)*R,y:100+(y.rows+1)*R}),h.value=E,c.value=x,u.value={},h.value.forEach(k=>{u.value[k.id]=k}),g.onPaneReady()};function v(y,E){const x=y.scaleX(),R=x*E,k=y.getPointerPosition(),L={x:k.x/x-y.x()/x,y:k.y/x-y.y()/x};y.scale({x:R,y:R}),y.position({x:-(L.x-k.x/R)*R,y:-(L.y-k.y/R)*R}),y.batchDraw()}const C=y=>{y.evt.preventDefault();const E=y.evt.deltaY>0?.9:1.1;v(t.value.getNode(),E)},T=(y,E)=>{const x=u.value[y];x&&(x.x=E.x,x.y=E.y),i.value&&i.value.getNode().batchDraw()},d=y=>{console.log("Nodo clickeado:",y)},m=(y,E)=>{E&&(s.value[y]=E)},S=y=>{const E=s.value[y];if(!E)return{width:0,height:0};const x=E.getDimensions();return{width:x.width,height:x.height}},P=(y,E,x)=>{const R=u.value[x.from],k=u.value[x.to],L=S(x.from),j=S(x.to);if(!R||!k)return;let V,Z,K,B;V=R.x+L.width,Z=R.y+L.height/2,K=k.x,B=k.y+j.height/2,y.beginPath(),y.moveTo(V,Z),y.bezierCurveTo(V+50,Z,K-50,B,K,B),y.strokeShape(E)},F=()=>{r.value=window.innerWidth,o.value=window.innerHeight};return un(()=>{_(),window.addEventListener("resize",F)}),ts(()=>{window.removeEventListener("resize",F)}),(y,E)=>{const x=$t("v-shape"),R=$t("v-layer"),k=$t("v-stage");return Pt(),Bt("div",Df,[at(k,{config:{width:r.value,height:o.value,draggable:a.value},ref_key:"stageRef",ref:t,onWheel:C},{default:je(()=>[at(R,{ref_key:"connectionLayerRef",ref:i},{default:je(()=>[l.value?(Pt(!0),Bt(he,{key:0},Mo(c.value,L=>(Pt(),li(x,{key:`${L.from}-${L.to}`,config:{sceneFunc:(j,V)=>P(j,V,L),stroke:"#9999",strokeWidth:2}},null,8,["config"]))),128)):Qt("",!0)]),_:1},512),at(R,{ref_key:"nodeLayerRef",ref:n},{default:je(()=>[(Pt(!0),Bt(he,null,Mo(h.value,L=>(Pt(),li(Eh(f(L.type)),{key:L.id,params:L,"onUpdate:position":j=>T(L.id,j),onNodeClick:d,ref_for:!0,ref:j=>m(L.id,j)},null,40,["params","onUpdate:position"]))),128))]),_:1},512)]),_:1},8,["config"])])}}},Gf=ns(Lf,[["__scopeId","data-v-a25157a0"]]),If={style:{width:"100vw",height:"100vh"}},Uf={__name:"App",setup(e){const{initTime:t,loading:i,paneReadyTime:n,totalAppTime:s,memoryUsage:r,memoryInfo:o,cpuInfo:a,performanceMetrics:l,cpuUsage:h,frameTime:c,onPaneReady:u}=Ff();return(p,g)=>(Pt(),Bt("div",If,[at(Yd,{loading:ee(i),initTime:ee(t)},null,8,["loading","initTime"]),at(Mf,{initTime:ee(t),paneReadyTime:ee(n),totalAppTime:ee(s),memoryUsage:ee(r),memoryInfo:ee(o),cpuInfo:ee(a),performanceMetrics:ee(l),cpuUsage:ee(h),frameTime:ee(c)},null,8,["initTime","paneReadyTime","totalAppTime","memoryUsage","memoryInfo","cpuInfo","performanceMetrics","cpuUsage","frameTime"]),at(Gf,{onPaneReady:ee(u)},null,8,["onPaneReady"])]))}};var ea=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Bf(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ro={exports:{}},ss={},$l={},lt={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e._registerNode=e.Konva=e.glob=void 0;const t=Math.PI/180;function i(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}e.glob=typeof ea<"u"?ea:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},e.Konva={_global:e.glob,version:"9.3.22",isBrowser:i(),isUnminified:/param/.test((function(s){}).toString()),dblClickWindow:400,getAngle(s){return e.Konva.angleDeg?s*t:s},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_fixTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return e.Konva.DD.isDragging},isTransforming(){var s;return(s=e.Konva.Transformer)===null||s===void 0?void 0:s.isTransforming()},isDragReady(){return!!e.Konva.DD.node},releaseCanvasOnDestroy:!0,document:e.glob.document,_injectGlobal(s){e.glob.Konva=s}};const n=s=>{e.Konva[s.prototype.getClassName()]=s};e._registerNode=n,e.Konva._injectGlobal(e.Konva)})(lt);var Mt={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Util=e.Transform=void 0;const t=lt;class i{constructor(m=[1,0,0,1,0,0]){this.dirty=!1,this.m=m&&m.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new i(this.m)}copyInto(m){m.m[0]=this.m[0],m.m[1]=this.m[1],m.m[2]=this.m[2],m.m[3]=this.m[3],m.m[4]=this.m[4],m.m[5]=this.m[5]}point(m){const S=this.m;return{x:S[0]*m.x+S[2]*m.y+S[4],y:S[1]*m.x+S[3]*m.y+S[5]}}translate(m,S){return this.m[4]+=this.m[0]*m+this.m[2]*S,this.m[5]+=this.m[1]*m+this.m[3]*S,this}scale(m,S){return this.m[0]*=m,this.m[1]*=m,this.m[2]*=S,this.m[3]*=S,this}rotate(m){const S=Math.cos(m),P=Math.sin(m),F=this.m[0]*S+this.m[2]*P,y=this.m[1]*S+this.m[3]*P,E=this.m[0]*-P+this.m[2]*S,x=this.m[1]*-P+this.m[3]*S;return this.m[0]=F,this.m[1]=y,this.m[2]=E,this.m[3]=x,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(m,S){const P=this.m[0]+this.m[2]*S,F=this.m[1]+this.m[3]*S,y=this.m[2]+this.m[0]*m,E=this.m[3]+this.m[1]*m;return this.m[0]=P,this.m[1]=F,this.m[2]=y,this.m[3]=E,this}multiply(m){const S=this.m[0]*m.m[0]+this.m[2]*m.m[1],P=this.m[1]*m.m[0]+this.m[3]*m.m[1],F=this.m[0]*m.m[2]+this.m[2]*m.m[3],y=this.m[1]*m.m[2]+this.m[3]*m.m[3],E=this.m[0]*m.m[4]+this.m[2]*m.m[5]+this.m[4],x=this.m[1]*m.m[4]+this.m[3]*m.m[5]+this.m[5];return this.m[0]=S,this.m[1]=P,this.m[2]=F,this.m[3]=y,this.m[4]=E,this.m[5]=x,this}invert(){const m=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),S=this.m[3]*m,P=-this.m[1]*m,F=-this.m[2]*m,y=this.m[0]*m,E=m*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),x=m*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=S,this.m[1]=P,this.m[2]=F,this.m[3]=y,this.m[4]=E,this.m[5]=x,this}getMatrix(){return this.m}decompose(){const m=this.m[0],S=this.m[1],P=this.m[2],F=this.m[3],y=this.m[4],E=this.m[5],x=m*F-S*P,R={x:y,y:E,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(m!=0||S!=0){const k=Math.sqrt(m*m+S*S);R.rotation=S>0?Math.acos(m/k):-Math.acos(m/k),R.scaleX=k,R.scaleY=x/k,R.skewX=(m*P+S*F)/x,R.skewY=0}else if(P!=0||F!=0){const k=Math.sqrt(P*P+F*F);R.rotation=Math.PI/2-(F>0?Math.acos(-P/k):-Math.acos(P/k)),R.scaleX=x/k,R.scaleY=k,R.skewX=0,R.skewY=(m*P+S*F)/x}return R.rotation=e.Util._getRotation(R.rotation),R}}e.Transform=i;const n="[object Array]",s="[object Number]",r="[object String]",o="[object Boolean]",a=Math.PI/180,l=180/Math.PI,h="#",c="",u="0",p="Konva warning: ",g="Konva error: ",f="rgb(",_={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},v=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;let C=[];const T=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(d){setTimeout(d,60)};e.Util={_isElement(d){return!!(d&&d.nodeType==1)},_isFunction(d){return!!(d&&d.constructor&&d.call&&d.apply)},_isPlainObject(d){return!!d&&d.constructor===Object},_isArray(d){return Object.prototype.toString.call(d)===n},_isNumber(d){return Object.prototype.toString.call(d)===s&&!isNaN(d)&&isFinite(d)},_isString(d){return Object.prototype.toString.call(d)===r},_isBoolean(d){return Object.prototype.toString.call(d)===o},isObject(d){return d instanceof Object},isValidSelector(d){if(typeof d!="string")return!1;const m=d[0];return m==="#"||m==="."||m===m.toUpperCase()},_sign(d){return d===0||d>0?1:-1},requestAnimFrame(d){C.push(d),C.length===1&&T(function(){const m=C;C=[],m.forEach(function(S){S()})})},createCanvasElement(){const d=document.createElement("canvas");try{d.style=d.style||{}}catch{}return d},createImageElement(){return document.createElement("img")},_isInDocument(d){for(;d=d.parentNode;)if(d==document)return!0;return!1},_urlToImage(d,m){const S=e.Util.createImageElement();S.onload=function(){m(S)},S.src=d},_rgbToHex(d,m,S){return((1<<24)+(d<<16)+(m<<8)+S).toString(16).slice(1)},_hexToRgb(d){d=d.replace(h,c);const m=parseInt(d,16);return{r:m>>16&255,g:m>>8&255,b:m&255}},getRandomColor(){let d=(Math.random()*16777215<<0).toString(16);for(;d.length<6;)d=u+d;return h+d},getRGB(d){let m;return d in _?(m=_[d],{r:m[0],g:m[1],b:m[2]}):d[0]===h?this._hexToRgb(d.substring(1)):d.substr(0,4)===f?(m=v.exec(d.replace(/ /g,"")),{r:parseInt(m[1],10),g:parseInt(m[2],10),b:parseInt(m[3],10)}):{r:0,g:0,b:0}},colorToRGBA(d){return d=d||"black",e.Util._namedColorToRBA(d)||e.Util._hex3ColorToRGBA(d)||e.Util._hex4ColorToRGBA(d)||e.Util._hex6ColorToRGBA(d)||e.Util._hex8ColorToRGBA(d)||e.Util._rgbColorToRGBA(d)||e.Util._rgbaColorToRGBA(d)||e.Util._hslColorToRGBA(d)},_namedColorToRBA(d){const m=_[d.toLowerCase()];return m?{r:m[0],g:m[1],b:m[2],a:1}:null},_rgbColorToRGBA(d){if(d.indexOf("rgb(")===0){d=d.match(/rgb\(([^)]+)\)/)[1];const m=d.split(/ *, */).map(Number);return{r:m[0],g:m[1],b:m[2],a:1}}},_rgbaColorToRGBA(d){if(d.indexOf("rgba(")===0){d=d.match(/rgba\(([^)]+)\)/)[1];const m=d.split(/ *, */).map((S,P)=>S.slice(-1)==="%"?P===3?parseInt(S)/100:parseInt(S)/100*255:Number(S));return{r:m[0],g:m[1],b:m[2],a:m[3]}}},_hex8ColorToRGBA(d){if(d[0]==="#"&&d.length===9)return{r:parseInt(d.slice(1,3),16),g:parseInt(d.slice(3,5),16),b:parseInt(d.slice(5,7),16),a:parseInt(d.slice(7,9),16)/255}},_hex6ColorToRGBA(d){if(d[0]==="#"&&d.length===7)return{r:parseInt(d.slice(1,3),16),g:parseInt(d.slice(3,5),16),b:parseInt(d.slice(5,7),16),a:1}},_hex4ColorToRGBA(d){if(d[0]==="#"&&d.length===5)return{r:parseInt(d[1]+d[1],16),g:parseInt(d[2]+d[2],16),b:parseInt(d[3]+d[3],16),a:parseInt(d[4]+d[4],16)/255}},_hex3ColorToRGBA(d){if(d[0]==="#"&&d.length===4)return{r:parseInt(d[1]+d[1],16),g:parseInt(d[2]+d[2],16),b:parseInt(d[3]+d[3],16),a:1}},_hslColorToRGBA(d){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(d)){const[m,...S]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(d),P=Number(S[0])/360,F=Number(S[1])/100,y=Number(S[2])/100;let E,x,R;if(F===0)return R=y*255,{r:Math.round(R),g:Math.round(R),b:Math.round(R),a:1};y<.5?E=y*(1+F):E=y+F-y*F;const k=2*y-E,L=[0,0,0];for(let j=0;j<3;j++)x=P+1/3*-(j-1),x<0&&x++,x>1&&x--,6*x<1?R=k+(E-k)*6*x:2*x<1?R=E:3*x<2?R=k+(E-k)*(2/3-x)*6:R=k,L[j]=R*255;return{r:Math.round(L[0]),g:Math.round(L[1]),b:Math.round(L[2]),a:1}}},haveIntersection(d,m){return!(m.x>d.x+d.width||m.x+m.width<d.x||m.y>d.y+d.height||m.y+m.height<d.y)},cloneObject(d){const m={};for(const S in d)this._isPlainObject(d[S])?m[S]=this.cloneObject(d[S]):this._isArray(d[S])?m[S]=this.cloneArray(d[S]):m[S]=d[S];return m},cloneArray(d){return d.slice(0)},degToRad(d){return d*a},radToDeg(d){return d*l},_degToRad(d){return e.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),e.Util.degToRad(d)},_radToDeg(d){return e.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),e.Util.radToDeg(d)},_getRotation(d){return t.Konva.angleDeg?e.Util.radToDeg(d):d},_capitalize(d){return d.charAt(0).toUpperCase()+d.slice(1)},throw(d){throw new Error(g+d)},error(d){console.error(g+d)},warn(d){t.Konva.showWarnings&&console.warn(p+d)},each(d,m){for(const S in d)m(S,d[S])},_inRange(d,m,S){return m<=d&&d<S},_getProjectionToSegment(d,m,S,P,F,y){let E,x,R;const k=(d-S)*(d-S)+(m-P)*(m-P);if(k==0)E=d,x=m,R=(F-S)*(F-S)+(y-P)*(y-P);else{const L=((F-d)*(S-d)+(y-m)*(P-m))/k;L<0?(E=d,x=m,R=(d-F)*(d-F)+(m-y)*(m-y)):L>1?(E=S,x=P,R=(S-F)*(S-F)+(P-y)*(P-y)):(E=d+L*(S-d),x=m+L*(P-m),R=(E-F)*(E-F)+(x-y)*(x-y))}return[E,x,R]},_getProjectionToLine(d,m,S){const P=e.Util.cloneObject(d);let F=Number.MAX_VALUE;return m.forEach(function(y,E){if(!S&&E===m.length-1)return;const x=m[(E+1)%m.length],R=e.Util._getProjectionToSegment(y.x,y.y,x.x,x.y,d.x,d.y),k=R[0],L=R[1],j=R[2];j<F&&(P.x=k,P.y=L,F=j)}),P},_prepareArrayForTween(d,m,S){const P=[],F=[];if(d.length>m.length){const E=m;m=d,d=E}for(let E=0;E<d.length;E+=2)P.push({x:d[E],y:d[E+1]});for(let E=0;E<m.length;E+=2)F.push({x:m[E],y:m[E+1]});const y=[];return F.forEach(function(E){const x=e.Util._getProjectionToLine(E,P,S);y.push(x.x),y.push(x.y)}),y},_prepareToStringify(d){let m;d.visitedByCircularReferenceRemoval=!0;for(const S in d)if(d.hasOwnProperty(S)&&d[S]&&typeof d[S]=="object"){if(m=Object.getOwnPropertyDescriptor(d,S),d[S].visitedByCircularReferenceRemoval||e.Util._isElement(d[S]))if(m.configurable)delete d[S];else return null;else if(e.Util._prepareToStringify(d[S])===null)if(m.configurable)delete d[S];else return null}return delete d.visitedByCircularReferenceRemoval,d},_assign(d,m){for(const S in m)d[S]=m[S];return d},_getFirstPointerId(d){return d.touches?d.changedTouches[0].identifier:d.pointerId||999},releaseCanvas(...d){t.Konva.releaseCanvasOnDestroy&&d.forEach(m=>{m.width=0,m.height=0})},drawRoundedRectPath(d,m,S,P){let F=0,y=0,E=0,x=0;typeof P=="number"?F=y=E=x=Math.min(P,m/2,S/2):(F=Math.min(P[0]||0,m/2,S/2),y=Math.min(P[1]||0,m/2,S/2),x=Math.min(P[2]||0,m/2,S/2),E=Math.min(P[3]||0,m/2,S/2)),d.moveTo(F,0),d.lineTo(m-y,0),d.arc(m-y,y,y,Math.PI*3/2,0,!1),d.lineTo(m,S-x),d.arc(m-x,S-x,x,0,Math.PI/2,!1),d.lineTo(E,S),d.arc(E,S-E,E,Math.PI/2,Math.PI,!1),d.lineTo(0,F),d.arc(F,F,F,Math.PI,Math.PI*3/2,!1)}}})(Mt);var Rt={},ue={},Me={};Object.defineProperty(Me,"__esModule",{value:!0});Me.HitContext=Me.SceneContext=Me.Context=void 0;const Hl=Mt,$f=lt;function Hf(e){const t=[],i=e.length,n=Hl.Util;for(let s=0;s<i;s++){let r=e[s];n._isNumber(r)?r=Math.round(r*1e3)/1e3:n._isString(r)||(r=r+""),t.push(r)}return t}const ia=",",Vf="(",Wf=")",jf="([",zf="])",Kf=";",Yf="()",Xf="=",na=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],qf=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"],Jf=100;class rs{constructor(t){this.canvas=t,$f.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(t){t.fillEnabled()&&this._fill(t)}_fill(t){}strokeShape(t){t.hasStroke()&&this._stroke(t)}_stroke(t){}fillStrokeShape(t){t.attrs.fillAfterStrokeEnabled?(this.strokeShape(t),this.fillShape(t)):(this.fillShape(t),this.strokeShape(t))}getTrace(t,i){let n=this.traceArr,s=n.length,r="",o,a,l,h;for(o=0;o<s;o++)a=n[o],l=a.method,l?(h=a.args,r+=l,t?r+=Yf:Hl.Util._isArray(h[0])?r+=jf+h.join(ia)+zf:(i&&(h=h.map(c=>typeof c=="number"?Math.floor(c):c)),r+=Vf+h.join(ia)+Wf)):(r+=a.property,t||(r+=Xf+a.val)),r+=Kf;return r}clearTrace(){this.traceArr=[]}_trace(t){let i=this.traceArr,n;i.push(t),n=i.length,n>=Jf&&i.shift()}reset(){const t=this.getCanvas().getPixelRatio();this.setTransform(1*t,0,0,1*t,0,0)}getCanvas(){return this.canvas}clear(t){const i=this.getCanvas();t?this.clearRect(t.x||0,t.y||0,t.width||0,t.height||0):this.clearRect(0,0,i.getWidth()/i.pixelRatio,i.getHeight()/i.pixelRatio)}_applyLineCap(t){const i=t.attrs.lineCap;i&&this.setAttr("lineCap",i)}_applyOpacity(t){const i=t.getAbsoluteOpacity();i!==1&&this.setAttr("globalAlpha",i)}_applyLineJoin(t){const i=t.attrs.lineJoin;i&&this.setAttr("lineJoin",i)}setAttr(t,i){this._context[t]=i}arc(t,i,n,s,r,o){this._context.arc(t,i,n,s,r,o)}arcTo(t,i,n,s,r){this._context.arcTo(t,i,n,s,r)}beginPath(){this._context.beginPath()}bezierCurveTo(t,i,n,s,r,o){this._context.bezierCurveTo(t,i,n,s,r,o)}clearRect(t,i,n,s){this._context.clearRect(t,i,n,s)}clip(...t){this._context.clip.apply(this._context,t)}closePath(){this._context.closePath()}createImageData(t,i){const n=arguments;if(n.length===2)return this._context.createImageData(t,i);if(n.length===1)return this._context.createImageData(t)}createLinearGradient(t,i,n,s){return this._context.createLinearGradient(t,i,n,s)}createPattern(t,i){return this._context.createPattern(t,i)}createRadialGradient(t,i,n,s,r,o){return this._context.createRadialGradient(t,i,n,s,r,o)}drawImage(t,i,n,s,r,o,a,l,h){const c=arguments,u=this._context;c.length===3?u.drawImage(t,i,n):c.length===5?u.drawImage(t,i,n,s,r):c.length===9&&u.drawImage(t,i,n,s,r,o,a,l,h)}ellipse(t,i,n,s,r,o,a,l){this._context.ellipse(t,i,n,s,r,o,a,l)}isPointInPath(t,i,n,s){return n?this._context.isPointInPath(n,t,i,s):this._context.isPointInPath(t,i,s)}fill(...t){this._context.fill.apply(this._context,t)}fillRect(t,i,n,s){this._context.fillRect(t,i,n,s)}strokeRect(t,i,n,s){this._context.strokeRect(t,i,n,s)}fillText(t,i,n,s){s?this._context.fillText(t,i,n,s):this._context.fillText(t,i,n)}measureText(t){return this._context.measureText(t)}getImageData(t,i,n,s){return this._context.getImageData(t,i,n,s)}lineTo(t,i){this._context.lineTo(t,i)}moveTo(t,i){this._context.moveTo(t,i)}rect(t,i,n,s){this._context.rect(t,i,n,s)}roundRect(t,i,n,s,r){this._context.roundRect(t,i,n,s,r)}putImageData(t,i,n){this._context.putImageData(t,i,n)}quadraticCurveTo(t,i,n,s){this._context.quadraticCurveTo(t,i,n,s)}restore(){this._context.restore()}rotate(t){this._context.rotate(t)}save(){this._context.save()}scale(t,i){this._context.scale(t,i)}setLineDash(t){this._context.setLineDash?this._context.setLineDash(t):"mozDash"in this._context?this._context.mozDash=t:"webkitLineDash"in this._context&&(this._context.webkitLineDash=t)}getLineDash(){return this._context.getLineDash()}setTransform(t,i,n,s,r,o){this._context.setTransform(t,i,n,s,r,o)}stroke(t){t?this._context.stroke(t):this._context.stroke()}strokeText(t,i,n,s){this._context.strokeText(t,i,n,s)}transform(t,i,n,s,r,o){this._context.transform(t,i,n,s,r,o)}translate(t,i){this._context.translate(t,i)}_enableTrace(){let t=this,i=na.length,n=this.setAttr,s,r;const o=function(a){let l=t[a],h;t[a]=function(){return r=Hf(Array.prototype.slice.call(arguments,0)),h=l.apply(t,arguments),t._trace({method:a,args:r}),h}};for(s=0;s<i;s++)o(na[s]);t.setAttr=function(){n.apply(t,arguments);const a=arguments[0];let l=arguments[1];(a==="shadowOffsetX"||a==="shadowOffsetY"||a==="shadowBlur")&&(l=l/this.canvas.getPixelRatio()),t._trace({property:a,val:l})}}_applyGlobalCompositeOperation(t){const i=t.attrs.globalCompositeOperation;!i||i==="source-over"||this.setAttr("globalCompositeOperation",i)}}Me.Context=rs;qf.forEach(function(e){Object.defineProperty(rs.prototype,e,{get(){return this._context[e]},set(t){this._context[e]=t}})});class Qf extends rs{constructor(t,{willReadFrequently:i=!1}={}){super(t),this._context=t._canvas.getContext("2d",{willReadFrequently:i})}_fillColor(t){const i=t.fill();this.setAttr("fillStyle",i),t._fillFunc(this)}_fillPattern(t){this.setAttr("fillStyle",t._getFillPattern()),t._fillFunc(this)}_fillLinearGradient(t){const i=t._getLinearGradient();i&&(this.setAttr("fillStyle",i),t._fillFunc(this))}_fillRadialGradient(t){const i=t._getRadialGradient();i&&(this.setAttr("fillStyle",i),t._fillFunc(this))}_fill(t){const i=t.fill(),n=t.getFillPriority();if(i&&n==="color"){this._fillColor(t);return}const s=t.getFillPatternImage();if(s&&n==="pattern"){this._fillPattern(t);return}const r=t.getFillLinearGradientColorStops();if(r&&n==="linear-gradient"){this._fillLinearGradient(t);return}const o=t.getFillRadialGradientColorStops();if(o&&n==="radial-gradient"){this._fillRadialGradient(t);return}i?this._fillColor(t):s?this._fillPattern(t):r?this._fillLinearGradient(t):o&&this._fillRadialGradient(t)}_strokeLinearGradient(t){const i=t.getStrokeLinearGradientStartPoint(),n=t.getStrokeLinearGradientEndPoint(),s=t.getStrokeLinearGradientColorStops(),r=this.createLinearGradient(i.x,i.y,n.x,n.y);if(s){for(let o=0;o<s.length;o+=2)r.addColorStop(s[o],s[o+1]);this.setAttr("strokeStyle",r)}}_stroke(t){const i=t.dash(),n=t.getStrokeScaleEnabled();if(t.hasStroke()){if(!n){this.save();const r=this.getCanvas().getPixelRatio();this.setTransform(r,0,0,r,0,0)}this._applyLineCap(t),i&&t.dashEnabled()&&(this.setLineDash(i),this.setAttr("lineDashOffset",t.dashOffset())),this.setAttr("lineWidth",t.strokeWidth()),t.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),t.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(t):this.setAttr("strokeStyle",t.stroke()),t._strokeFunc(this),n||this.restore()}}_applyShadow(t){var i,n,s;const r=(i=t.getShadowRGBA())!==null&&i!==void 0?i:"black",o=(n=t.getShadowBlur())!==null&&n!==void 0?n:5,a=(s=t.getShadowOffset())!==null&&s!==void 0?s:{x:0,y:0},l=t.getAbsoluteScale(),h=this.canvas.getPixelRatio(),c=l.x*h,u=l.y*h;this.setAttr("shadowColor",r),this.setAttr("shadowBlur",o*Math.min(Math.abs(c),Math.abs(u))),this.setAttr("shadowOffsetX",a.x*c),this.setAttr("shadowOffsetY",a.y*u)}}Me.SceneContext=Qf;class Zf extends rs{constructor(t){super(t),this._context=t._canvas.getContext("2d",{willReadFrequently:!0})}_fill(t){this.save(),this.setAttr("fillStyle",t.colorKey),t._fillFuncHit(this),this.restore()}strokeShape(t){t.hasHitStroke()&&this._stroke(t)}_stroke(t){if(t.hasHitStroke()){const i=t.getStrokeScaleEnabled();if(!i){this.save();const r=this.getCanvas().getPixelRatio();this.setTransform(r,0,0,r,0,0)}this._applyLineCap(t);const n=t.hitStrokeWidth(),s=n==="auto"?t.strokeWidth():n;this.setAttr("lineWidth",s),this.setAttr("strokeStyle",t.colorKey),t._strokeFuncHit(this),i||this.restore()}}}Me.HitContext=Zf;Object.defineProperty(ue,"__esModule",{value:!0});ue.HitCanvas=ue.SceneCanvas=ue.Canvas=void 0;const Bn=Mt,Vl=Me,Wl=lt;let wn;function tu(){if(wn)return wn;const e=Bn.Util.createCanvasElement(),t=e.getContext("2d");return wn=function(){const i=Wl.Konva._global.devicePixelRatio||1,n=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return i/n}(),Bn.Util.releaseCanvas(e),wn}class oo{constructor(t){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const n=(t||{}).pixelRatio||Wl.Konva.pixelRatio||tu();this.pixelRatio=n,this._canvas=Bn.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(t){const i=this.pixelRatio;this.pixelRatio=t,this.setSize(this.getWidth()/i,this.getHeight()/i)}setWidth(t){this.width=this._canvas.width=t*this.pixelRatio,this._canvas.style.width=t+"px";const i=this.pixelRatio;this.getContext()._context.scale(i,i)}setHeight(t){this.height=this._canvas.height=t*this.pixelRatio,this._canvas.style.height=t+"px";const i=this.pixelRatio;this.getContext()._context.scale(i,i)}getWidth(){return this.width}getHeight(){return this.height}setSize(t,i){this.setWidth(t||0),this.setHeight(i||0)}toDataURL(t,i){try{return this._canvas.toDataURL(t,i)}catch{try{return this._canvas.toDataURL()}catch(s){return Bn.Util.error("Unable to get data URL. "+s.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}ue.Canvas=oo;class eu extends oo{constructor(t={width:0,height:0,willReadFrequently:!1}){super(t),this.context=new Vl.SceneContext(this,{willReadFrequently:t.willReadFrequently}),this.setSize(t.width,t.height)}}ue.SceneCanvas=eu;class iu extends oo{constructor(t={width:0,height:0}){super(t),this.hitCanvas=!0,this.context=new Vl.HitContext(this),this.setSize(t.width,t.height)}}ue.HitCanvas=iu;var os={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DD=void 0;const t=lt,i=Mt;e.DD={get isDragging(){let n=!1;return e.DD._dragElements.forEach(s=>{s.dragStatus==="dragging"&&(n=!0)}),n},justDragged:!1,get node(){let n;return e.DD._dragElements.forEach(s=>{n=s.node}),n},_dragElements:new Map,_drag(n){const s=[];e.DD._dragElements.forEach((r,o)=>{const{node:a}=r,l=a.getStage();l.setPointersPositions(n),r.pointerId===void 0&&(r.pointerId=i.Util._getFirstPointerId(n));const h=l._changedPointerPositions.find(c=>c.id===r.pointerId);if(h){if(r.dragStatus!=="dragging"){const c=a.dragDistance();if(Math.max(Math.abs(h.x-r.startPointerPos.x),Math.abs(h.y-r.startPointerPos.y))<c||(a.startDrag({evt:n}),!a.isDragging()))return}a._setDragPosition(n,r),s.push(a)}}),s.forEach(r=>{r.fire("dragmove",{type:"dragmove",target:r,evt:n},!0)})},_endDragBefore(n){const s=[];e.DD._dragElements.forEach(r=>{const{node:o}=r,a=o.getStage();if(n&&a.setPointersPositions(n),!a._changedPointerPositions.find(c=>c.id===r.pointerId))return;(r.dragStatus==="dragging"||r.dragStatus==="stopped")&&(e.DD.justDragged=!0,t.Konva._mouseListenClick=!1,t.Konva._touchListenClick=!1,t.Konva._pointerListenClick=!1,r.dragStatus="stopped");const h=r.node.getLayer()||r.node instanceof t.Konva.Stage&&r.node;h&&s.indexOf(h)===-1&&s.push(h)}),s.forEach(r=>{r.draw()})},_endDragAfter(n){e.DD._dragElements.forEach((s,r)=>{s.dragStatus==="stopped"&&s.node.fire("dragend",{type:"dragend",target:s.node,evt:n},!0),s.dragStatus!=="dragging"&&e.DD._dragElements.delete(r)})}},t.Konva.isBrowser&&(window.addEventListener("mouseup",e.DD._endDragBefore,!0),window.addEventListener("touchend",e.DD._endDragBefore,!0),window.addEventListener("touchcancel",e.DD._endDragBefore,!0),window.addEventListener("mousemove",e.DD._drag),window.addEventListener("touchmove",e.DD._drag),window.addEventListener("mouseup",e.DD._endDragAfter,!1),window.addEventListener("touchend",e.DD._endDragAfter,!1),window.addEventListener("touchcancel",e.DD._endDragAfter,!1))})(os);var ct={},Q={};Object.defineProperty(Q,"__esModule",{value:!0});Q.RGBComponent=nu;Q.alphaComponent=su;Q.getNumberValidator=ru;Q.getNumberOrArrayOfNumbersValidator=ou;Q.getNumberOrAutoValidator=au;Q.getStringValidator=lu;Q.getStringOrGradientValidator=cu;Q.getFunctionValidator=hu;Q.getNumberArrayValidator=du;Q.getBooleanValidator=fu;Q.getComponentValidator=uu;const Oe=lt,Ft=Mt;function De(e){return Ft.Util._isString(e)?'"'+e+'"':Object.prototype.toString.call(e)==="[object Number]"||Ft.Util._isBoolean(e)?e:Object.prototype.toString.call(e)}function nu(e){return e>255?255:e<0?0:Math.round(e)}function su(e){return e>1?1:e<1e-4?1e-4:e}function ru(){if(Oe.Konva.isUnminified)return function(e,t){return Ft.Util._isNumber(e)||Ft.Util.warn(De(e)+' is a not valid value for "'+t+'" attribute. The value should be a number.'),e}}function ou(e){if(Oe.Konva.isUnminified)return function(t,i){let n=Ft.Util._isNumber(t),s=Ft.Util._isArray(t)&&t.length==e;return!n&&!s&&Ft.Util.warn(De(t)+' is a not valid value for "'+i+'" attribute. The value should be a number or Array<number>('+e+")"),t}}function au(){if(Oe.Konva.isUnminified)return function(e,t){return Ft.Util._isNumber(e)||e==="auto"||Ft.Util.warn(De(e)+' is a not valid value for "'+t+'" attribute. The value should be a number or "auto".'),e}}function lu(){if(Oe.Konva.isUnminified)return function(e,t){return Ft.Util._isString(e)||Ft.Util.warn(De(e)+' is a not valid value for "'+t+'" attribute. The value should be a string.'),e}}function cu(){if(Oe.Konva.isUnminified)return function(e,t){const i=Ft.Util._isString(e),n=Object.prototype.toString.call(e)==="[object CanvasGradient]"||e&&e.addColorStop;return i||n||Ft.Util.warn(De(e)+' is a not valid value for "'+t+'" attribute. The value should be a string or a native gradient.'),e}}function hu(){if(Oe.Konva.isUnminified)return function(e,t){return Ft.Util._isFunction(e)||Ft.Util.warn(De(e)+' is a not valid value for "'+t+'" attribute. The value should be a function.'),e}}function du(){if(Oe.Konva.isUnminified)return function(e,t){const i=Int8Array?Object.getPrototypeOf(Int8Array):null;return i&&e instanceof i||(Ft.Util._isArray(e)?e.forEach(function(n){Ft.Util._isNumber(n)||Ft.Util.warn('"'+t+'" attribute has non numeric element '+n+". Make sure that all elements are numbers.")}):Ft.Util.warn(De(e)+' is a not valid value for "'+t+'" attribute. The value should be a array of numbers.')),e}}function fu(){if(Oe.Konva.isUnminified)return function(e,t){return e===!0||e===!1||Ft.Util.warn(De(e)+' is a not valid value for "'+t+'" attribute. The value should be a boolean.'),e}}function uu(e){if(Oe.Konva.isUnminified)return function(t,i){return t==null||Ft.Util.isObject(t)||Ft.Util.warn(De(t)+' is a not valid value for "'+i+'" attribute. The value should be an object with properties '+e),t}}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Factory=void 0;const t=Mt,i=Q,n="get",s="set";e.Factory={addGetterSetter(r,o,a,l,h){e.Factory.addGetter(r,o,a),e.Factory.addSetter(r,o,l,h),e.Factory.addOverloadedGetterSetter(r,o)},addGetter(r,o,a){const l=n+t.Util._capitalize(o);r.prototype[l]=r.prototype[l]||function(){const h=this.attrs[o];return h===void 0?a:h}},addSetter(r,o,a,l){const h=s+t.Util._capitalize(o);r.prototype[h]||e.Factory.overWriteSetter(r,o,a,l)},overWriteSetter(r,o,a,l){const h=s+t.Util._capitalize(o);r.prototype[h]=function(c){return a&&c!==void 0&&c!==null&&(c=a.call(this,c,o)),this._setAttr(o,c),l&&l.call(this),this}},addComponentsGetterSetter(r,o,a,l,h){const c=a.length,u=t.Util._capitalize,p=n+u(o),g=s+u(o);r.prototype[p]=function(){const _={};for(let v=0;v<c;v++){const C=a[v];_[C]=this.getAttr(o+u(C))}return _};const f=(0,i.getComponentValidator)(a);r.prototype[g]=function(_){const v=this.attrs[o];l&&(_=l.call(this,_,o)),f&&f.call(this,_,o);for(const C in _)_.hasOwnProperty(C)&&this._setAttr(o+u(C),_[C]);return _||a.forEach(C=>{this._setAttr(o+u(C),void 0)}),this._fireChangeEvent(o,v,_),h&&h.call(this),this},e.Factory.addOverloadedGetterSetter(r,o)},addOverloadedGetterSetter(r,o){const a=t.Util._capitalize(o),l=s+a,h=n+a;r.prototype[o]=function(){return arguments.length?(this[l](arguments[0]),this):this[h]()}},addDeprecatedGetterSetter(r,o,a,l){t.Util.error("Adding deprecated "+o);const h=n+t.Util._capitalize(o),c=o+" property is deprecated and will be removed soon. Look at Konva change log for more information.";r.prototype[h]=function(){t.Util.error(c);const u=this.attrs[o];return u===void 0?a:u},e.Factory.addSetter(r,o,l,function(){t.Util.error(c)}),e.Factory.addOverloadedGetterSetter(r,o)},backCompat(r,o){t.Util.each(o,function(a,l){const h=r.prototype[l],c=n+t.Util._capitalize(a),u=s+t.Util._capitalize(a);function p(){h.apply(this,arguments),t.Util.error('"'+a+'" method is deprecated and will be removed soon. Use ""'+l+'" instead.')}r.prototype[a]=p,r.prototype[c]=p,r.prototype[u]=p})},afterSetFilter(){this._filterUpToDate=!1}}})(ct);Object.defineProperty(Rt,"__esModule",{value:!0});Rt.Node=void 0;const bi=ue,se=os,pn=ct,Ue=lt,ht=Mt,Ot=Q,Fn="absoluteOpacity",xn="allEventListeners",Ae="absoluteTransform",sa="absoluteScale",si="canvas",gu="Change",pu="children",mu="konva",Mr="listening",_u="mouseenter",yu="mouseleave",vu="pointerenter",bu="pointerleave",Su="touchenter",Cu="touchleave",ra="set",oa="Shape",kn=" ",aa="stage",Be="transform",wu="Stage",Fr="visible",xu=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(kn);let Tu=1;class et{constructor(t){this._id=Tu++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(t),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(t){(t===Be||t===Ae)&&this._cache.get(t)?this._cache.get(t).dirty=!0:t?this._cache.delete(t):this._cache.clear()}_getCache(t,i){let n=this._cache.get(t);return(n===void 0||(t===Be||t===Ae)&&n.dirty===!0)&&(n=i.call(this),this._cache.set(t,n)),n}_calculate(t,i,n){if(!this._attachedDepsListeners.get(t)){const s=i.map(r=>r+"Change.konva").join(kn);this.on(s,()=>{this._clearCache(t)}),this._attachedDepsListeners.set(t,!0)}return this._getCache(t,n)}_getCanvasCache(){return this._cache.get(si)}_clearSelfAndDescendantCache(t){this._clearCache(t),t===Ae&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(si)){const{scene:t,filter:i,hit:n,buffer:s}=this._cache.get(si);ht.Util.releaseCanvas(t,i,n,s),this._cache.delete(si)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(t){const i=t||{};let n={};(i.x===void 0||i.y===void 0||i.width===void 0||i.height===void 0)&&(n=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let s=Math.ceil(i.width||n.width),r=Math.ceil(i.height||n.height),o=i.pixelRatio,a=i.x===void 0?Math.floor(n.x):i.x,l=i.y===void 0?Math.floor(n.y):i.y,h=i.offset||0,c=i.drawBorder||!1,u=i.hitCanvasPixelRatio||1;if(!s||!r){ht.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const p=Math.abs(Math.round(n.x)-a)>.5?1:0,g=Math.abs(Math.round(n.y)-l)>.5?1:0;s+=h*2+p,r+=h*2+g,a-=h,l-=h;const f=new bi.SceneCanvas({pixelRatio:o,width:s,height:r}),_=new bi.SceneCanvas({pixelRatio:o,width:0,height:0,willReadFrequently:!0}),v=new bi.HitCanvas({pixelRatio:u,width:s,height:r}),C=f.getContext(),T=v.getContext(),d=new bi.SceneCanvas({width:f.width/f.pixelRatio+Math.abs(a),height:f.height/f.pixelRatio+Math.abs(l),pixelRatio:f.pixelRatio}),m=d.getContext();return v.isCache=!0,f.isCache=!0,this._cache.delete(si),this._filterUpToDate=!1,i.imageSmoothingEnabled===!1&&(f.getContext()._context.imageSmoothingEnabled=!1,_.getContext()._context.imageSmoothingEnabled=!1),C.save(),T.save(),m.save(),C.translate(-a,-l),T.translate(-a,-l),m.translate(-a,-l),d.x=a,d.y=l,this._isUnderCache=!0,this._clearSelfAndDescendantCache(Fn),this._clearSelfAndDescendantCache(sa),this.drawScene(f,this,d),this.drawHit(v,this),this._isUnderCache=!1,C.restore(),T.restore(),c&&(C.save(),C.beginPath(),C.rect(0,0,s,r),C.closePath(),C.setAttr("strokeStyle","red"),C.setAttr("lineWidth",5),C.stroke(),C.restore()),this._cache.set(si,{scene:f,filter:_,hit:v,buffer:d,x:a,y:l}),this._requestDraw(),this}isCached(){return this._cache.has(si)}getClientRect(t){throw new Error('abstract "getClientRect" method call')}_transformedRect(t,i){const n=[{x:t.x,y:t.y},{x:t.x+t.width,y:t.y},{x:t.x+t.width,y:t.y+t.height},{x:t.x,y:t.y+t.height}];let s=1/0,r=1/0,o=-1/0,a=-1/0;const l=this.getAbsoluteTransform(i);return n.forEach(function(h){const c=l.point(h);s===void 0&&(s=o=c.x,r=a=c.y),s=Math.min(s,c.x),r=Math.min(r,c.y),o=Math.max(o,c.x),a=Math.max(a,c.y)}),{x:s,y:r,width:o-s,height:a-r}}_drawCachedSceneCanvas(t){t.save(),t._applyOpacity(this),t._applyGlobalCompositeOperation(this);const i=this._getCanvasCache();t.translate(i.x,i.y);const n=this._getCachedSceneCanvas(),s=n.pixelRatio;t.drawImage(n._canvas,0,0,n.width/s,n.height/s),t.restore()}_drawCachedHitCanvas(t){const i=this._getCanvasCache(),n=i.hit;t.save(),t.translate(i.x,i.y),t.drawImage(n._canvas,0,0,n.width/n.pixelRatio,n.height/n.pixelRatio),t.restore()}_getCachedSceneCanvas(){let t=this.filters(),i=this._getCanvasCache(),n=i.scene,s=i.filter,r=s.getContext(),o,a,l,h;if(t){if(!this._filterUpToDate){const c=n.pixelRatio;s.setSize(n.width/n.pixelRatio,n.height/n.pixelRatio);try{for(o=t.length,r.clear(),r.drawImage(n._canvas,0,0,n.getWidth()/c,n.getHeight()/c),a=r.getImageData(0,0,s.getWidth(),s.getHeight()),l=0;l<o;l++){if(h=t[l],typeof h!="function"){ht.Util.error("Filter should be type of function, but got "+typeof h+" instead. Please check correct filters");continue}h.call(this,a),r.putImageData(a,0,0)}}catch(u){ht.Util.error("Unable to apply filter. "+u.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return s}return n}on(t,i){if(this._cache&&this._cache.delete(xn),arguments.length===3)return this._delegate.apply(this,arguments);const n=t.split(kn);for(let s=0;s<n.length;s++){const o=n[s].split("."),a=o[0],l=o[1]||"";this.eventListeners[a]||(this.eventListeners[a]=[]),this.eventListeners[a].push({name:l,handler:i})}return this}off(t,i){let n=(t||"").split(kn),s=n.length,r,o,a,l,h,c;if(this._cache&&this._cache.delete(xn),!t)for(o in this.eventListeners)this._off(o);for(r=0;r<s;r++)if(a=n[r],l=a.split("."),h=l[0],c=l[1],h)this.eventListeners[h]&&this._off(h,c,i);else for(o in this.eventListeners)this._off(o,c,i);return this}dispatchEvent(t){const i={target:this,type:t.type,evt:t};return this.fire(t.type,i),this}addEventListener(t,i){return this.on(t,function(n){i.call(this,n.evt)}),this}removeEventListener(t){return this.off(t),this}_delegate(t,i,n){const s=this;this.on(t,function(r){const o=r.target.findAncestors(i,!0,s);for(let a=0;a<o.length;a++)r=ht.Util.cloneObject(r),r.currentTarget=o[a],n.call(o[a],r)})}remove(){return this.isDragging()&&this.stopDrag(),se.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(Ae),this._clearSelfAndDescendantCache(Fn),this._clearSelfAndDescendantCache(sa),this._clearSelfAndDescendantCache(aa),this._clearSelfAndDescendantCache(Fr),this._clearSelfAndDescendantCache(Mr)}_remove(){this._clearCaches();const t=this.getParent();t&&t.children&&(t.children.splice(this.index,1),t._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(t){const i="get"+ht.Util._capitalize(t);return ht.Util._isFunction(this[i])?this[i]():this.attrs[t]}getAncestors(){let t=this.getParent(),i=[];for(;t;)i.push(t),t=t.getParent();return i}getAttrs(){return this.attrs||{}}setAttrs(t){return this._batchTransformChanges(()=>{let i,n;if(!t)return this;for(i in t)i!==pu&&(n=ra+ht.Util._capitalize(i),ht.Util._isFunction(this[n])?this[n](t[i]):this._setAttr(i,t[i]))}),this}isListening(){return this._getCache(Mr,this._isListening)}_isListening(t){if(!this.listening())return!1;const n=this.getParent();return n&&n!==t&&this!==t?n._isListening(t):!0}isVisible(){return this._getCache(Fr,this._isVisible)}_isVisible(t){if(!this.visible())return!1;const n=this.getParent();return n&&n!==t&&this!==t?n._isVisible(t):!0}shouldDrawHit(t,i=!1){if(t)return this._isVisible(t)&&this._isListening(t);const n=this.getLayer();let s=!1;se.DD._dragElements.forEach(o=>{o.dragStatus==="dragging"&&(o.node.nodeType==="Stage"||o.node.getLayer()===n)&&(s=!0)});const r=!i&&!Ue.Konva.hitOnDragEnabled&&(s||Ue.Konva.isTransforming());return this.isListening()&&this.isVisible()&&!r}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let t=this.getDepth(),i=this,n=0,s,r,o,a;function l(c){for(s=[],r=c.length,o=0;o<r;o++)a=c[o],n++,a.nodeType!==oa&&(s=s.concat(a.getChildren().slice())),a._id===i._id&&(o=r);s.length>0&&s[0].getDepth()<=t&&l(s)}const h=this.getStage();return i.nodeType!==wu&&h&&l(h.getChildren()),n}getDepth(){let t=0,i=this.parent;for(;i;)t++,i=i.parent;return t}_batchTransformChanges(t){this._batchingTransformChange=!0,t(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(Be),this._clearSelfAndDescendantCache(Ae)),this._needClearTransformCache=!1}setPosition(t){return this._batchTransformChanges(()=>{this.x(t.x),this.y(t.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const t=this.getStage();if(!t)return null;const i=t.getPointerPosition();if(!i)return null;const n=this.getAbsoluteTransform().copy();return n.invert(),n.point(i)}getAbsolutePosition(t){let i=!1,n=this.parent;for(;n;){if(n.isCached()){i=!0;break}n=n.parent}i&&!t&&(t=!0);const s=this.getAbsoluteTransform(t).getMatrix(),r=new ht.Transform,o=this.offset();return r.m=s.slice(),r.translate(o.x,o.y),r.getTranslation()}setAbsolutePosition(t){const{x:i,y:n,...s}=this._clearTransform();this.attrs.x=i,this.attrs.y=n,this._clearCache(Be);const r=this._getAbsoluteTransform().copy();return r.invert(),r.translate(t.x,t.y),t={x:this.attrs.x+r.getTranslation().x,y:this.attrs.y+r.getTranslation().y},this._setTransform(s),this.setPosition({x:t.x,y:t.y}),this._clearCache(Be),this._clearSelfAndDescendantCache(Ae),this}_setTransform(t){let i;for(i in t)this.attrs[i]=t[i]}_clearTransform(){const t={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,t}move(t){let i=t.x,n=t.y,s=this.x(),r=this.y();return i!==void 0&&(s+=i),n!==void 0&&(r+=n),this.setPosition({x:s,y:r}),this}_eachAncestorReverse(t,i){let n=[],s=this.getParent(),r,o;if(!(i&&i._id===this._id)){for(n.unshift(this);s&&(!i||s._id!==i._id);)n.unshift(s),s=s.parent;for(r=n.length,o=0;o<r;o++)t(n[o])}}rotate(t){return this.rotation(this.rotation()+t),this}moveToTop(){if(!this.parent)return ht.Util.warn("Node has no parent. moveToTop function is ignored."),!1;const t=this.index,i=this.parent.getChildren().length;return t<i-1?(this.parent.children.splice(t,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return ht.Util.warn("Node has no parent. moveUp function is ignored."),!1;const t=this.index,i=this.parent.getChildren().length;return t<i-1?(this.parent.children.splice(t,1),this.parent.children.splice(t+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return ht.Util.warn("Node has no parent. moveDown function is ignored."),!1;const t=this.index;return t>0?(this.parent.children.splice(t,1),this.parent.children.splice(t-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return ht.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;const t=this.index;return t>0?(this.parent.children.splice(t,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(t){if(!this.parent)return ht.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(t<0||t>=this.parent.children.length)&&ht.Util.warn("Unexpected value "+t+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const i=this.index;return this.parent.children.splice(i,1),this.parent.children.splice(t,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(Fn,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let t=this.opacity();const i=this.getParent();return i&&!i._isUnderCache&&(t*=i.getAbsoluteOpacity()),t}moveTo(t){return this.getParent()!==t&&(this._remove(),t.add(this)),this}toObject(){let t=this.getAttrs(),i,n,s,r,o;const a={attrs:{},className:this.getClassName()};for(i in t)n=t[i],o=ht.Util.isObject(n)&&!ht.Util._isPlainObject(n)&&!ht.Util._isArray(n),!o&&(s=typeof this[i]=="function"&&this[i],delete t[i],r=s?s.call(this):null,t[i]=n,r!==n&&(a.attrs[i]=n));return ht.Util._prepareToStringify(a)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(t,i,n){const s=[];i&&this._isMatch(t)&&s.push(this);let r=this.parent;for(;r;){if(r===n)return s;r._isMatch(t)&&s.push(r),r=r.parent}return s}isAncestorOf(t){return!1}findAncestor(t,i,n){return this.findAncestors(t,i,n)[0]}_isMatch(t){if(!t)return!1;if(typeof t=="function")return t(this);let i=t.replace(/ /g,"").split(","),n=i.length,s,r;for(s=0;s<n;s++)if(r=i[s],ht.Util.isValidSelector(r)||(ht.Util.warn('Selector "'+r+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),ht.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),ht.Util.warn("Konva is awesome, right?")),r.charAt(0)==="#"){if(this.id()===r.slice(1))return!0}else if(r.charAt(0)==="."){if(this.hasName(r.slice(1)))return!0}else if(this.className===r||this.nodeType===r)return!0;return!1}getLayer(){const t=this.getParent();return t?t.getLayer():null}getStage(){return this._getCache(aa,this._getStage)}_getStage(){const t=this.getParent();return t?t.getStage():null}fire(t,i={},n){return i.target=i.target||this,n?this._fireAndBubble(t,i):this._fire(t,i),this}getAbsoluteTransform(t){return t?this._getAbsoluteTransform(t):this._getCache(Ae,this._getAbsoluteTransform)}_getAbsoluteTransform(t){let i;if(t)return i=new ht.Transform,this._eachAncestorReverse(function(n){const s=n.transformsEnabled();s==="all"?i.multiply(n.getTransform()):s==="position"&&i.translate(n.x()-n.offsetX(),n.y()-n.offsetY())},t),i;{i=this._cache.get(Ae)||new ht.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(i):i.reset();const n=this.transformsEnabled();if(n==="all")i.multiply(this.getTransform());else if(n==="position"){const s=this.attrs.x||0,r=this.attrs.y||0,o=this.attrs.offsetX||0,a=this.attrs.offsetY||0;i.translate(s-o,r-a)}return i.dirty=!1,i}}getAbsoluteScale(t){let i=this;for(;i;)i._isUnderCache&&(t=i),i=i.getParent();const s=this.getAbsoluteTransform(t).decompose();return{x:s.scaleX,y:s.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(Be,this._getTransform)}_getTransform(){var t,i;const n=this._cache.get(Be)||new ht.Transform;n.reset();const s=this.x(),r=this.y(),o=Ue.Konva.getAngle(this.rotation()),a=(t=this.attrs.scaleX)!==null&&t!==void 0?t:1,l=(i=this.attrs.scaleY)!==null&&i!==void 0?i:1,h=this.attrs.skewX||0,c=this.attrs.skewY||0,u=this.attrs.offsetX||0,p=this.attrs.offsetY||0;return(s!==0||r!==0)&&n.translate(s,r),o!==0&&n.rotate(o),(h!==0||c!==0)&&n.skew(h,c),(a!==1||l!==1)&&n.scale(a,l),(u!==0||p!==0)&&n.translate(-1*u,-1*p),n.dirty=!1,n}clone(t){let i=ht.Util.cloneObject(this.attrs),n,s,r,o,a;for(n in t)i[n]=t[n];const l=new this.constructor(i);for(n in this.eventListeners)for(s=this.eventListeners[n],r=s.length,o=0;o<r;o++)a=s[o],a.name.indexOf(mu)<0&&(l.eventListeners[n]||(l.eventListeners[n]=[]),l.eventListeners[n].push(a));return l}_toKonvaCanvas(t){t=t||{};const i=this.getClientRect(),n=this.getStage(),s=t.x!==void 0?t.x:Math.floor(i.x),r=t.y!==void 0?t.y:Math.floor(i.y),o=t.pixelRatio||1,a=new bi.SceneCanvas({width:t.width||Math.ceil(i.width)||(n?n.width():0),height:t.height||Math.ceil(i.height)||(n?n.height():0),pixelRatio:o}),l=a.getContext(),h=new bi.SceneCanvas({width:a.width/a.pixelRatio+Math.abs(s),height:a.height/a.pixelRatio+Math.abs(r),pixelRatio:a.pixelRatio});return t.imageSmoothingEnabled===!1&&(l._context.imageSmoothingEnabled=!1),l.save(),(s||r)&&l.translate(-1*s,-1*r),this.drawScene(a,void 0,h),l.restore(),a}toCanvas(t){return this._toKonvaCanvas(t)._canvas}toDataURL(t){t=t||{};const i=t.mimeType||null,n=t.quality||null,s=this._toKonvaCanvas(t).toDataURL(i,n);return t.callback&&t.callback(s),s}toImage(t){return new Promise((i,n)=>{try{const s=t==null?void 0:t.callback;s&&delete t.callback,ht.Util._urlToImage(this.toDataURL(t),function(r){i(r),s==null||s(r)})}catch(s){n(s)}})}toBlob(t){return new Promise((i,n)=>{try{const s=t==null?void 0:t.callback;s&&delete t.callback,this.toCanvas(t).toBlob(r=>{i(r),s==null||s(r)},t==null?void 0:t.mimeType,t==null?void 0:t.quality)}catch(s){n(s)}})}setSize(t){return this.width(t.width),this.height(t.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():Ue.Konva.dragDistance}_off(t,i,n){let s=this.eventListeners[t],r,o,a;for(r=0;r<s.length;r++)if(o=s[r].name,a=s[r].handler,(o!=="konva"||i==="konva")&&(!i||o===i)&&(!n||n===a)){if(s.splice(r,1),s.length===0){delete this.eventListeners[t];break}r--}}_fireChangeEvent(t,i,n){this._fire(t+gu,{oldVal:i,newVal:n})}addName(t){if(!this.hasName(t)){const i=this.name(),n=i?i+" "+t:t;this.name(n)}return this}hasName(t){if(!t)return!1;const i=this.name();return i?(i||"").split(/\s/g).indexOf(t)!==-1:!1}removeName(t){const i=(this.name()||"").split(/\s/g),n=i.indexOf(t);return n!==-1&&(i.splice(n,1),this.name(i.join(" "))),this}setAttr(t,i){const n=this[ra+ht.Util._capitalize(t)];return ht.Util._isFunction(n)?n.call(this,i):this._setAttr(t,i),this}_requestDraw(){if(Ue.Konva.autoDrawEnabled){const t=this.getLayer()||this.getStage();t==null||t.batchDraw()}}_setAttr(t,i){const n=this.attrs[t];n===i&&!ht.Util.isObject(i)||(i==null?delete this.attrs[t]:this.attrs[t]=i,this._shouldFireChangeEvents&&this._fireChangeEvent(t,n,i),this._requestDraw())}_setComponentAttr(t,i,n){let s;n!==void 0&&(s=this.attrs[t],s||(this.attrs[t]=this.getAttr(t)),this.attrs[t][i]=n,this._fireChangeEvent(t,s,n))}_fireAndBubble(t,i,n){i&&this.nodeType===oa&&(i.target=this);const s=[_u,yu,vu,bu,Su,Cu];if(!(s.indexOf(t)!==-1&&(n&&(this===n||this.isAncestorOf&&this.isAncestorOf(n))||this.nodeType==="Stage"&&!n))){this._fire(t,i);const o=s.indexOf(t)!==-1&&n&&n.isAncestorOf&&n.isAncestorOf(this)&&!n.isAncestorOf(this.parent);(i&&!i.cancelBubble||!i)&&this.parent&&this.parent.isListening()&&!o&&(n&&n.parent?this._fireAndBubble.call(this.parent,t,i,n):this._fireAndBubble.call(this.parent,t,i))}}_getProtoListeners(t){var i,n,s;const r=(i=this._cache.get(xn))!==null&&i!==void 0?i:{};let o=r==null?void 0:r[t];if(o===void 0){o=[];let a=Object.getPrototypeOf(this);for(;a;){const l=(s=(n=a.eventListeners)===null||n===void 0?void 0:n[t])!==null&&s!==void 0?s:[];o.push(...l),a=Object.getPrototypeOf(a)}r[t]=o,this._cache.set(xn,r)}return o}_fire(t,i){i=i||{},i.currentTarget=this,i.type=t;const n=this._getProtoListeners(t);if(n)for(let r=0;r<n.length;r++)n[r].handler.call(this,i);const s=this.eventListeners[t];if(s)for(let r=0;r<s.length;r++)s[r].handler.call(this,i)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(t){const i=t?t.pointerId:void 0,n=this.getStage(),s=this.getAbsolutePosition();if(!n)return;const r=n._getPointerById(i)||n._changedPointerPositions[0]||s;se.DD._dragElements.set(this._id,{node:this,startPointerPos:r,offset:{x:r.x-s.x,y:r.y-s.y},dragStatus:"ready",pointerId:i})}startDrag(t,i=!0){se.DD._dragElements.has(this._id)||this._createDragElement(t);const n=se.DD._dragElements.get(this._id);n.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:t&&t.evt},i)}_setDragPosition(t,i){const n=this.getStage()._getPointerById(i.pointerId);if(!n)return;let s={x:n.x-i.offset.x,y:n.y-i.offset.y};const r=this.dragBoundFunc();if(r!==void 0){const o=r.call(this,s,t);o?s=o:ht.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==s.x||this._lastPos.y!==s.y)&&(this.setAbsolutePosition(s),this._requestDraw()),this._lastPos=s}stopDrag(t){const i=se.DD._dragElements.get(this._id);i&&(i.dragStatus="stopped"),se.DD._endDragBefore(t),se.DD._endDragAfter(t)}setDraggable(t){this._setAttr("draggable",t),this._dragChange()}isDragging(){const t=se.DD._dragElements.get(this._id);return t?t.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(t){if(!(!(t.evt.button!==void 0)||Ue.Konva.dragButtons.indexOf(t.evt.button)>=0)||this.isDragging())return;let s=!1;se.DD._dragElements.forEach(r=>{this.isAncestorOf(r.node)&&(s=!0)}),s||this._createDragElement(t)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const i=se.DD._dragElements.get(this._id),n=i&&i.dragStatus==="dragging",s=i&&i.dragStatus==="ready";n?this.stopDrag():s&&se.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(t={x:0,y:0}){const i=this.getStage();if(!i)return!1;const n={x:-t.x,y:-t.y,width:i.width()+2*t.x,height:i.height()+2*t.y};return ht.Util.haveIntersection(n,this.getClientRect())}static create(t,i){return ht.Util._isString(t)&&(t=JSON.parse(t)),this._createNode(t,i)}static _createNode(t,i){let n=et.prototype.getClassName.call(t),s=t.children,r,o,a;i&&(t.attrs.container=i),Ue.Konva[n]||(ht.Util.warn('Can not find a node with class name "'+n+'". Fallback to "Shape".'),n="Shape");const l=Ue.Konva[n];if(r=new l(t.attrs),s)for(o=s.length,a=0;a<o;a++)r.add(et._createNode(s[a]));return r}}Rt.Node=et;et.prototype.nodeType="Node";et.prototype._attrsAffectingSize=[];et.prototype.eventListeners={};et.prototype.on.call(et.prototype,xu,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(Be),this._clearSelfAndDescendantCache(Ae)});et.prototype.on.call(et.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(Fr)});et.prototype.on.call(et.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(Mr)});et.prototype.on.call(et.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(Fn)});const St=pn.Factory.addGetterSetter;St(et,"zIndex");St(et,"absolutePosition");St(et,"position");St(et,"x",0,(0,Ot.getNumberValidator)());St(et,"y",0,(0,Ot.getNumberValidator)());St(et,"globalCompositeOperation","source-over",(0,Ot.getStringValidator)());St(et,"opacity",1,(0,Ot.getNumberValidator)());St(et,"name","",(0,Ot.getStringValidator)());St(et,"id","",(0,Ot.getStringValidator)());St(et,"rotation",0,(0,Ot.getNumberValidator)());pn.Factory.addComponentsGetterSetter(et,"scale",["x","y"]);St(et,"scaleX",1,(0,Ot.getNumberValidator)());St(et,"scaleY",1,(0,Ot.getNumberValidator)());pn.Factory.addComponentsGetterSetter(et,"skew",["x","y"]);St(et,"skewX",0,(0,Ot.getNumberValidator)());St(et,"skewY",0,(0,Ot.getNumberValidator)());pn.Factory.addComponentsGetterSetter(et,"offset",["x","y"]);St(et,"offsetX",0,(0,Ot.getNumberValidator)());St(et,"offsetY",0,(0,Ot.getNumberValidator)());St(et,"dragDistance",void 0,(0,Ot.getNumberValidator)());St(et,"width",0,(0,Ot.getNumberValidator)());St(et,"height",0,(0,Ot.getNumberValidator)());St(et,"listening",!0,(0,Ot.getBooleanValidator)());St(et,"preventDefault",!0,(0,Ot.getBooleanValidator)());St(et,"filters",void 0,function(e){return this._filterUpToDate=!1,e});St(et,"visible",!0,(0,Ot.getBooleanValidator)());St(et,"transformsEnabled","all",(0,Ot.getStringValidator)());St(et,"size");St(et,"dragBoundFunc");St(et,"draggable",!1,(0,Ot.getBooleanValidator)());pn.Factory.backCompat(et,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});var hi={};Object.defineProperty(hi,"__esModule",{value:!0});hi.Container=void 0;const Di=ct,ar=Rt,as=Q;class di extends ar.Node{constructor(){super(...arguments),this.children=[]}getChildren(t){const i=this.children||[];return t?i.filter(t):i}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(t=>{t.parent=null,t.index=0,t.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(t=>{t.parent=null,t.index=0,t.destroy()}),this.children=[],this._requestDraw(),this}add(...t){if(t.length===0)return this;if(t.length>1){for(let n=0;n<t.length;n++)this.add(t[n]);return this}const i=t[0];return i.getParent()?(i.moveTo(this),this):(this._validateAdd(i),i.index=this.getChildren().length,i.parent=this,i._clearCaches(),this.getChildren().push(i),this._fire("add",{child:i}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(t){return this._generalFind(t,!1)}findOne(t){const i=this._generalFind(t,!0);return i.length>0?i[0]:void 0}_generalFind(t,i){const n=[];return this._descendants(s=>{const r=s._isMatch(t);return r&&n.push(s),!!(r&&i)}),n}_descendants(t){let i=!1;const n=this.getChildren();for(const s of n){if(i=t(s),i)return!0;if(s.hasChildren()&&(i=s._descendants(t),i))return!0}return!1}toObject(){const t=ar.Node.prototype.toObject.call(this);return t.children=[],this.getChildren().forEach(i=>{t.children.push(i.toObject())}),t}isAncestorOf(t){let i=t.getParent();for(;i;){if(i._id===this._id)return!0;i=i.getParent()}return!1}clone(t){const i=ar.Node.prototype.clone.call(this,t);return this.getChildren().forEach(function(n){i.add(n.clone())}),i}getAllIntersections(t){const i=[];return this.find("Shape").forEach(n=>{n.isVisible()&&n.intersects(t)&&i.push(n)}),i}_clearSelfAndDescendantCache(t){var i;super._clearSelfAndDescendantCache(t),!this.isCached()&&((i=this.children)===null||i===void 0||i.forEach(function(n){n._clearSelfAndDescendantCache(t)}))}_setChildrenIndices(){var t;(t=this.children)===null||t===void 0||t.forEach(function(i,n){i.index=n}),this._requestDraw()}drawScene(t,i,n){const s=this.getLayer(),r=t||s&&s.getCanvas(),o=r&&r.getContext(),a=this._getCanvasCache(),l=a&&a.scene,h=r&&r.isCache;if(!this.isVisible()&&!h)return this;if(l){o.save();const c=this.getAbsoluteTransform(i).getMatrix();o.transform(c[0],c[1],c[2],c[3],c[4],c[5]),this._drawCachedSceneCanvas(o),o.restore()}else this._drawChildren("drawScene",r,i,n);return this}drawHit(t,i){if(!this.shouldDrawHit(i))return this;const n=this.getLayer(),s=t||n&&n.hitCanvas,r=s&&s.getContext(),o=this._getCanvasCache();if(o&&o.hit){r.save();const l=this.getAbsoluteTransform(i).getMatrix();r.transform(l[0],l[1],l[2],l[3],l[4],l[5]),this._drawCachedHitCanvas(r),r.restore()}else this._drawChildren("drawHit",s,i);return this}_drawChildren(t,i,n,s){var r;const o=i&&i.getContext(),a=this.clipWidth(),l=this.clipHeight(),h=this.clipFunc(),c=typeof a=="number"&&typeof l=="number"||h,u=n===this;if(c){o.save();const g=this.getAbsoluteTransform(n);let f=g.getMatrix();o.transform(f[0],f[1],f[2],f[3],f[4],f[5]),o.beginPath();let _;if(h)_=h.call(this,o,this);else{const v=this.clipX(),C=this.clipY();o.rect(v||0,C||0,a,l)}o.clip.apply(o,_),f=g.copy().invert().getMatrix(),o.transform(f[0],f[1],f[2],f[3],f[4],f[5])}const p=!u&&this.globalCompositeOperation()!=="source-over"&&t==="drawScene";p&&(o.save(),o._applyGlobalCompositeOperation(this)),(r=this.children)===null||r===void 0||r.forEach(function(g){g[t](i,n,s)}),p&&o.restore(),c&&o.restore()}getClientRect(t={}){var i;const n=t.skipTransform,s=t.relativeTo;let r,o,a,l,h={x:1/0,y:1/0,width:0,height:0};const c=this;(i=this.children)===null||i===void 0||i.forEach(function(g){if(!g.visible())return;const f=g.getClientRect({relativeTo:c,skipShadow:t.skipShadow,skipStroke:t.skipStroke});f.width===0&&f.height===0||(r===void 0?(r=f.x,o=f.y,a=f.x+f.width,l=f.y+f.height):(r=Math.min(r,f.x),o=Math.min(o,f.y),a=Math.max(a,f.x+f.width),l=Math.max(l,f.y+f.height)))});const u=this.find("Shape");let p=!1;for(let g=0;g<u.length;g++)if(u[g]._isVisible(this)){p=!0;break}return p&&r!==void 0?h={x:r,y:o,width:a-r,height:l-o}:h={x:0,y:0,width:0,height:0},n?h:this._transformedRect(h,s)}}hi.Container=di;Di.Factory.addComponentsGetterSetter(di,"clip",["x","y","width","height"]);Di.Factory.addGetterSetter(di,"clipX",void 0,(0,as.getNumberValidator)());Di.Factory.addGetterSetter(di,"clipY",void 0,(0,as.getNumberValidator)());Di.Factory.addGetterSetter(di,"clipWidth",void 0,(0,as.getNumberValidator)());Di.Factory.addGetterSetter(di,"clipHeight",void 0,(0,as.getNumberValidator)());Di.Factory.addGetterSetter(di,"clipFunc");var jl={},qe={};Object.defineProperty(qe,"__esModule",{value:!0});qe.getCapturedShape=Au;qe.createEvent=ao;qe.hasPointerCapture=Eu;qe.setPointerCapture=Ru;qe.releaseCapture=Kl;const Pu=lt,hn=new Map,zl=Pu.Konva._global.PointerEvent!==void 0;function Au(e){return hn.get(e)}function ao(e){return{evt:e,pointerId:e.pointerId}}function Eu(e,t){return hn.get(e)===t}function Ru(e,t){Kl(e),t.getStage()&&(hn.set(e,t),zl&&t._fire("gotpointercapture",ao(new PointerEvent("gotpointercapture"))))}function Kl(e,t){const i=hn.get(e);if(!i)return;const n=i.getStage();n&&n.content,hn.delete(e),zl&&i._fire("lostpointercapture",ao(new PointerEvent("lostpointercapture")))}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Stage=e.stages=void 0;const t=Mt,i=ct,n=hi,s=lt,r=ue,o=os,a=lt,l=qe,h="Stage",c="string",u="px",p="mouseout",g="mouseleave",f="mouseover",_="mouseenter",v="mousemove",C="mousedown",T="mouseup",d="pointermove",m="pointerdown",S="pointerup",P="pointercancel",F="lostpointercapture",y="pointerout",E="pointerleave",x="pointerover",R="pointerenter",k="contextmenu",L="touchstart",j="touchend",V="touchmove",Z="touchcancel",K="wheel",B=5,ot=[[_,"_pointerenter"],[C,"_pointerdown"],[v,"_pointermove"],[T,"_pointerup"],[g,"_pointerleave"],[L,"_pointerdown"],[V,"_pointermove"],[j,"_pointerup"],[Z,"_pointercancel"],[f,"_pointerover"],[K,"_wheel"],[k,"_contextmenu"],[m,"_pointerdown"],[d,"_pointermove"],[S,"_pointerup"],[P,"_pointercancel"],[E,"_pointerleave"],[F,"_lostpointercapture"]],J={mouse:{[y]:p,[E]:g,[x]:f,[R]:_,[d]:v,[m]:C,[S]:T,[P]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[y]:"touchout",[E]:"touchleave",[x]:"touchover",[R]:"touchenter",[d]:V,[m]:L,[S]:j,[P]:Z,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[y]:y,[E]:E,[x]:x,[R]:R,[d]:d,[m]:m,[S]:S,[P]:P,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},z=Dt=>Dt.indexOf("pointer")>=0?"pointer":Dt.indexOf("touch")>=0?"touch":"mouse",st=Dt=>{const A=z(Dt);if(A==="pointer")return s.Konva.pointerEventsEnabled&&J.pointer;if(A==="touch")return J.touch;if(A==="mouse")return J.mouse};function Ct(Dt={}){return(Dt.clipFunc||Dt.clipWidth||Dt.clipHeight)&&t.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),Dt}const Ie="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);";e.stages=[];class le extends n.Container{constructor(A){super(Ct(A)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),e.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{Ct(this.attrs)}),this._checkVisibility()}_validateAdd(A){const G=A.getType()==="Layer",Y=A.getType()==="FastLayer";G||Y||t.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const A=this.visible()?"":"none";this.content.style.display=A}setContainer(A){if(typeof A===c){let G;if(A.charAt(0)==="."){const Y=A.slice(1);A=document.getElementsByClassName(Y)[0]}else A.charAt(0)!=="#"?G=A:G=A.slice(1),A=document.getElementById(G);if(!A)throw"Can not find container in document with id "+G}return this._setAttr("container",A),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),A.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){const A=this.children,G=A.length;for(let Y=0;Y<G;Y++)A[Y].clear();return this}clone(A){return A||(A={}),A.container=typeof document<"u"&&document.createElement("div"),n.Container.prototype.clone.call(this,A)}destroy(){super.destroy();const A=this.content;A&&t.Util._isInDocument(A)&&this.container().removeChild(A);const G=e.stages.indexOf(this);return G>-1&&e.stages.splice(G,1),t.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const A=this._pointerPositions[0]||this._changedPointerPositions[0];return A?{x:A.x,y:A.y}:(t.Util.warn(Ie),null)}_getPointerById(A){return this._pointerPositions.find(G=>G.id===A)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(A){A=A||{},A.x=A.x||0,A.y=A.y||0,A.width=A.width||this.width(),A.height=A.height||this.height();const G=new r.SceneCanvas({width:A.width,height:A.height,pixelRatio:A.pixelRatio||1}),Y=G.getContext()._context,gt=this.children;return(A.x||A.y)&&Y.translate(-1*A.x,-1*A.y),gt.forEach(function(vt){if(!vt.isVisible())return;const b=vt._toKonvaCanvas(A);Y.drawImage(b._canvas,A.x,A.y,b.getWidth()/b.getPixelRatio(),b.getHeight()/b.getPixelRatio())}),G}getIntersection(A){if(!A)return null;const G=this.children,Y=G.length,gt=Y-1;for(let vt=gt;vt>=0;vt--){const b=G[vt].getIntersection(A);if(b)return b}return null}_resizeDOM(){const A=this.width(),G=this.height();this.content&&(this.content.style.width=A+u,this.content.style.height=G+u),this.bufferCanvas.setSize(A,G),this.bufferHitCanvas.setSize(A,G),this.children.forEach(Y=>{Y.setSize({width:A,height:G}),Y.draw()})}add(A,...G){if(arguments.length>1){for(let gt=0;gt<arguments.length;gt++)this.add(arguments[gt]);return this}super.add(A);const Y=this.children.length;return Y>B&&t.Util.warn("The stage has "+Y+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),A.setSize({width:this.width(),height:this.height()}),A.draw(),s.Konva.isBrowser&&this.content.appendChild(A.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(A){return l.hasPointerCapture(A,this)}setPointerCapture(A){l.setPointerCapture(A,this)}releaseCapture(A){l.releaseCapture(A,this)}getLayers(){return this.children}_bindContentEvents(){s.Konva.isBrowser&&ot.forEach(([A,G])=>{this.content.addEventListener(A,Y=>{this[G](Y)},{passive:!1})})}_pointerenter(A){this.setPointersPositions(A);const G=st(A.type);G&&this._fire(G.pointerenter,{evt:A,target:this,currentTarget:this})}_pointerover(A){this.setPointersPositions(A);const G=st(A.type);G&&this._fire(G.pointerover,{evt:A,target:this,currentTarget:this})}_getTargetShape(A){let G=this[A+"targetShape"];return G&&!G.getStage()&&(G=null),G}_pointerleave(A){const G=st(A.type),Y=z(A.type);if(!G)return;this.setPointersPositions(A);const gt=this._getTargetShape(Y),vt=!(s.Konva.isDragging()||s.Konva.isTransforming())||s.Konva.hitOnDragEnabled;gt&&vt?(gt._fireAndBubble(G.pointerout,{evt:A}),gt._fireAndBubble(G.pointerleave,{evt:A}),this._fire(G.pointerleave,{evt:A,target:this,currentTarget:this}),this[Y+"targetShape"]=null):vt&&(this._fire(G.pointerleave,{evt:A,target:this,currentTarget:this}),this._fire(G.pointerout,{evt:A,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(A){const G=st(A.type),Y=z(A.type);if(!G)return;this.setPointersPositions(A);let gt=!1;this._changedPointerPositions.forEach(vt=>{const b=this.getIntersection(vt);if(o.DD.justDragged=!1,s.Konva["_"+Y+"ListenClick"]=!0,!b||!b.isListening()){this[Y+"ClickStartShape"]=void 0;return}s.Konva.capturePointerEventsEnabled&&b.setPointerCapture(vt.id),this[Y+"ClickStartShape"]=b,b._fireAndBubble(G.pointerdown,{evt:A,pointerId:vt.id}),gt=!0;const w=A.type.indexOf("touch")>=0;b.preventDefault()&&A.cancelable&&w&&A.preventDefault()}),gt||this._fire(G.pointerdown,{evt:A,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(A){const G=st(A.type),Y=z(A.type);if(!G||(s.Konva.isDragging()&&o.DD.node.preventDefault()&&A.cancelable&&A.preventDefault(),this.setPointersPositions(A),!(!(s.Konva.isDragging()||s.Konva.isTransforming())||s.Konva.hitOnDragEnabled)))return;const vt={};let b=!1;const w=this._getTargetShape(Y);this._changedPointerPositions.forEach(M=>{const N=l.getCapturedShape(M.id)||this.getIntersection(M),O=M.id,D={evt:A,pointerId:O},$=w!==N;if($&&w&&(w._fireAndBubble(G.pointerout,{...D},N),w._fireAndBubble(G.pointerleave,{...D},N)),N){if(vt[N._id])return;vt[N._id]=!0}N&&N.isListening()?(b=!0,$&&(N._fireAndBubble(G.pointerover,{...D},w),N._fireAndBubble(G.pointerenter,{...D},w),this[Y+"targetShape"]=N),N._fireAndBubble(G.pointermove,{...D})):w&&(this._fire(G.pointerover,{evt:A,target:this,currentTarget:this,pointerId:O}),this[Y+"targetShape"]=null)}),b||this._fire(G.pointermove,{evt:A,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(A){const G=st(A.type),Y=z(A.type);if(!G)return;this.setPointersPositions(A);const gt=this[Y+"ClickStartShape"],vt=this[Y+"ClickEndShape"],b={};let w=!1;this._changedPointerPositions.forEach(M=>{const N=l.getCapturedShape(M.id)||this.getIntersection(M);if(N){if(N.releaseCapture(M.id),b[N._id])return;b[N._id]=!0}const O=M.id,D={evt:A,pointerId:O};let $=!1;s.Konva["_"+Y+"InDblClickWindow"]?($=!0,clearTimeout(this[Y+"DblTimeout"])):o.DD.justDragged||(s.Konva["_"+Y+"InDblClickWindow"]=!0,clearTimeout(this[Y+"DblTimeout"])),this[Y+"DblTimeout"]=setTimeout(function(){s.Konva["_"+Y+"InDblClickWindow"]=!1},s.Konva.dblClickWindow),N&&N.isListening()?(w=!0,this[Y+"ClickEndShape"]=N,N._fireAndBubble(G.pointerup,{...D}),s.Konva["_"+Y+"ListenClick"]&&gt&&gt===N&&(N._fireAndBubble(G.pointerclick,{...D}),$&&vt&&vt===N&&N._fireAndBubble(G.pointerdblclick,{...D}))):(this[Y+"ClickEndShape"]=null,s.Konva["_"+Y+"ListenClick"]&&this._fire(G.pointerclick,{evt:A,target:this,currentTarget:this,pointerId:O}),$&&this._fire(G.pointerdblclick,{evt:A,target:this,currentTarget:this,pointerId:O}))}),w||this._fire(G.pointerup,{evt:A,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),s.Konva["_"+Y+"ListenClick"]=!1,A.cancelable&&Y!=="touch"&&Y!=="pointer"&&A.preventDefault()}_contextmenu(A){this.setPointersPositions(A);const G=this.getIntersection(this.getPointerPosition());G&&G.isListening()?G._fireAndBubble(k,{evt:A}):this._fire(k,{evt:A,target:this,currentTarget:this})}_wheel(A){this.setPointersPositions(A);const G=this.getIntersection(this.getPointerPosition());G&&G.isListening()?G._fireAndBubble(K,{evt:A}):this._fire(K,{evt:A,target:this,currentTarget:this})}_pointercancel(A){this.setPointersPositions(A);const G=l.getCapturedShape(A.pointerId)||this.getIntersection(this.getPointerPosition());G&&G._fireAndBubble(S,l.createEvent(A)),l.releaseCapture(A.pointerId)}_lostpointercapture(A){l.releaseCapture(A.pointerId)}setPointersPositions(A){const G=this._getContentPosition();let Y=null,gt=null;A=A||window.event,A.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(A.touches,vt=>{this._pointerPositions.push({id:vt.identifier,x:(vt.clientX-G.left)/G.scaleX,y:(vt.clientY-G.top)/G.scaleY})}),Array.prototype.forEach.call(A.changedTouches||A.touches,vt=>{this._changedPointerPositions.push({id:vt.identifier,x:(vt.clientX-G.left)/G.scaleX,y:(vt.clientY-G.top)/G.scaleY})})):(Y=(A.clientX-G.left)/G.scaleX,gt=(A.clientY-G.top)/G.scaleY,this.pointerPos={x:Y,y:gt},this._pointerPositions=[{x:Y,y:gt,id:t.Util._getFirstPointerId(A)}],this._changedPointerPositions=[{x:Y,y:gt,id:t.Util._getFirstPointerId(A)}])}_setPointerPosition(A){t.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(A)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const A=this.content.getBoundingClientRect();return{top:A.top,left:A.left,scaleX:A.width/this.content.clientWidth||1,scaleY:A.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new r.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new r.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!s.Konva.isBrowser)return;const A=this.container();if(!A)throw"Stage has no container. A container is required.";A.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),A.appendChild(this.content),this._resizeDOM()}cache(){return t.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(A){A.batchDraw()}),this}}e.Stage=le,le.prototype.nodeType=h,(0,a._registerNode)(le),i.Factory.addGetterSetter(le,"container"),s.Konva.isBrowser&&document.addEventListener("visibilitychange",()=>{e.stages.forEach(Dt=>{Dt.batchDraw()})})})(jl);var mn={},It={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Shape=e.shapes=void 0;const t=lt,i=Mt,n=ct,s=Rt,r=Q,o=lt,a=qe,l="hasShadow",h="shadowRGBA",c="patternImage",u="linearGradient",p="radialGradient";let g;function f(){return g||(g=i.Util.createCanvasElement().getContext("2d"),g)}e.shapes={};function _(E){const x=this.attrs.fillRule;x?E.fill(x):E.fill()}function v(E){E.stroke()}function C(E){const x=this.attrs.fillRule;x?E.fill(x):E.fill()}function T(E){E.stroke()}function d(){this._clearCache(l)}function m(){this._clearCache(h)}function S(){this._clearCache(c)}function P(){this._clearCache(u)}function F(){this._clearCache(p)}class y extends s.Node{constructor(x){super(x);let R;for(;R=i.Util.getRandomColor(),!(R&&!(R in e.shapes)););this.colorKey=R,e.shapes[R]=this}getContext(){return i.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return i.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(l,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(c,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const R=f().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(R&&R.setTransform){const k=new i.Transform;k.translate(this.fillPatternX(),this.fillPatternY()),k.rotate(t.Konva.getAngle(this.fillPatternRotation())),k.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),k.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const L=k.getMatrix(),j=typeof DOMMatrix>"u"?{a:L[0],b:L[1],c:L[2],d:L[3],e:L[4],f:L[5]}:new DOMMatrix(L);R.setTransform(j)}return R}}_getLinearGradient(){return this._getCache(u,this.__getLinearGradient)}__getLinearGradient(){const x=this.fillLinearGradientColorStops();if(x){const R=f(),k=this.fillLinearGradientStartPoint(),L=this.fillLinearGradientEndPoint(),j=R.createLinearGradient(k.x,k.y,L.x,L.y);for(let V=0;V<x.length;V+=2)j.addColorStop(x[V],x[V+1]);return j}}_getRadialGradient(){return this._getCache(p,this.__getRadialGradient)}__getRadialGradient(){const x=this.fillRadialGradientColorStops();if(x){const R=f(),k=this.fillRadialGradientStartPoint(),L=this.fillRadialGradientEndPoint(),j=R.createRadialGradient(k.x,k.y,this.fillRadialGradientStartRadius(),L.x,L.y,this.fillRadialGradientEndRadius());for(let V=0;V<x.length;V+=2)j.addColorStop(x[V],x[V+1]);return j}}getShadowRGBA(){return this._getCache(h,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const x=i.Util.colorToRGBA(this.shadowColor());if(x)return"rgba("+x.r+","+x.g+","+x.b+","+x.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const x=this.hitStrokeWidth();return x==="auto"?this.hasStroke():this.strokeEnabled()&&!!x}intersects(x){const R=this.getStage();if(!R)return!1;const k=R.bufferHitCanvas;return k.getContext().clear(),this.drawHit(k,void 0,!0),k.context.getImageData(Math.round(x.x),Math.round(x.y),1,1).data[3]>0}destroy(){return s.Node.prototype.destroy.call(this),delete e.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(x){var R;if(!((R=this.attrs.perfectDrawEnabled)!==null&&R!==void 0?R:!0))return!1;const L=x||this.hasFill(),j=this.hasStroke(),V=this.getAbsoluteOpacity()!==1;if(L&&j&&V)return!0;const Z=this.hasShadow(),K=this.shadowForStrokeEnabled();return!!(L&&j&&Z&&K)}setStrokeHitEnabled(x){i.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),x?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){const x=this.size();return{x:this._centroid?-x.width/2:0,y:this._centroid?-x.height/2:0,width:x.width,height:x.height}}getClientRect(x={}){let R=!1,k=this.getParent();for(;k;){if(k.isCached()){R=!0;break}k=k.getParent()}const L=x.skipTransform,j=x.relativeTo||R&&this.getStage()||void 0,V=this.getSelfRect(),K=!x.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,B=V.width+K,ot=V.height+K,J=!x.skipShadow&&this.hasShadow(),z=J?this.shadowOffsetX():0,st=J?this.shadowOffsetY():0,Ct=B+Math.abs(z),Ie=ot+Math.abs(st),le=J&&this.shadowBlur()||0,Dt=Ct+le*2,A=Ie+le*2,G={width:Dt,height:A,x:-(K/2+le)+Math.min(z,0)+V.x,y:-(K/2+le)+Math.min(st,0)+V.y};return L?G:this._transformedRect(G,j)}drawScene(x,R,k){const L=this.getLayer(),j=x||L.getCanvas(),V=j.getContext(),Z=this._getCanvasCache(),K=this.getSceneFunc(),B=this.hasShadow();let ot;const J=R===this;if(!this.isVisible()&&!J)return this;if(Z){V.save();const z=this.getAbsoluteTransform(R).getMatrix();return V.transform(z[0],z[1],z[2],z[3],z[4],z[5]),this._drawCachedSceneCanvas(V),V.restore(),this}if(!K)return this;if(V.save(),this._useBufferCanvas()){ot=this.getStage();const z=k||ot.bufferCanvas,st=z.getContext();st.clear(),st.save(),st._applyLineJoin(this);const Ct=this.getAbsoluteTransform(R).getMatrix();st.transform(Ct[0],Ct[1],Ct[2],Ct[3],Ct[4],Ct[5]),K.call(this,st,this),st.restore();const Ie=z.pixelRatio;B&&V._applyShadow(this),V._applyOpacity(this),V._applyGlobalCompositeOperation(this),V.drawImage(z._canvas,z.x||0,z.y||0,z.width/Ie,z.height/Ie)}else{if(V._applyLineJoin(this),!J){const z=this.getAbsoluteTransform(R).getMatrix();V.transform(z[0],z[1],z[2],z[3],z[4],z[5]),V._applyOpacity(this),V._applyGlobalCompositeOperation(this)}B&&V._applyShadow(this),K.call(this,V,this)}return V.restore(),this}drawHit(x,R,k=!1){if(!this.shouldDrawHit(R,k))return this;const L=this.getLayer(),j=x||L.hitCanvas,V=j&&j.getContext(),Z=this.hitFunc()||this.sceneFunc(),K=this._getCanvasCache(),B=K&&K.hit;if(this.colorKey||i.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),B){V.save();const J=this.getAbsoluteTransform(R).getMatrix();return V.transform(J[0],J[1],J[2],J[3],J[4],J[5]),this._drawCachedHitCanvas(V),V.restore(),this}if(!Z)return this;if(V.save(),V._applyLineJoin(this),!(this===R)){const J=this.getAbsoluteTransform(R).getMatrix();V.transform(J[0],J[1],J[2],J[3],J[4],J[5])}return Z.call(this,V,this),V.restore(),this}drawHitFromCache(x=0){const R=this._getCanvasCache(),k=this._getCachedSceneCanvas(),L=R.hit,j=L.getContext(),V=L.getWidth(),Z=L.getHeight();j.clear(),j.drawImage(k._canvas,0,0,V,Z);try{const K=j.getImageData(0,0,V,Z),B=K.data,ot=B.length,J=i.Util._hexToRgb(this.colorKey);for(let z=0;z<ot;z+=4)B[z+3]>x?(B[z]=J.r,B[z+1]=J.g,B[z+2]=J.b,B[z+3]=255):B[z+3]=0;j.putImageData(K,0,0)}catch(K){i.Util.error("Unable to draw hit graph from cached scene canvas. "+K.message)}return this}hasPointerCapture(x){return a.hasPointerCapture(x,this)}setPointerCapture(x){a.setPointerCapture(x,this)}releaseCapture(x){a.releaseCapture(x,this)}}e.Shape=y,y.prototype._fillFunc=_,y.prototype._strokeFunc=v,y.prototype._fillFuncHit=C,y.prototype._strokeFuncHit=T,y.prototype._centroid=!1,y.prototype.nodeType="Shape",(0,o._registerNode)(y),y.prototype.eventListeners={},y.prototype.on.call(y.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",d),y.prototype.on.call(y.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",m),y.prototype.on.call(y.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",S),y.prototype.on.call(y.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",P),y.prototype.on.call(y.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",F),n.Factory.addGetterSetter(y,"stroke",void 0,(0,r.getStringOrGradientValidator)()),n.Factory.addGetterSetter(y,"strokeWidth",2,(0,r.getNumberValidator)()),n.Factory.addGetterSetter(y,"fillAfterStrokeEnabled",!1),n.Factory.addGetterSetter(y,"hitStrokeWidth","auto",(0,r.getNumberOrAutoValidator)()),n.Factory.addGetterSetter(y,"strokeHitEnabled",!0,(0,r.getBooleanValidator)()),n.Factory.addGetterSetter(y,"perfectDrawEnabled",!0,(0,r.getBooleanValidator)()),n.Factory.addGetterSetter(y,"shadowForStrokeEnabled",!0,(0,r.getBooleanValidator)()),n.Factory.addGetterSetter(y,"lineJoin"),n.Factory.addGetterSetter(y,"lineCap"),n.Factory.addGetterSetter(y,"sceneFunc"),n.Factory.addGetterSetter(y,"hitFunc"),n.Factory.addGetterSetter(y,"dash"),n.Factory.addGetterSetter(y,"dashOffset",0,(0,r.getNumberValidator)()),n.Factory.addGetterSetter(y,"shadowColor",void 0,(0,r.getStringValidator)()),n.Factory.addGetterSetter(y,"shadowBlur",0,(0,r.getNumberValidator)()),n.Factory.addGetterSetter(y,"shadowOpacity",1,(0,r.getNumberValidator)()),n.Factory.addComponentsGetterSetter(y,"shadowOffset",["x","y"]),n.Factory.addGetterSetter(y,"shadowOffsetX",0,(0,r.getNumberValidator)()),n.Factory.addGetterSetter(y,"shadowOffsetY",0,(0,r.getNumberValidator)()),n.Factory.addGetterSetter(y,"fillPatternImage"),n.Factory.addGetterSetter(y,"fill",void 0,(0,r.getStringOrGradientValidator)()),n.Factory.addGetterSetter(y,"fillPatternX",0,(0,r.getNumberValidator)()),n.Factory.addGetterSetter(y,"fillPatternY",0,(0,r.getNumberValidator)()),n.Factory.addGetterSetter(y,"fillLinearGradientColorStops"),n.Factory.addGetterSetter(y,"strokeLinearGradientColorStops"),n.Factory.addGetterSetter(y,"fillRadialGradientStartRadius",0),n.Factory.addGetterSetter(y,"fillRadialGradientEndRadius",0),n.Factory.addGetterSetter(y,"fillRadialGradientColorStops"),n.Factory.addGetterSetter(y,"fillPatternRepeat","repeat"),n.Factory.addGetterSetter(y,"fillEnabled",!0),n.Factory.addGetterSetter(y,"strokeEnabled",!0),n.Factory.addGetterSetter(y,"shadowEnabled",!0),n.Factory.addGetterSetter(y,"dashEnabled",!0),n.Factory.addGetterSetter(y,"strokeScaleEnabled",!0),n.Factory.addGetterSetter(y,"fillPriority","color"),n.Factory.addComponentsGetterSetter(y,"fillPatternOffset",["x","y"]),n.Factory.addGetterSetter(y,"fillPatternOffsetX",0,(0,r.getNumberValidator)()),n.Factory.addGetterSetter(y,"fillPatternOffsetY",0,(0,r.getNumberValidator)()),n.Factory.addComponentsGetterSetter(y,"fillPatternScale",["x","y"]),n.Factory.addGetterSetter(y,"fillPatternScaleX",1,(0,r.getNumberValidator)()),n.Factory.addGetterSetter(y,"fillPatternScaleY",1,(0,r.getNumberValidator)()),n.Factory.addComponentsGetterSetter(y,"fillLinearGradientStartPoint",["x","y"]),n.Factory.addComponentsGetterSetter(y,"strokeLinearGradientStartPoint",["x","y"]),n.Factory.addGetterSetter(y,"fillLinearGradientStartPointX",0),n.Factory.addGetterSetter(y,"strokeLinearGradientStartPointX",0),n.Factory.addGetterSetter(y,"fillLinearGradientStartPointY",0),n.Factory.addGetterSetter(y,"strokeLinearGradientStartPointY",0),n.Factory.addComponentsGetterSetter(y,"fillLinearGradientEndPoint",["x","y"]),n.Factory.addComponentsGetterSetter(y,"strokeLinearGradientEndPoint",["x","y"]),n.Factory.addGetterSetter(y,"fillLinearGradientEndPointX",0),n.Factory.addGetterSetter(y,"strokeLinearGradientEndPointX",0),n.Factory.addGetterSetter(y,"fillLinearGradientEndPointY",0),n.Factory.addGetterSetter(y,"strokeLinearGradientEndPointY",0),n.Factory.addComponentsGetterSetter(y,"fillRadialGradientStartPoint",["x","y"]),n.Factory.addGetterSetter(y,"fillRadialGradientStartPointX",0),n.Factory.addGetterSetter(y,"fillRadialGradientStartPointY",0),n.Factory.addComponentsGetterSetter(y,"fillRadialGradientEndPoint",["x","y"]),n.Factory.addGetterSetter(y,"fillRadialGradientEndPointX",0),n.Factory.addGetterSetter(y,"fillRadialGradientEndPointY",0),n.Factory.addGetterSetter(y,"fillPatternRotation",0),n.Factory.addGetterSetter(y,"fillRule",void 0,(0,r.getStringValidator)()),n.Factory.backCompat(y,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})})(It);Object.defineProperty(mn,"__esModule",{value:!0});mn.Layer=void 0;const Pe=Mt,lr=hi,Si=Rt,lo=ct,la=ue,Mu=Q,Fu=It,ku=lt,Nu="#",Ou="beforeDraw",Du="draw",Yl=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],Lu=Yl.length;class Li extends lr.Container{constructor(t){super(t),this.canvas=new la.SceneCanvas,this.hitCanvas=new la.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(t){return this.getContext().clear(t),this.getHitCanvas().getContext().clear(t),this}setZIndex(t){super.setZIndex(t);const i=this.getStage();return i&&i.content&&(i.content.removeChild(this.getNativeCanvasElement()),t<i.children.length-1?i.content.insertBefore(this.getNativeCanvasElement(),i.children[t+1].getCanvas()._canvas):i.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){Si.Node.prototype.moveToTop.call(this);const t=this.getStage();return t&&t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!Si.Node.prototype.moveUp.call(this))return!1;const i=this.getStage();return!i||!i.content?!1:(i.content.removeChild(this.getNativeCanvasElement()),this.index<i.children.length-1?i.content.insertBefore(this.getNativeCanvasElement(),i.children[this.index+1].getCanvas()._canvas):i.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(Si.Node.prototype.moveDown.call(this)){const t=this.getStage();if(t){const i=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),i[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(Si.Node.prototype.moveToBottom.call(this)){const t=this.getStage();if(t){const i=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),i[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const t=this.getNativeCanvasElement();return Si.Node.prototype.remove.call(this),t&&t.parentNode&&Pe.Util._isInDocument(t)&&t.parentNode.removeChild(t),this}getStage(){return this.parent}setSize({width:t,height:i}){return this.canvas.setSize(t,i),this.hitCanvas.setSize(t,i),this._setSmoothEnabled(),this}_validateAdd(t){const i=t.getType();i!=="Group"&&i!=="Shape"&&Pe.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(t){return t=t||{},t.width=t.width||this.getWidth(),t.height=t.height||this.getHeight(),t.x=t.x!==void 0?t.x:this.x(),t.y=t.y!==void 0?t.y:this.y(),Si.Node.prototype._toKonvaCanvas.call(this,t)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){Pe.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){Pe.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,Pe.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(t){if(!this.isListening()||!this.isVisible())return null;let i=1,n=!1;for(;;){for(let s=0;s<Lu;s++){const r=Yl[s],o=this._getIntersection({x:t.x+r.x*i,y:t.y+r.y*i}),a=o.shape;if(a)return a;if(n=!!o.antialiased,!o.antialiased)break}if(n)i+=1;else return null}}_getIntersection(t){const i=this.hitCanvas.pixelRatio,n=this.hitCanvas.context.getImageData(Math.round(t.x*i),Math.round(t.y*i),1,1).data,s=n[3];if(s===255){const r=Pe.Util._rgbToHex(n[0],n[1],n[2]),o=Fu.shapes[Nu+r];return o?{shape:o}:{antialiased:!0}}else if(s>0)return{antialiased:!0};return{}}drawScene(t,i,n){const s=this.getLayer(),r=t||s&&s.getCanvas();return this._fire(Ou,{node:this}),this.clearBeforeDraw()&&r.getContext().clear(),lr.Container.prototype.drawScene.call(this,r,i,n),this._fire(Du,{node:this}),this}drawHit(t,i){const n=this.getLayer(),s=t||n&&n.hitCanvas;return n&&n.clearBeforeDraw()&&n.getHitCanvas().getContext().clear(),lr.Container.prototype.drawHit.call(this,s,i),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(t){Pe.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(t)}getHitGraphEnabled(t){return Pe.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const t=this.parent;!!this.hitCanvas._canvas.parentNode?t.content.removeChild(this.hitCanvas._canvas):t.content.appendChild(this.hitCanvas._canvas)}destroy(){return Pe.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}}mn.Layer=Li;Li.prototype.nodeType="Layer";(0,ku._registerNode)(Li);lo.Factory.addGetterSetter(Li,"imageSmoothingEnabled",!0);lo.Factory.addGetterSetter(Li,"clearBeforeDraw",!0);lo.Factory.addGetterSetter(Li,"hitGraphEnabled",!0,(0,Mu.getBooleanValidator)());var ls={};Object.defineProperty(ls,"__esModule",{value:!0});ls.FastLayer=void 0;const Gu=Mt,Iu=mn,Uu=lt;class co extends Iu.Layer{constructor(t){super(t),this.listening(!1),Gu.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}ls.FastLayer=co;co.prototype.nodeType="FastLayer";(0,Uu._registerNode)(co);var Gi={};Object.defineProperty(Gi,"__esModule",{value:!0});Gi.Group=void 0;const Bu=Mt,$u=hi,Hu=lt;class ho extends $u.Container{_validateAdd(t){const i=t.getType();i!=="Group"&&i!=="Shape"&&Bu.Util.throw("You may only add groups and shapes to groups.")}}Gi.Group=ho;ho.prototype.nodeType="Group";(0,Hu._registerNode)(ho);var Ii={};Object.defineProperty(Ii,"__esModule",{value:!0});Ii.Animation=void 0;const cr=lt,ca=Mt,hr=function(){return cr.glob.performance&&cr.glob.performance.now?function(){return cr.glob.performance.now()}:function(){return new Date().getTime()}}();class Se{constructor(t,i){this.id=Se.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:hr(),frameRate:0},this.func=t,this.setLayers(i)}setLayers(t){let i=[];return t&&(i=Array.isArray(t)?t:[t]),this.layers=i,this}getLayers(){return this.layers}addLayer(t){const i=this.layers,n=i.length;for(let s=0;s<n;s++)if(i[s]._id===t._id)return!1;return this.layers.push(t),!0}isRunning(){const i=Se.animations,n=i.length;for(let s=0;s<n;s++)if(i[s].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=hr(),Se._addAnimation(this),this}stop(){return Se._removeAnimation(this),this}_updateFrameObject(t){this.frame.timeDiff=t-this.frame.lastTime,this.frame.lastTime=t,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(t){this.animations.push(t),this._handleAnimation()}static _removeAnimation(t){const i=t.id,n=this.animations,s=n.length;for(let r=0;r<s;r++)if(n[r].id===i){this.animations.splice(r,1);break}}static _runFrames(){const t={},i=this.animations;for(let n=0;n<i.length;n++){const s=i[n],r=s.layers,o=s.func;s._updateFrameObject(hr());const a=r.length;let l;if(o?l=o.call(s,s.frame)!==!1:l=!0,!!l)for(let h=0;h<a;h++){const c=r[h];c._id!==void 0&&(t[c._id]=c)}}for(const n in t)t.hasOwnProperty(n)&&t[n].batchDraw()}static _animationLoop(){const t=Se;t.animations.length?(t._runFrames(),ca.Util.requestAnimFrame(t._animationLoop)):t.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,ca.Util.requestAnimFrame(this._animationLoop))}}Ii.Animation=Se;Se.animations=[];Se.animIdCounter=0;Se.animRunning=!1;var Xl={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Easings=e.Tween=void 0;const t=Mt,i=Ii,n=Rt,s=lt,r={node:1,duration:1,easing:1,onFinish:1,yoyo:1},o=1,a=2,l=3,h=["fill","stroke","shadowColor"];let c=0;class u{constructor(f,_,v,C,T,d,m){this.prop=f,this.propFunc=_,this.begin=C,this._pos=C,this.duration=d,this._change=0,this.prevPos=0,this.yoyo=m,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=v,this._change=T-this.begin,this.pause()}fire(f){const _=this[f];_&&_()}setTime(f){f>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():f<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=f,this.update())}getTime(){return this._time}setPosition(f){this.prevPos=this._pos,this.propFunc(f),this._pos=f}getPosition(f){return f===void 0&&(f=this._time),this.func(f,this.begin,this._change,this.duration)}play(){this.state=a,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=l,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(f){this.pause(),this._time=f,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const f=this.getTimer()-this._startTime;this.state===a?this.setTime(f):this.state===l&&this.setTime(this.duration-f)}pause(){this.state=o,this.fire("onPause")}getTimer(){return new Date().getTime()}}class p{constructor(f){const _=this,v=f.node,C=v._id,T=f.easing||e.Easings.Linear,d=!!f.yoyo;let m,S;typeof f.duration>"u"?m=.3:f.duration===0?m=.001:m=f.duration,this.node=v,this._id=c++;const P=v.getLayer()||(v instanceof s.Konva.Stage?v.getLayers():null);P||t.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new i.Animation(function(){_.tween.onEnterFrame()},P),this.tween=new u(S,function(F){_._tweenFunc(F)},T,0,1,m*1e3,d),this._addListeners(),p.attrs[C]||(p.attrs[C]={}),p.attrs[C][this._id]||(p.attrs[C][this._id]={}),p.tweens[C]||(p.tweens[C]={});for(S in f)r[S]===void 0&&this._addAttr(S,f[S]);this.reset(),this.onFinish=f.onFinish,this.onReset=f.onReset,this.onUpdate=f.onUpdate}_addAttr(f,_){const v=this.node,C=v._id;let T,d,m,S,P;const F=p.tweens[C][f];F&&delete p.attrs[C][F][f];let y=v.getAttr(f);if(t.Util._isArray(_))if(T=[],d=Math.max(_.length,y.length),f==="points"&&_.length!==y.length&&(_.length>y.length?(S=y,y=t.Util._prepareArrayForTween(y,_,v.closed())):(m=_,_=t.Util._prepareArrayForTween(_,y,v.closed()))),f.indexOf("fill")===0)for(let E=0;E<d;E++)if(E%2===0)T.push(_[E]-y[E]);else{const x=t.Util.colorToRGBA(y[E]);P=t.Util.colorToRGBA(_[E]),y[E]=x,T.push({r:P.r-x.r,g:P.g-x.g,b:P.b-x.b,a:P.a-x.a})}else for(let E=0;E<d;E++)T.push(_[E]-y[E]);else h.indexOf(f)!==-1?(y=t.Util.colorToRGBA(y),P=t.Util.colorToRGBA(_),T={r:P.r-y.r,g:P.g-y.g,b:P.b-y.b,a:P.a-y.a}):T=_-y;p.attrs[C][this._id][f]={start:y,diff:T,end:_,trueEnd:m,trueStart:S},p.tweens[C][f]=this._id}_tweenFunc(f){const _=this.node,v=p.attrs[_._id][this._id];let C,T,d,m,S,P,F,y;for(C in v){if(T=v[C],d=T.start,m=T.diff,y=T.end,t.Util._isArray(d))if(S=[],F=Math.max(d.length,y.length),C.indexOf("fill")===0)for(P=0;P<F;P++)P%2===0?S.push((d[P]||0)+m[P]*f):S.push("rgba("+Math.round(d[P].r+m[P].r*f)+","+Math.round(d[P].g+m[P].g*f)+","+Math.round(d[P].b+m[P].b*f)+","+(d[P].a+m[P].a*f)+")");else for(P=0;P<F;P++)S.push((d[P]||0)+m[P]*f);else h.indexOf(C)!==-1?S="rgba("+Math.round(d.r+m.r*f)+","+Math.round(d.g+m.g*f)+","+Math.round(d.b+m.b*f)+","+(d.a+m.a*f)+")":S=d+m*f;_.setAttr(C,S)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const f=this.node,_=p.attrs[f._id][this._id];_.points&&_.points.trueEnd&&f.setAttr("points",_.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const f=this.node,_=p.attrs[f._id][this._id];_.points&&_.points.trueStart&&f.points(_.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(f){return this.tween.seek(f*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){const f=this.node._id,_=this._id,v=p.tweens[f];this.pause(),this.anim&&this.anim.stop();for(const C in v)delete p.tweens[f][C];delete p.attrs[f][_],p.tweens[f]&&(Object.keys(p.tweens[f]).length===0&&delete p.tweens[f],Object.keys(p.attrs[f]).length===0&&delete p.attrs[f])}}e.Tween=p,p.attrs={},p.tweens={},n.Node.prototype.to=function(g){const f=g.onFinish;g.node=this,g.onFinish=function(){this.destroy(),f&&f()},new p(g).play()},e.Easings={BackEaseIn(g,f,_,v){return _*(g/=v)*g*((1.70158+1)*g-1.70158)+f},BackEaseOut(g,f,_,v){return _*((g=g/v-1)*g*((1.70158+1)*g+1.70158)+1)+f},BackEaseInOut(g,f,_,v){let C=1.70158;return(g/=v/2)<1?_/2*(g*g*(((C*=1.525)+1)*g-C))+f:_/2*((g-=2)*g*(((C*=1.525)+1)*g+C)+2)+f},ElasticEaseIn(g,f,_,v,C,T){let d=0;return g===0?f:(g/=v)===1?f+_:(T||(T=v*.3),!C||C<Math.abs(_)?(C=_,d=T/4):d=T/(2*Math.PI)*Math.asin(_/C),-(C*Math.pow(2,10*(g-=1))*Math.sin((g*v-d)*(2*Math.PI)/T))+f)},ElasticEaseOut(g,f,_,v,C,T){let d=0;return g===0?f:(g/=v)===1?f+_:(T||(T=v*.3),!C||C<Math.abs(_)?(C=_,d=T/4):d=T/(2*Math.PI)*Math.asin(_/C),C*Math.pow(2,-10*g)*Math.sin((g*v-d)*(2*Math.PI)/T)+_+f)},ElasticEaseInOut(g,f,_,v,C,T){let d=0;return g===0?f:(g/=v/2)===2?f+_:(T||(T=v*(.3*1.5)),!C||C<Math.abs(_)?(C=_,d=T/4):d=T/(2*Math.PI)*Math.asin(_/C),g<1?-.5*(C*Math.pow(2,10*(g-=1))*Math.sin((g*v-d)*(2*Math.PI)/T))+f:C*Math.pow(2,-10*(g-=1))*Math.sin((g*v-d)*(2*Math.PI)/T)*.5+_+f)},BounceEaseOut(g,f,_,v){return(g/=v)<1/2.75?_*(7.5625*g*g)+f:g<2/2.75?_*(7.5625*(g-=1.5/2.75)*g+.75)+f:g<2.5/2.75?_*(7.5625*(g-=2.25/2.75)*g+.9375)+f:_*(7.5625*(g-=2.625/2.75)*g+.984375)+f},BounceEaseIn(g,f,_,v){return _-e.Easings.BounceEaseOut(v-g,0,_,v)+f},BounceEaseInOut(g,f,_,v){return g<v/2?e.Easings.BounceEaseIn(g*2,0,_,v)*.5+f:e.Easings.BounceEaseOut(g*2-v,0,_,v)*.5+_*.5+f},EaseIn(g,f,_,v){return _*(g/=v)*g+f},EaseOut(g,f,_,v){return-_*(g/=v)*(g-2)+f},EaseInOut(g,f,_,v){return(g/=v/2)<1?_/2*g*g+f:-_/2*(--g*(g-2)-1)+f},StrongEaseIn(g,f,_,v){return _*(g/=v)*g*g*g*g+f},StrongEaseOut(g,f,_,v){return _*((g=g/v-1)*g*g*g*g+1)+f},StrongEaseInOut(g,f,_,v){return(g/=v/2)<1?_/2*g*g*g*g*g+f:_/2*((g-=2)*g*g*g*g+2)+f},Linear(g,f,_,v){return _*g/v+f}}})(Xl);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Konva=void 0;const t=lt,i=Mt,n=Rt,s=hi,r=jl,o=mn,a=ls,l=Gi,h=os,c=It,u=Ii,p=Xl,g=Me,f=ue;e.Konva=i.Util._assign(t.Konva,{Util:i.Util,Transform:i.Transform,Node:n.Node,Container:s.Container,Stage:r.Stage,stages:r.stages,Layer:o.Layer,FastLayer:a.FastLayer,Group:l.Group,DD:h.DD,Shape:c.Shape,shapes:c.shapes,Animation:u.Animation,Tween:p.Tween,Easings:p.Easings,Context:g.Context,Canvas:f.Canvas}),e.default=e.Konva})($l);var cs={};Object.defineProperty(cs,"__esModule",{value:!0});cs.Arc=void 0;const hs=ct,Vu=It,ha=lt,ds=Q,Wu=lt;class Le extends Vu.Shape{_sceneFunc(t){const i=ha.Konva.getAngle(this.angle()),n=this.clockwise();t.beginPath(),t.arc(0,0,this.outerRadius(),0,i,n),t.arc(0,0,this.innerRadius(),i,0,!n),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}getSelfRect(){const t=this.innerRadius(),i=this.outerRadius(),n=this.clockwise(),s=ha.Konva.getAngle(n?360-this.angle():this.angle()),r=Math.cos(Math.min(s,Math.PI)),o=1,a=Math.sin(Math.min(Math.max(Math.PI,s),3*Math.PI/2)),l=Math.sin(Math.min(s,Math.PI/2)),h=r*(r>0?t:i),c=o*i,u=a*(a>0?t:i),p=l*(l>0?i:t);return{x:h,y:n?-1*p:u,width:c-h,height:p-u}}}cs.Arc=Le;Le.prototype._centroid=!0;Le.prototype.className="Arc";Le.prototype._attrsAffectingSize=["innerRadius","outerRadius","angle","clockwise"];(0,Wu._registerNode)(Le);hs.Factory.addGetterSetter(Le,"innerRadius",0,(0,ds.getNumberValidator)());hs.Factory.addGetterSetter(Le,"outerRadius",0,(0,ds.getNumberValidator)());hs.Factory.addGetterSetter(Le,"angle",0,(0,ds.getNumberValidator)());hs.Factory.addGetterSetter(Le,"clockwise",!1,(0,ds.getBooleanValidator)());var fs={},_n={};Object.defineProperty(_n,"__esModule",{value:!0});_n.Line=void 0;const us=ct,ju=lt,zu=It,ql=Q;function kr(e,t,i,n,s,r,o){const a=Math.sqrt(Math.pow(i-e,2)+Math.pow(n-t,2)),l=Math.sqrt(Math.pow(s-i,2)+Math.pow(r-n,2)),h=o*a/(a+l),c=o*l/(a+l),u=i-h*(s-e),p=n-h*(r-t),g=i+c*(s-e),f=n+c*(r-t);return[u,p,g,f]}function da(e,t){const i=e.length,n=[];for(let s=2;s<i-2;s+=2){const r=kr(e[s-2],e[s-1],e[s],e[s+1],e[s+2],e[s+3],t);isNaN(r[0])||(n.push(r[0]),n.push(r[1]),n.push(e[s]),n.push(e[s+1]),n.push(r[2]),n.push(r[3]))}return n}class Je extends zu.Shape{constructor(t){super(t),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(t){const i=this.points(),n=i.length,s=this.tension(),r=this.closed(),o=this.bezier();if(!n)return;let a=0;if(t.beginPath(),t.moveTo(i[0],i[1]),s!==0&&n>4){const l=this.getTensionPoints(),h=l.length;for(a=r?0:4,r||t.quadraticCurveTo(l[0],l[1],l[2],l[3]);a<h-2;)t.bezierCurveTo(l[a++],l[a++],l[a++],l[a++],l[a++],l[a++]);r||t.quadraticCurveTo(l[h-2],l[h-1],i[n-2],i[n-1])}else if(o)for(a=2;a<n;)t.bezierCurveTo(i[a++],i[a++],i[a++],i[a++],i[a++],i[a++]);else for(a=2;a<n;a+=2)t.lineTo(i[a],i[a+1]);r?(t.closePath(),t.fillStrokeShape(this)):t.strokeShape(this)}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():da(this.points(),this.tension())}_getTensionPointsClosed(){const t=this.points(),i=t.length,n=this.tension(),s=kr(t[i-2],t[i-1],t[0],t[1],t[2],t[3],n),r=kr(t[i-4],t[i-3],t[i-2],t[i-1],t[0],t[1],n),o=da(t,n);return[s[2],s[3]].concat(o).concat([r[0],r[1],t[i-2],t[i-1],r[2],r[3],s[0],s[1],t[0],t[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let t=this.points();if(t.length<4)return{x:t[0]||0,y:t[1]||0,width:0,height:0};this.tension()!==0?t=[t[0],t[1],...this._getTensionPoints(),t[t.length-2],t[t.length-1]]:t=this.points();let i=t[0],n=t[0],s=t[1],r=t[1],o,a;for(let l=0;l<t.length/2;l++)o=t[l*2],a=t[l*2+1],i=Math.min(i,o),n=Math.max(n,o),s=Math.min(s,a),r=Math.max(r,a);return{x:i,y:s,width:n-i,height:r-s}}}_n.Line=Je;Je.prototype.className="Line";Je.prototype._attrsAffectingSize=["points","bezier","tension"];(0,ju._registerNode)(Je);us.Factory.addGetterSetter(Je,"closed",!1);us.Factory.addGetterSetter(Je,"bezier",!1);us.Factory.addGetterSetter(Je,"tension",0,(0,ql.getNumberValidator)());us.Factory.addGetterSetter(Je,"points",[],(0,ql.getNumberArrayValidator)());var Ui={},Jl={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.t2length=e.getQuadraticArcLength=e.getCubicArcLength=e.binomialCoefficients=e.cValues=e.tValues=void 0,e.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],e.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],e.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]];const t=(o,a,l)=>{let h,c;const p=l/2;h=0;for(let g=0;g<20;g++)c=p*e.tValues[20][g]+p,h+=e.cValues[20][g]*n(o,a,c);return p*h};e.getCubicArcLength=t;const i=(o,a,l)=>{l===void 0&&(l=1);const h=o[0]-2*o[1]+o[2],c=a[0]-2*a[1]+a[2],u=2*o[1]-2*o[0],p=2*a[1]-2*a[0],g=4*(h*h+c*c),f=4*(h*u+c*p),_=u*u+p*p;if(g===0)return l*Math.sqrt(Math.pow(o[2]-o[0],2)+Math.pow(a[2]-a[0],2));const v=f/(2*g),C=_/g,T=l+v,d=C-v*v,m=T*T+d>0?Math.sqrt(T*T+d):0,S=v*v+d>0?Math.sqrt(v*v+d):0,P=v+Math.sqrt(v*v+d)!==0?d*Math.log(Math.abs((T+m)/(v+S))):0;return Math.sqrt(g)/2*(T*m-v*S+P)};e.getQuadraticArcLength=i;function n(o,a,l){const h=s(1,l,o),c=s(1,l,a),u=h*h+c*c;return Math.sqrt(u)}const s=(o,a,l)=>{const h=l.length-1;let c,u;if(h===0)return 0;if(o===0){u=0;for(let p=0;p<=h;p++)u+=e.binomialCoefficients[h][p]*Math.pow(1-a,h-p)*Math.pow(a,p)*l[p];return u}else{c=new Array(h);for(let p=0;p<h;p++)c[p]=h*(l[p+1]-l[p]);return s(o-1,a,c)}},r=(o,a,l)=>{let h=1,c=o/a,u=(o-l(c))/a,p=0;for(;h>.001;){const g=l(c+u),f=Math.abs(o-g)/a;if(f<h)h=f,c+=u;else{const _=l(c-u),v=Math.abs(o-_)/a;v<h?(h=v,c-=u):u/=2}if(p++,p>500)break}return c};e.t2length=r})(Jl);Object.defineProperty(Ui,"__esModule",{value:!0});Ui.Path=void 0;const Ku=ct,Yu=lt,Xu=It,Ci=Jl;class Gt extends Xu.Shape{constructor(t){super(t),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=Gt.parsePathData(this.data()),this.pathLength=Gt.getPathLength(this.dataArray)}_sceneFunc(t){const i=this.dataArray;t.beginPath();let n=!1;for(let s=0;s<i.length;s++){const r=i[s].command,o=i[s].points;switch(r){case"L":t.lineTo(o[0],o[1]);break;case"M":t.moveTo(o[0],o[1]);break;case"C":t.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5]);break;case"Q":t.quadraticCurveTo(o[0],o[1],o[2],o[3]);break;case"A":const a=o[0],l=o[1],h=o[2],c=o[3],u=o[4],p=o[5],g=o[6],f=o[7],_=h>c?h:c,v=h>c?1:h/c,C=h>c?c/h:1;t.translate(a,l),t.rotate(g),t.scale(v,C),t.arc(0,0,_,u,u+p,1-f),t.scale(1/v,1/C),t.rotate(-g),t.translate(-a,-l);break;case"z":n=!0,t.closePath();break}}!n&&!this.hasFill()?t.strokeShape(this):t.fillStrokeShape(this)}getSelfRect(){let t=[];this.dataArray.forEach(function(l){if(l.command==="A"){const h=l.points[4],c=l.points[5],u=l.points[4]+c;let p=Math.PI/180;if(Math.abs(h-u)<p&&(p=Math.abs(h-u)),c<0)for(let g=h-p;g>u;g-=p){const f=Gt.getPointOnEllipticalArc(l.points[0],l.points[1],l.points[2],l.points[3],g,0);t.push(f.x,f.y)}else for(let g=h+p;g<u;g+=p){const f=Gt.getPointOnEllipticalArc(l.points[0],l.points[1],l.points[2],l.points[3],g,0);t.push(f.x,f.y)}}else if(l.command==="C")for(let h=0;h<=1;h+=.01){const c=Gt.getPointOnCubicBezier(h,l.start.x,l.start.y,l.points[0],l.points[1],l.points[2],l.points[3],l.points[4],l.points[5]);t.push(c.x,c.y)}else t=t.concat(l.points)});let i=t[0],n=t[0],s=t[1],r=t[1],o,a;for(let l=0;l<t.length/2;l++)o=t[l*2],a=t[l*2+1],isNaN(o)||(i=Math.min(i,o),n=Math.max(n,o)),isNaN(a)||(s=Math.min(s,a),r=Math.max(r,a));return{x:i,y:s,width:n-i,height:r-s}}getLength(){return this.pathLength}getPointAtLength(t){return Gt.getPointAtLengthOfDataArray(t,this.dataArray)}static getLineLength(t,i,n,s){return Math.sqrt((n-t)*(n-t)+(s-i)*(s-i))}static getPathLength(t){let i=0;for(let n=0;n<t.length;++n)i+=t[n].pathLength;return i}static getPointAtLengthOfDataArray(t,i){let n,s=0,r=i.length;if(!r)return null;for(;s<r&&t>i[s].pathLength;)t-=i[s].pathLength,++s;if(s===r)return n=i[s-1].points.slice(-2),{x:n[0],y:n[1]};if(t<.01)return i[s].command==="M"?(n=i[s].points.slice(0,2),{x:n[0],y:n[1]}):{x:i[s].start.x,y:i[s].start.y};const o=i[s],a=o.points;switch(o.command){case"L":return Gt.getPointOnLine(t,o.start.x,o.start.y,a[0],a[1]);case"C":return Gt.getPointOnCubicBezier((0,Ci.t2length)(t,Gt.getPathLength(i),_=>(0,Ci.getCubicArcLength)([o.start.x,a[0],a[2],a[4]],[o.start.y,a[1],a[3],a[5]],_)),o.start.x,o.start.y,a[0],a[1],a[2],a[3],a[4],a[5]);case"Q":return Gt.getPointOnQuadraticBezier((0,Ci.t2length)(t,Gt.getPathLength(i),_=>(0,Ci.getQuadraticArcLength)([o.start.x,a[0],a[2]],[o.start.y,a[1],a[3]],_)),o.start.x,o.start.y,a[0],a[1],a[2],a[3]);case"A":const l=a[0],h=a[1],c=a[2],u=a[3],p=a[5],g=a[6];let f=a[4];return f+=p*t/o.pathLength,Gt.getPointOnEllipticalArc(l,h,c,u,f,g)}return null}static getPointOnLine(t,i,n,s,r,o,a){o=o??i,a=a??n;const l=this.getLineLength(i,n,s,r);if(l<1e-10)return{x:i,y:n};if(s===i)return{x:o,y:a+(r>n?t:-t)};const h=(r-n)/(s-i),c=Math.sqrt(t*t/(1+h*h))*(s<i?-1:1),u=h*c;if(Math.abs(a-n-h*(o-i))<1e-10)return{x:o+c,y:a+u};const p=((o-i)*(s-i)+(a-n)*(r-n))/(l*l),g=i+p*(s-i),f=n+p*(r-n),_=this.getLineLength(o,a,g,f),v=Math.sqrt(t*t-_*_),C=Math.sqrt(v*v/(1+h*h))*(s<i?-1:1),T=h*C;return{x:g+C,y:f+T}}static getPointOnCubicBezier(t,i,n,s,r,o,a,l,h){function c(v){return v*v*v}function u(v){return 3*v*v*(1-v)}function p(v){return 3*v*(1-v)*(1-v)}function g(v){return(1-v)*(1-v)*(1-v)}const f=l*c(t)+o*u(t)+s*p(t)+i*g(t),_=h*c(t)+a*u(t)+r*p(t)+n*g(t);return{x:f,y:_}}static getPointOnQuadraticBezier(t,i,n,s,r,o,a){function l(g){return g*g}function h(g){return 2*g*(1-g)}function c(g){return(1-g)*(1-g)}const u=o*l(t)+s*h(t)+i*c(t),p=a*l(t)+r*h(t)+n*c(t);return{x:u,y:p}}static getPointOnEllipticalArc(t,i,n,s,r,o){const a=Math.cos(o),l=Math.sin(o),h={x:n*Math.cos(r),y:s*Math.sin(r)};return{x:t+(h.x*a-h.y*l),y:i+(h.x*l+h.y*a)}}static parsePathData(t){if(!t)return[];let i=t;const n=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];i=i.replace(new RegExp(" ","g"),",");for(let u=0;u<n.length;u++)i=i.replace(new RegExp(n[u],"g"),"|"+n[u]);const s=i.split("|"),r=[],o=[];let a=0,l=0;const h=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let c;for(let u=1;u<s.length;u++){let p=s[u],g=p.charAt(0);for(p=p.slice(1),o.length=0;c=h.exec(p);)o.push(c[0]);const f=[];for(let _=0,v=o.length;_<v;_++){if(o[_]==="00"){f.push(0,0);continue}const C=parseFloat(o[_]);isNaN(C)?f.push(0):f.push(C)}for(;f.length>0&&!isNaN(f[0]);){let _="",v=[];const C=a,T=l;let d,m,S,P,F,y,E,x,R,k;switch(g){case"l":a+=f.shift(),l+=f.shift(),_="L",v.push(a,l);break;case"L":a=f.shift(),l=f.shift(),v.push(a,l);break;case"m":const L=f.shift(),j=f.shift();if(a+=L,l+=j,_="M",r.length>2&&r[r.length-1].command==="z"){for(let V=r.length-2;V>=0;V--)if(r[V].command==="M"){a=r[V].points[0]+L,l=r[V].points[1]+j;break}}v.push(a,l),g="l";break;case"M":a=f.shift(),l=f.shift(),_="M",v.push(a,l),g="L";break;case"h":a+=f.shift(),_="L",v.push(a,l);break;case"H":a=f.shift(),_="L",v.push(a,l);break;case"v":l+=f.shift(),_="L",v.push(a,l);break;case"V":l=f.shift(),_="L",v.push(a,l);break;case"C":v.push(f.shift(),f.shift(),f.shift(),f.shift()),a=f.shift(),l=f.shift(),v.push(a,l);break;case"c":v.push(a+f.shift(),l+f.shift(),a+f.shift(),l+f.shift()),a+=f.shift(),l+=f.shift(),_="C",v.push(a,l);break;case"S":m=a,S=l,d=r[r.length-1],d.command==="C"&&(m=a+(a-d.points[2]),S=l+(l-d.points[3])),v.push(m,S,f.shift(),f.shift()),a=f.shift(),l=f.shift(),_="C",v.push(a,l);break;case"s":m=a,S=l,d=r[r.length-1],d.command==="C"&&(m=a+(a-d.points[2]),S=l+(l-d.points[3])),v.push(m,S,a+f.shift(),l+f.shift()),a+=f.shift(),l+=f.shift(),_="C",v.push(a,l);break;case"Q":v.push(f.shift(),f.shift()),a=f.shift(),l=f.shift(),v.push(a,l);break;case"q":v.push(a+f.shift(),l+f.shift()),a+=f.shift(),l+=f.shift(),_="Q",v.push(a,l);break;case"T":m=a,S=l,d=r[r.length-1],d.command==="Q"&&(m=a+(a-d.points[0]),S=l+(l-d.points[1])),a=f.shift(),l=f.shift(),_="Q",v.push(m,S,a,l);break;case"t":m=a,S=l,d=r[r.length-1],d.command==="Q"&&(m=a+(a-d.points[0]),S=l+(l-d.points[1])),a+=f.shift(),l+=f.shift(),_="Q",v.push(m,S,a,l);break;case"A":P=f.shift(),F=f.shift(),y=f.shift(),E=f.shift(),x=f.shift(),R=a,k=l,a=f.shift(),l=f.shift(),_="A",v=this.convertEndpointToCenterParameterization(R,k,a,l,E,x,P,F,y);break;case"a":P=f.shift(),F=f.shift(),y=f.shift(),E=f.shift(),x=f.shift(),R=a,k=l,a+=f.shift(),l+=f.shift(),_="A",v=this.convertEndpointToCenterParameterization(R,k,a,l,E,x,P,F,y);break}r.push({command:_||g,points:v,start:{x:C,y:T},pathLength:this.calcLength(C,T,_||g,v)})}(g==="z"||g==="Z")&&r.push({command:"z",points:[],start:void 0,pathLength:0})}return r}static calcLength(t,i,n,s){let r,o,a,l;const h=Gt;switch(n){case"L":return h.getLineLength(t,i,s[0],s[1]);case"C":return(0,Ci.getCubicArcLength)([t,s[0],s[2],s[4]],[i,s[1],s[3],s[5]],1);case"Q":return(0,Ci.getQuadraticArcLength)([t,s[0],s[2]],[i,s[1],s[3]],1);case"A":r=0;const c=s[4],u=s[5],p=s[4]+u;let g=Math.PI/180;if(Math.abs(c-p)<g&&(g=Math.abs(c-p)),o=h.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],c,0),u<0)for(l=c-g;l>p;l-=g)a=h.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],l,0),r+=h.getLineLength(o.x,o.y,a.x,a.y),o=a;else for(l=c+g;l<p;l+=g)a=h.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],l,0),r+=h.getLineLength(o.x,o.y,a.x,a.y),o=a;return a=h.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],p,0),r+=h.getLineLength(o.x,o.y,a.x,a.y),r}return 0}static convertEndpointToCenterParameterization(t,i,n,s,r,o,a,l,h){const c=h*(Math.PI/180),u=Math.cos(c)*(t-n)/2+Math.sin(c)*(i-s)/2,p=-1*Math.sin(c)*(t-n)/2+Math.cos(c)*(i-s)/2,g=u*u/(a*a)+p*p/(l*l);g>1&&(a*=Math.sqrt(g),l*=Math.sqrt(g));let f=Math.sqrt((a*a*(l*l)-a*a*(p*p)-l*l*(u*u))/(a*a*(p*p)+l*l*(u*u)));r===o&&(f*=-1),isNaN(f)&&(f=0);const _=f*a*p/l,v=f*-l*u/a,C=(t+n)/2+Math.cos(c)*_-Math.sin(c)*v,T=(i+s)/2+Math.sin(c)*_+Math.cos(c)*v,d=function(x){return Math.sqrt(x[0]*x[0]+x[1]*x[1])},m=function(x,R){return(x[0]*R[0]+x[1]*R[1])/(d(x)*d(R))},S=function(x,R){return(x[0]*R[1]<x[1]*R[0]?-1:1)*Math.acos(m(x,R))},P=S([1,0],[(u-_)/a,(p-v)/l]),F=[(u-_)/a,(p-v)/l],y=[(-1*u-_)/a,(-1*p-v)/l];let E=S(F,y);return m(F,y)<=-1&&(E=Math.PI),m(F,y)>=1&&(E=0),o===0&&E>0&&(E=E-2*Math.PI),o===1&&E<0&&(E=E+2*Math.PI),[C,T,a,l,P,E,c,o]}}Ui.Path=Gt;Gt.prototype.className="Path";Gt.prototype._attrsAffectingSize=["data"];(0,Yu._registerNode)(Gt);Ku.Factory.addGetterSetter(Gt,"data");Object.defineProperty(fs,"__esModule",{value:!0});fs.Arrow=void 0;const gs=ct,qu=_n,Ql=Q,Ju=lt,fa=Ui;class fi extends qu.Line{_sceneFunc(t){super._sceneFunc(t);const i=Math.PI*2,n=this.points();let s=n;const r=this.tension()!==0&&n.length>4;r&&(s=this.getTensionPoints());const o=this.pointerLength(),a=n.length;let l,h;if(r){const p=[s[s.length-4],s[s.length-3],s[s.length-2],s[s.length-1],n[a-2],n[a-1]],g=fa.Path.calcLength(s[s.length-4],s[s.length-3],"C",p),f=fa.Path.getPointOnQuadraticBezier(Math.min(1,1-o/g),p[0],p[1],p[2],p[3],p[4],p[5]);l=n[a-2]-f.x,h=n[a-1]-f.y}else l=n[a-2]-n[a-4],h=n[a-1]-n[a-3];const c=(Math.atan2(h,l)+i)%i,u=this.pointerWidth();this.pointerAtEnding()&&(t.save(),t.beginPath(),t.translate(n[a-2],n[a-1]),t.rotate(c),t.moveTo(0,0),t.lineTo(-o,u/2),t.lineTo(-o,-u/2),t.closePath(),t.restore(),this.__fillStroke(t)),this.pointerAtBeginning()&&(t.save(),t.beginPath(),t.translate(n[0],n[1]),r?(l=(s[0]+s[2])/2-n[0],h=(s[1]+s[3])/2-n[1]):(l=n[2]-n[0],h=n[3]-n[1]),t.rotate((Math.atan2(-h,-l)+i)%i),t.moveTo(0,0),t.lineTo(-o,u/2),t.lineTo(-o,-u/2),t.closePath(),t.restore(),this.__fillStroke(t))}__fillStroke(t){const i=this.dashEnabled();i&&(this.attrs.dashEnabled=!1,t.setLineDash([])),t.fillStrokeShape(this),i&&(this.attrs.dashEnabled=!0)}getSelfRect(){const t=super.getSelfRect(),i=this.pointerWidth()/2;return{x:t.x,y:t.y-i,width:t.width,height:t.height+i*2}}}fs.Arrow=fi;fi.prototype.className="Arrow";(0,Ju._registerNode)(fi);gs.Factory.addGetterSetter(fi,"pointerLength",10,(0,Ql.getNumberValidator)());gs.Factory.addGetterSetter(fi,"pointerWidth",10,(0,Ql.getNumberValidator)());gs.Factory.addGetterSetter(fi,"pointerAtBeginning",!1);gs.Factory.addGetterSetter(fi,"pointerAtEnding",!0);var ps={};Object.defineProperty(ps,"__esModule",{value:!0});ps.Circle=void 0;const Qu=ct,Zu=It,t0=Q,e0=lt;class Bi extends Zu.Shape{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(t){this.radius()!==t/2&&this.radius(t/2)}setHeight(t){this.radius()!==t/2&&this.radius(t/2)}}ps.Circle=Bi;Bi.prototype._centroid=!0;Bi.prototype.className="Circle";Bi.prototype._attrsAffectingSize=["radius"];(0,e0._registerNode)(Bi);Qu.Factory.addGetterSetter(Bi,"radius",0,(0,t0.getNumberValidator)());var ms={};Object.defineProperty(ms,"__esModule",{value:!0});ms.Ellipse=void 0;const fo=ct,i0=It,Zl=Q,n0=lt;class Qe extends i0.Shape{_sceneFunc(t){const i=this.radiusX(),n=this.radiusY();t.beginPath(),t.save(),i!==n&&t.scale(1,n/i),t.arc(0,0,i,0,Math.PI*2,!1),t.restore(),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(t){this.radiusX(t/2)}setHeight(t){this.radiusY(t/2)}}ms.Ellipse=Qe;Qe.prototype.className="Ellipse";Qe.prototype._centroid=!0;Qe.prototype._attrsAffectingSize=["radiusX","radiusY"];(0,n0._registerNode)(Qe);fo.Factory.addComponentsGetterSetter(Qe,"radius",["x","y"]);fo.Factory.addGetterSetter(Qe,"radiusX",0,(0,Zl.getNumberValidator)());fo.Factory.addGetterSetter(Qe,"radiusY",0,(0,Zl.getNumberValidator)());var _s={};Object.defineProperty(_s,"__esModule",{value:!0});_s.Image=void 0;const dr=Mt,ui=ct,s0=It,r0=lt,yn=Q;class ae extends s0.Shape{constructor(t){super(t),this._loadListener=()=>{this._requestDraw()},this.on("imageChange.konva",i=>{this._removeImageLoad(i.oldVal),this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const t=this.image();t&&t.complete||t&&t.readyState===4||t&&t.addEventListener&&t.addEventListener("load",this._loadListener)}_removeImageLoad(t){t&&t.removeEventListener&&t.removeEventListener("load",this._loadListener)}destroy(){return this._removeImageLoad(this.image()),super.destroy(),this}_useBufferCanvas(){const t=!!this.cornerRadius(),i=this.hasShadow();return t&&i?!0:super._useBufferCanvas(!0)}_sceneFunc(t){const i=this.getWidth(),n=this.getHeight(),s=this.cornerRadius(),r=this.attrs.image;let o;if(r){const a=this.attrs.cropWidth,l=this.attrs.cropHeight;a&&l?o=[r,this.cropX(),this.cropY(),a,l,0,0,i,n]:o=[r,0,0,i,n]}(this.hasFill()||this.hasStroke()||s)&&(t.beginPath(),s?dr.Util.drawRoundedRectPath(t,i,n,s):t.rect(0,0,i,n),t.closePath(),t.fillStrokeShape(this)),r&&(s&&t.clip(),t.drawImage.apply(t,o))}_hitFunc(t){const i=this.width(),n=this.height(),s=this.cornerRadius();t.beginPath(),s?dr.Util.drawRoundedRectPath(t,i,n,s):t.rect(0,0,i,n),t.closePath(),t.fillStrokeShape(this)}getWidth(){var t,i;return(t=this.attrs.width)!==null&&t!==void 0?t:(i=this.image())===null||i===void 0?void 0:i.width}getHeight(){var t,i;return(t=this.attrs.height)!==null&&t!==void 0?t:(i=this.image())===null||i===void 0?void 0:i.height}static fromURL(t,i,n=null){const s=dr.Util.createImageElement();s.onload=function(){const r=new ae({image:s});i(r)},s.onerror=n,s.crossOrigin="Anonymous",s.src=t}}_s.Image=ae;ae.prototype.className="Image";(0,r0._registerNode)(ae);ui.Factory.addGetterSetter(ae,"cornerRadius",0,(0,yn.getNumberOrArrayOfNumbersValidator)(4));ui.Factory.addGetterSetter(ae,"image");ui.Factory.addComponentsGetterSetter(ae,"crop",["x","y","width","height"]);ui.Factory.addGetterSetter(ae,"cropX",0,(0,yn.getNumberValidator)());ui.Factory.addGetterSetter(ae,"cropY",0,(0,yn.getNumberValidator)());ui.Factory.addGetterSetter(ae,"cropWidth",0,(0,yn.getNumberValidator)());ui.Factory.addGetterSetter(ae,"cropHeight",0,(0,yn.getNumberValidator)());var Fi={};Object.defineProperty(Fi,"__esModule",{value:!0});Fi.Tag=Fi.Label=void 0;const ys=ct,o0=It,a0=Gi,uo=Q,tc=lt,ec=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],l0="Change.konva",c0="none",Nr="up",Or="right",Dr="down",Lr="left",h0=ec.length;class go extends a0.Group{constructor(t){super(t),this.on("add.konva",function(i){this._addListeners(i.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(t){let i=this,n;const s=function(){i._sync()};for(n=0;n<h0;n++)t.on(ec[n]+l0,s)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let t=this.getText(),i=this.getTag(),n,s,r,o,a,l,h;if(t&&i){switch(n=t.width(),s=t.height(),r=i.pointerDirection(),o=i.pointerWidth(),h=i.pointerHeight(),a=0,l=0,r){case Nr:a=n/2,l=-1*h;break;case Or:a=n+o,l=s/2;break;case Dr:a=n/2,l=s+h;break;case Lr:a=-1*o,l=s/2;break}i.setAttrs({x:-1*a,y:-1*l,width:n,height:s}),t.setAttrs({x:-1*a,y:-1*l})}}}Fi.Label=go;go.prototype.className="Label";(0,tc._registerNode)(go);class gi extends o0.Shape{_sceneFunc(t){const i=this.width(),n=this.height(),s=this.pointerDirection(),r=this.pointerWidth(),o=this.pointerHeight(),a=this.cornerRadius();let l=0,h=0,c=0,u=0;typeof a=="number"?l=h=c=u=Math.min(a,i/2,n/2):(l=Math.min(a[0]||0,i/2,n/2),h=Math.min(a[1]||0,i/2,n/2),u=Math.min(a[2]||0,i/2,n/2),c=Math.min(a[3]||0,i/2,n/2)),t.beginPath(),t.moveTo(l,0),s===Nr&&(t.lineTo((i-r)/2,0),t.lineTo(i/2,-1*o),t.lineTo((i+r)/2,0)),t.lineTo(i-h,0),t.arc(i-h,h,h,Math.PI*3/2,0,!1),s===Or&&(t.lineTo(i,(n-o)/2),t.lineTo(i+r,n/2),t.lineTo(i,(n+o)/2)),t.lineTo(i,n-u),t.arc(i-u,n-u,u,0,Math.PI/2,!1),s===Dr&&(t.lineTo((i+r)/2,n),t.lineTo(i/2,n+o),t.lineTo((i-r)/2,n)),t.lineTo(c,n),t.arc(c,n-c,c,Math.PI/2,Math.PI,!1),s===Lr&&(t.lineTo(0,(n+o)/2),t.lineTo(-1*r,n/2),t.lineTo(0,(n-o)/2)),t.lineTo(0,l),t.arc(l,l,l,Math.PI,Math.PI*3/2,!1),t.closePath(),t.fillStrokeShape(this)}getSelfRect(){let t=0,i=0,n=this.pointerWidth(),s=this.pointerHeight(),r=this.pointerDirection(),o=this.width(),a=this.height();return r===Nr?(i-=s,a+=s):r===Dr?a+=s:r===Lr?(t-=n*1.5,o+=n):r===Or&&(o+=n*1.5),{x:t,y:i,width:o,height:a}}}Fi.Tag=gi;gi.prototype.className="Tag";(0,tc._registerNode)(gi);ys.Factory.addGetterSetter(gi,"pointerDirection",c0);ys.Factory.addGetterSetter(gi,"pointerWidth",0,(0,uo.getNumberValidator)());ys.Factory.addGetterSetter(gi,"pointerHeight",0,(0,uo.getNumberValidator)());ys.Factory.addGetterSetter(gi,"cornerRadius",0,(0,uo.getNumberOrArrayOfNumbersValidator)(4));var vn={};Object.defineProperty(vn,"__esModule",{value:!0});vn.Rect=void 0;const d0=ct,f0=It,u0=lt,g0=Mt,p0=Q;class vs extends f0.Shape{_sceneFunc(t){const i=this.cornerRadius(),n=this.width(),s=this.height();t.beginPath(),i?g0.Util.drawRoundedRectPath(t,n,s,i):t.rect(0,0,n,s),t.closePath(),t.fillStrokeShape(this)}}vn.Rect=vs;vs.prototype.className="Rect";(0,u0._registerNode)(vs);d0.Factory.addGetterSetter(vs,"cornerRadius",0,(0,p0.getNumberOrArrayOfNumbersValidator)(4));var bs={};Object.defineProperty(bs,"__esModule",{value:!0});bs.RegularPolygon=void 0;const ic=ct,m0=It,nc=Q,_0=lt;class pi extends m0.Shape{_sceneFunc(t){const i=this._getPoints();t.beginPath(),t.moveTo(i[0].x,i[0].y);for(let n=1;n<i.length;n++)t.lineTo(i[n].x,i[n].y);t.closePath(),t.fillStrokeShape(this)}_getPoints(){const t=this.attrs.sides,i=this.attrs.radius||0,n=[];for(let s=0;s<t;s++)n.push({x:i*Math.sin(s*2*Math.PI/t),y:-1*i*Math.cos(s*2*Math.PI/t)});return n}getSelfRect(){const t=this._getPoints();let i=t[0].x,n=t[0].y,s=t[0].x,r=t[0].y;return t.forEach(o=>{i=Math.min(i,o.x),n=Math.max(n,o.x),s=Math.min(s,o.y),r=Math.max(r,o.y)}),{x:i,y:s,width:n-i,height:r-s}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(t){this.radius(t/2)}setHeight(t){this.radius(t/2)}}bs.RegularPolygon=pi;pi.prototype.className="RegularPolygon";pi.prototype._centroid=!0;pi.prototype._attrsAffectingSize=["radius"];(0,_0._registerNode)(pi);ic.Factory.addGetterSetter(pi,"radius",0,(0,nc.getNumberValidator)());ic.Factory.addGetterSetter(pi,"sides",0,(0,nc.getNumberValidator)());var Ss={};Object.defineProperty(Ss,"__esModule",{value:!0});Ss.Ring=void 0;const sc=ct,y0=It,rc=Q,v0=lt,ua=Math.PI*2;class mi extends y0.Shape{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.innerRadius(),0,ua,!1),t.moveTo(this.outerRadius(),0),t.arc(0,0,this.outerRadius(),ua,0,!0),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}}Ss.Ring=mi;mi.prototype.className="Ring";mi.prototype._centroid=!0;mi.prototype._attrsAffectingSize=["innerRadius","outerRadius"];(0,v0._registerNode)(mi);sc.Factory.addGetterSetter(mi,"innerRadius",0,(0,rc.getNumberValidator)());sc.Factory.addGetterSetter(mi,"outerRadius",0,(0,rc.getNumberValidator)());var Cs={};Object.defineProperty(Cs,"__esModule",{value:!0});Cs.Sprite=void 0;const _i=ct,b0=It,S0=Ii,oc=Q,C0=lt;class xe extends b0.Shape{constructor(t){super(t),this._updated=!0,this.anim=new S0.Animation(()=>{const i=this._updated;return this._updated=!1,i}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(t){const i=this.animation(),n=this.frameIndex(),s=n*4,r=this.animations()[i],o=this.frameOffsets(),a=r[s+0],l=r[s+1],h=r[s+2],c=r[s+3],u=this.image();if((this.hasFill()||this.hasStroke())&&(t.beginPath(),t.rect(0,0,h,c),t.closePath(),t.fillStrokeShape(this)),u)if(o){const p=o[i],g=n*2;t.drawImage(u,a,l,h,c,p[g+0],p[g+1],h,c)}else t.drawImage(u,a,l,h,c,0,0,h,c)}_hitFunc(t){const i=this.animation(),n=this.frameIndex(),s=n*4,r=this.animations()[i],o=this.frameOffsets(),a=r[s+2],l=r[s+3];if(t.beginPath(),o){const h=o[i],c=n*2;t.rect(h[c+0],h[c+1],a,l)}else t.rect(0,0,a,l);t.closePath(),t.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const t=this;this.interval=setInterval(function(){t._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const t=this.getLayer();this.anim.setLayers(t),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const t=this.frameIndex(),i=this.animation(),n=this.animations(),s=n[i],r=s.length/4;t<r-1?this.frameIndex(t+1):this.frameIndex(0)}}Cs.Sprite=xe;xe.prototype.className="Sprite";(0,C0._registerNode)(xe);_i.Factory.addGetterSetter(xe,"animation");_i.Factory.addGetterSetter(xe,"animations");_i.Factory.addGetterSetter(xe,"frameOffsets");_i.Factory.addGetterSetter(xe,"image");_i.Factory.addGetterSetter(xe,"frameIndex",0,(0,oc.getNumberValidator)());_i.Factory.addGetterSetter(xe,"frameRate",17,(0,oc.getNumberValidator)());_i.Factory.backCompat(xe,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});var ws={};Object.defineProperty(ws,"__esModule",{value:!0});ws.Star=void 0;const po=ct,w0=It,mo=Q,x0=lt;class Ze extends w0.Shape{_sceneFunc(t){const i=this.innerRadius(),n=this.outerRadius(),s=this.numPoints();t.beginPath(),t.moveTo(0,0-n);for(let r=1;r<s*2;r++){const o=r%2===0?n:i,a=o*Math.sin(r*Math.PI/s),l=-1*o*Math.cos(r*Math.PI/s);t.lineTo(a,l)}t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}}ws.Star=Ze;Ze.prototype.className="Star";Ze.prototype._centroid=!0;Ze.prototype._attrsAffectingSize=["innerRadius","outerRadius"];(0,x0._registerNode)(Ze);po.Factory.addGetterSetter(Ze,"numPoints",5,(0,mo.getNumberValidator)());po.Factory.addGetterSetter(Ze,"innerRadius",0,(0,mo.getNumberValidator)());po.Factory.addGetterSetter(Ze,"outerRadius",0,(0,mo.getNumberValidator)());var $i={};Object.defineProperty($i,"__esModule",{value:!0});$i.Text=void 0;$i.stringToArray=oi;const Gr=Mt,Kt=ct,T0=It,fr=lt,ti=Q,P0=lt;function oi(e){return[...e].reduce((t,i,n,s)=>{if(new RegExp("\\p{Emoji}","u").test(i)){const r=s[n+1];r&&new RegExp("\\p{Emoji_Modifier}|\\u200D","u").test(r)?(t.push(i+r),s[n+1]=""):t.push(i)}else new RegExp("\\p{Regional_Indicator}{2}","u").test(i+(s[n+1]||""))?t.push(i+s[n+1]):n>0&&new RegExp("\\p{Mn}|\\p{Me}|\\p{Mc}","u").test(i)?t[t.length-1]+=i:i&&t.push(i);return t},[])}const wi="auto",A0="center",ac="inherit",ji="justify",E0="Change.konva",R0="2d",ga="-",lc="left",M0="text",F0="Text",k0="top",N0="bottom",pa="middle",cc="normal",O0="px ",Tn=" ",D0="right",ma="rtl",L0="word",G0="char",_a="none",ur="",hc=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],I0=hc.length;function U0(e){return e.split(",").map(t=>{t=t.trim();const i=t.indexOf(" ")>=0,n=t.indexOf('"')>=0||t.indexOf("'")>=0;return i&&!n&&(t=`"${t}"`),t}).join(", ")}let Pn;function gr(){return Pn||(Pn=Gr.Util.createCanvasElement().getContext(R0),Pn)}function B0(e){e.fillText(this._partialText,this._partialTextX,this._partialTextY)}function $0(e){e.setAttr("miterLimit",2),e.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function H0(e){return e=e||{},!e.fillLinearGradientColorStops&&!e.fillRadialGradientColorStops&&!e.fillPatternImage&&(e.fill=e.fill||"black"),e}class kt extends T0.Shape{constructor(t){super(H0(t)),this._partialTextX=0,this._partialTextY=0;for(let i=0;i<I0;i++)this.on(hc[i]+E0,this._setTextData);this._setTextData()}_sceneFunc(t){const i=this.textArr,n=i.length;if(!this.text())return;let s=this.padding(),r=this.fontSize(),o=this.lineHeight()*r,a=this.verticalAlign(),l=this.direction(),h=0,c=this.align(),u=this.getWidth(),p=this.letterSpacing(),g=this.fill(),f=this.textDecoration(),_=f.indexOf("underline")!==-1,v=f.indexOf("line-through")!==-1,C;l=l===ac?t.direction:l;let T=o/2,d=pa;if(fr.Konva._fixTextRendering){const m=this.measureSize("M");d="alphabetic",T=(m.fontBoundingBoxAscent-m.fontBoundingBoxDescent)/2+o/2}for(l===ma&&t.setAttr("direction",l),t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",d),t.setAttr("textAlign",lc),a===pa?h=(this.getHeight()-n*o-s*2)/2:a===N0&&(h=this.getHeight()-n*o-s*2),t.translate(s,h+s),C=0;C<n;C++){let m=0,S=0;const P=i[C],F=P.text,y=P.width,E=P.lastInParagraph;if(t.save(),c===D0?m+=u-y-s*2:c===A0&&(m+=(u-y-s*2)/2),_){t.save(),t.beginPath();const x=fr.Konva._fixTextRendering?Math.round(r/4):Math.round(r/2),R=m,k=T+S+x;t.moveTo(R,k);const L=c===ji&&!E?u-s*2:y;t.lineTo(R+Math.round(L),k),t.lineWidth=r/15;const j=this._getLinearGradient();t.strokeStyle=j||g,t.stroke(),t.restore()}if(v){t.save(),t.beginPath();const x=fr.Konva._fixTextRendering?-Math.round(r/4):0;t.moveTo(m,T+S+x);const R=c===ji&&!E?u-s*2:y;t.lineTo(m+Math.round(R),T+S+x),t.lineWidth=r/15;const k=this._getLinearGradient();t.strokeStyle=k||g,t.stroke(),t.restore()}if(l!==ma&&(p!==0||c===ji)){const x=F.split(" ").length-1,R=oi(F);for(let k=0;k<R.length;k++){const L=R[k];L===" "&&!E&&c===ji&&(m+=(u-s*2-y)/x),this._partialTextX=m,this._partialTextY=T+S,this._partialText=L,t.fillStrokeShape(this),m+=this.measureSize(L).width+p}}else p!==0&&t.setAttr("letterSpacing",`${p}px`),this._partialTextX=m,this._partialTextY=T+S,this._partialText=F,t.fillStrokeShape(this);t.restore(),n>1&&(T+=o)}}_hitFunc(t){const i=this.getWidth(),n=this.getHeight();t.beginPath(),t.rect(0,0,i,n),t.closePath(),t.fillStrokeShape(this)}setText(t){const i=Gr.Util._isString(t)?t:t==null?"":t+"";return this._setAttr(M0,i),this}getWidth(){return this.attrs.width===wi||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===wi||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return Gr.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(t){var i,n,s,r,o,a,l,h,c,u,p;let g=gr(),f=this.fontSize(),_;g.save(),g.font=this._getContextFont(),_=g.measureText(t),g.restore();const v=f/100;return{actualBoundingBoxAscent:(i=_.actualBoundingBoxAscent)!==null&&i!==void 0?i:71.58203125*v,actualBoundingBoxDescent:(n=_.actualBoundingBoxDescent)!==null&&n!==void 0?n:0,actualBoundingBoxLeft:(s=_.actualBoundingBoxLeft)!==null&&s!==void 0?s:-7.421875*v,actualBoundingBoxRight:(r=_.actualBoundingBoxRight)!==null&&r!==void 0?r:75.732421875*v,alphabeticBaseline:(o=_.alphabeticBaseline)!==null&&o!==void 0?o:0,emHeightAscent:(a=_.emHeightAscent)!==null&&a!==void 0?a:100*v,emHeightDescent:(l=_.emHeightDescent)!==null&&l!==void 0?l:-20*v,fontBoundingBoxAscent:(h=_.fontBoundingBoxAscent)!==null&&h!==void 0?h:91*v,fontBoundingBoxDescent:(c=_.fontBoundingBoxDescent)!==null&&c!==void 0?c:21*v,hangingBaseline:(u=_.hangingBaseline)!==null&&u!==void 0?u:72.80000305175781*v,ideographicBaseline:(p=_.ideographicBaseline)!==null&&p!==void 0?p:-21*v,width:_.width,height:f}}_getContextFont(){return this.fontStyle()+Tn+this.fontVariant()+Tn+(this.fontSize()+O0)+U0(this.fontFamily())}_addTextLine(t){this.align()===ji&&(t=t.trim());const n=this._getTextWidth(t);return this.textArr.push({text:t,width:n,lastInParagraph:!1})}_getTextWidth(t){const i=this.letterSpacing(),n=t.length;return gr().measureText(t).width+i*n}_setTextData(){let t=this.text().split(`
`),i=+this.fontSize(),n=0,s=this.lineHeight()*i,r=this.attrs.width,o=this.attrs.height,a=r!==wi&&r!==void 0,l=o!==wi&&o!==void 0,h=this.padding(),c=r-h*2,u=o-h*2,p=0,g=this.wrap(),f=g!==_a,_=g!==G0&&f,v=this.ellipsis();this.textArr=[],gr().font=this._getContextFont();const C=v?this._getTextWidth(ur):0;for(let T=0,d=t.length;T<d;++T){let m=t[T],S=this._getTextWidth(m);if(a&&S>c)for(;m.length>0;){let P=0,F=oi(m).length,y="",E=0;for(;P<F;){const x=P+F>>>1,R=oi(m),k=R.slice(0,x+1).join(""),L=this._getTextWidth(k);(v&&l&&p+s>u?L+C:L)<=c?(P=x+1,y=k,E=L):F=x}if(y){if(_){const k=oi(m),L=oi(y),j=k[L.length],V=j===Tn||j===ga;let Z;if(V&&E<=c)Z=L.length;else{const K=L.lastIndexOf(Tn),B=L.lastIndexOf(ga);Z=Math.max(K,B)+1}Z>0&&(P=Z,y=k.slice(0,P).join(""),E=this._getTextWidth(y))}if(y=y.trimRight(),this._addTextLine(y),n=Math.max(n,E),p+=s,this._shouldHandleEllipsis(p)){this._tryToAddEllipsisToLastLine();break}if(m=oi(m).slice(P).join("").trimLeft(),m.length>0&&(S=this._getTextWidth(m),S<=c)){this._addTextLine(m),p+=s,n=Math.max(n,S);break}}else break}else this._addTextLine(m),p+=s,n=Math.max(n,S),this._shouldHandleEllipsis(p)&&T<d-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),l&&p+s>u)break}this.textHeight=i,this.textWidth=n}_shouldHandleEllipsis(t){const i=+this.fontSize(),n=this.lineHeight()*i,s=this.attrs.height,r=s!==wi&&s!==void 0,o=this.padding(),a=s-o*2;return!(this.wrap()!==_a)||r&&t+n>a}_tryToAddEllipsisToLastLine(){const t=this.attrs.width,i=t!==wi&&t!==void 0,n=this.padding(),s=t-n*2,r=this.ellipsis(),o=this.textArr[this.textArr.length-1];!o||!r||(i&&(this._getTextWidth(o.text+ur)<s||(o.text=o.text.slice(0,o.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(o.text+ur))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const t=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,i=this.hasShadow();return t&&i?!0:super._useBufferCanvas()}}$i.Text=kt;kt.prototype._fillFunc=B0;kt.prototype._strokeFunc=$0;kt.prototype.className=F0;kt.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"];(0,P0._registerNode)(kt);Kt.Factory.overWriteSetter(kt,"width",(0,ti.getNumberOrAutoValidator)());Kt.Factory.overWriteSetter(kt,"height",(0,ti.getNumberOrAutoValidator)());Kt.Factory.addGetterSetter(kt,"direction",ac);Kt.Factory.addGetterSetter(kt,"fontFamily","Arial");Kt.Factory.addGetterSetter(kt,"fontSize",12,(0,ti.getNumberValidator)());Kt.Factory.addGetterSetter(kt,"fontStyle",cc);Kt.Factory.addGetterSetter(kt,"fontVariant",cc);Kt.Factory.addGetterSetter(kt,"padding",0,(0,ti.getNumberValidator)());Kt.Factory.addGetterSetter(kt,"align",lc);Kt.Factory.addGetterSetter(kt,"verticalAlign",k0);Kt.Factory.addGetterSetter(kt,"lineHeight",1,(0,ti.getNumberValidator)());Kt.Factory.addGetterSetter(kt,"wrap",L0);Kt.Factory.addGetterSetter(kt,"ellipsis",!1,(0,ti.getBooleanValidator)());Kt.Factory.addGetterSetter(kt,"letterSpacing",0,(0,ti.getNumberValidator)());Kt.Factory.addGetterSetter(kt,"text","",(0,ti.getStringValidator)());Kt.Factory.addGetterSetter(kt,"textDecoration","");var xs={};Object.defineProperty(xs,"__esModule",{value:!0});xs.TextPath=void 0;const pr=Mt,ge=ct,V0=It,zi=Ui,mr=$i,dc=Q,W0=lt,j0="",fc="normal";function uc(e){e.fillText(this.partialText,0,0)}function gc(e){e.strokeText(this.partialText,0,0)}class Ut extends V0.Shape{constructor(t){super(t),this.dummyCanvas=pr.Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return zi.Path.getPathLength(this.dataArray)}_getPointAtLength(t){if(!this.attrs.data)return null;const i=this.pathLength;return t-1>i?null:zi.Path.getPointAtLengthOfDataArray(t,this.dataArray)}_readDataAttribute(){this.dataArray=zi.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(t){t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",this.textBaseline()),t.setAttr("textAlign","left"),t.save();const i=this.textDecoration(),n=this.fill(),s=this.fontSize(),r=this.glyphInfo;i==="underline"&&t.beginPath();for(let o=0;o<r.length;o++){t.save();const a=r[o].p0;t.translate(a.x,a.y),t.rotate(r[o].rotation),this.partialText=r[o].text,t.fillStrokeShape(this),i==="underline"&&(o===0&&t.moveTo(0,s/2+1),t.lineTo(s,s/2+1)),t.restore()}i==="underline"&&(t.strokeStyle=n,t.lineWidth=s/20,t.stroke()),t.restore()}_hitFunc(t){t.beginPath();const i=this.glyphInfo;if(i.length>=1){const n=i[0].p0;t.moveTo(n.x,n.y)}for(let n=0;n<i.length;n++){const s=i[n].p1;t.lineTo(s.x,s.y)}t.setAttr("lineWidth",this.fontSize()),t.setAttr("strokeStyle",this.colorKey),t.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return pr.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(t){return mr.Text.prototype.setText.call(this,t)}_getContextFont(){return mr.Text.prototype._getContextFont.call(this)}_getTextSize(t){const n=this.dummyCanvas.getContext("2d");n.save(),n.font=this._getContextFont();const s=n.measureText(t);return n.restore(),{width:s.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const{width:t,height:i}=this._getTextSize(this.attrs.text);if(this.textWidth=t,this.textHeight=i,this.glyphInfo=[],!this.attrs.data)return null;const n=this.letterSpacing(),s=this.align(),r=this.kerningFunc(),o=Math.max(this.textWidth+((this.attrs.text||"").length-1)*n,0);let a=0;s==="center"&&(a=Math.max(0,this.pathLength/2-o/2)),s==="right"&&(a=Math.max(0,this.pathLength-o));const l=(0,mr.stringToArray)(this.text());let h=a;for(let c=0;c<l.length;c++){const u=this._getPointAtLength(h);if(!u)return;let p=this._getTextSize(l[c]).width+n;if(l[c]===" "&&s==="justify"){const T=this.text().split(" ").length-1;p+=(this.pathLength-o)/T}const g=this._getPointAtLength(h+p);if(!g)return;const f=zi.Path.getLineLength(u.x,u.y,g.x,g.y);let _=0;if(r)try{_=r(l[c-1],l[c])*this.fontSize()}catch{_=0}u.x+=_,g.x+=_,this.textWidth+=_;const v=zi.Path.getPointOnLine(_+f/2,u.x,u.y,g.x,g.y),C=Math.atan2(g.y-u.y,g.x-u.x);this.glyphInfo.push({transposeX:v.x,transposeY:v.y,text:l[c],rotation:C,p0:u,p1:g}),h+=p}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const t=[];this.glyphInfo.forEach(function(h){t.push(h.p0.x),t.push(h.p0.y),t.push(h.p1.x),t.push(h.p1.y)});let i=t[0]||0,n=t[0]||0,s=t[1]||0,r=t[1]||0,o,a;for(let h=0;h<t.length/2;h++)o=t[h*2],a=t[h*2+1],i=Math.min(i,o),n=Math.max(n,o),s=Math.min(s,a),r=Math.max(r,a);const l=this.fontSize();return{x:i-l/2,y:s-l/2,width:n-i+l,height:r-s+l}}destroy(){return pr.Util.releaseCanvas(this.dummyCanvas),super.destroy()}}xs.TextPath=Ut;Ut.prototype._fillFunc=uc;Ut.prototype._strokeFunc=gc;Ut.prototype._fillFuncHit=uc;Ut.prototype._strokeFuncHit=gc;Ut.prototype.className="TextPath";Ut.prototype._attrsAffectingSize=["text","fontSize","data"];(0,W0._registerNode)(Ut);ge.Factory.addGetterSetter(Ut,"data");ge.Factory.addGetterSetter(Ut,"fontFamily","Arial");ge.Factory.addGetterSetter(Ut,"fontSize",12,(0,dc.getNumberValidator)());ge.Factory.addGetterSetter(Ut,"fontStyle",fc);ge.Factory.addGetterSetter(Ut,"align","left");ge.Factory.addGetterSetter(Ut,"letterSpacing",0,(0,dc.getNumberValidator)());ge.Factory.addGetterSetter(Ut,"textBaseline","middle");ge.Factory.addGetterSetter(Ut,"fontVariant",fc);ge.Factory.addGetterSetter(Ut,"text",j0);ge.Factory.addGetterSetter(Ut,"textDecoration","");ge.Factory.addGetterSetter(Ut,"kerningFunc",void 0);var Ts={};Object.defineProperty(Ts,"__esModule",{value:!0});Ts.Transformer=void 0;const bt=Mt,ut=ct,ya=Rt,z0=It,K0=vn,va=Gi,ce=lt,ei=Q,Y0=lt,pc="tr-konva",X0=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(e=>e+`.${pc}`).join(" "),ba="nodesRect",q0=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],J0={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},Q0="ontouchstart"in ce.Konva._global;function Z0(e,t,i){if(e==="rotater")return i;t+=bt.Util.degToRad(J0[e]||0);const n=(bt.Util.radToDeg(t)%360+360)%360;return bt.Util._inRange(n,315+22.5,360)||bt.Util._inRange(n,0,22.5)?"ns-resize":bt.Util._inRange(n,45-22.5,45+22.5)?"nesw-resize":bt.Util._inRange(n,90-22.5,90+22.5)?"ew-resize":bt.Util._inRange(n,135-22.5,135+22.5)?"nwse-resize":bt.Util._inRange(n,180-22.5,180+22.5)?"ns-resize":bt.Util._inRange(n,225-22.5,225+22.5)?"nesw-resize":bt.Util._inRange(n,270-22.5,270+22.5)?"ew-resize":bt.Util._inRange(n,315-22.5,315+22.5)?"nwse-resize":(bt.Util.error("Transformer has unknown angle for cursor detection: "+n),"pointer")}const $n=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function t1(e){return{x:e.x+e.width/2*Math.cos(e.rotation)+e.height/2*Math.sin(-e.rotation),y:e.y+e.height/2*Math.cos(e.rotation)+e.width/2*Math.sin(e.rotation)}}function mc(e,t,i){const n=i.x+(e.x-i.x)*Math.cos(t)-(e.y-i.y)*Math.sin(t),s=i.y+(e.x-i.x)*Math.sin(t)+(e.y-i.y)*Math.cos(t);return{...e,rotation:e.rotation+t,x:n,y:s}}function e1(e,t){const i=t1(e);return mc(e,t,i)}function i1(e,t,i){let n=t;for(let s=0;s<e.length;s++){const r=ce.Konva.getAngle(e[s]),o=Math.abs(r-t)%(Math.PI*2);Math.min(o,Math.PI*2-o)<i&&(n=r)}return n}let Ir=0;class dt extends va.Group{constructor(t){super(t),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(X0,this.update),this.getNode()&&this.update()}attachTo(t){return this.setNode(t),this}setNode(t){return bt.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([t])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return pc+this._id}setNodes(t=[]){this._nodes&&this._nodes.length&&this.detach();const i=t.filter(s=>s.isAncestorOf(this)?(bt.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);return this._nodes=t=i,t.length===1&&this.useSingleNodeRotation()?this.rotation(t[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(s=>{const r=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()};if(s._attrsAffectingSize.length){const o=s._attrsAffectingSize.map(a=>a+"Change."+this._getEventNamespace()).join(" ");s.on(o,r)}s.on(q0.map(o=>o+`.${this._getEventNamespace()}`).join(" "),r),s.on(`absoluteTransformChange.${this._getEventNamespace()}`,r),this._proxyDrag(s)}),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(t){let i;t.on(`dragstart.${this._getEventNamespace()}`,n=>{i=t.getAbsolutePosition(),!this.isDragging()&&t!==this.findOne(".back")&&this.startDrag(n,!1)}),t.on(`dragmove.${this._getEventNamespace()}`,n=>{if(!i)return;const s=t.getAbsolutePosition(),r=s.x-i.x,o=s.y-i.y;this.nodes().forEach(a=>{if(a===t||a.isDragging())return;const l=a.getAbsolutePosition();a.setAbsolutePosition({x:l.x+r,y:l.y+o}),a.startDrag(n)}),i=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(t=>{t.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(ba),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(ba,this.__getNodeRect)}__getNodeShape(t,i=this.rotation(),n){const s=t.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),r=t.getAbsoluteScale(n),o=t.getAbsolutePosition(n),a=s.x*r.x-t.offsetX()*r.x,l=s.y*r.y-t.offsetY()*r.y,h=(ce.Konva.getAngle(t.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),c={x:o.x+a*Math.cos(h)+l*Math.sin(-h),y:o.y+l*Math.cos(h)+a*Math.sin(h),width:s.width*r.x,height:s.height*r.y,rotation:h};return mc(c,-ce.Konva.getAngle(i),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};const i=[];this.nodes().map(h=>{const c=h.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),u=[{x:c.x,y:c.y},{x:c.x+c.width,y:c.y},{x:c.x+c.width,y:c.y+c.height},{x:c.x,y:c.y+c.height}],p=h.getAbsoluteTransform();u.forEach(function(g){const f=p.point(g);i.push(f)})});const n=new bt.Transform;n.rotate(-ce.Konva.getAngle(this.rotation()));let s=1/0,r=1/0,o=-1/0,a=-1/0;i.forEach(function(h){const c=n.point(h);s===void 0&&(s=o=c.x,r=a=c.y),s=Math.min(s,c.x),r=Math.min(r,c.y),o=Math.max(o,c.x),a=Math.max(a,c.y)}),n.invert();const l=n.point({x:s,y:r});return{x:l.x,y:l.y,width:o-s,height:a-r,rotation:ce.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),$n.forEach(t=>{this._createAnchor(t)}),this._createAnchor("rotater")}_createAnchor(t){const i=new K0.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:t+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:Q0?10:"auto"}),n=this;i.on("mousedown touchstart",function(s){n._handleMouseDown(s)}),i.on("dragstart",s=>{i.stopDrag(),s.cancelBubble=!0}),i.on("dragend",s=>{s.cancelBubble=!0}),i.on("mouseenter",()=>{const s=ce.Konva.getAngle(this.rotation()),r=this.rotateAnchorCursor(),o=Z0(t,s,r);i.getStage().content&&(i.getStage().content.style.cursor=o),this._cursorChange=!0}),i.on("mouseout",()=>{i.getStage().content&&(i.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(i)}_createBack(){const t=new z0.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(i,n){const s=n.getParent(),r=s.padding();i.beginPath(),i.rect(-r,-r,n.width()+r*2,n.height()+r*2),i.moveTo(n.width()/2,-r),s.rotateEnabled()&&s.rotateLineVisible()&&i.lineTo(n.width()/2,-s.rotateAnchorOffset()*bt.Util._sign(n.height())-r),i.fillStrokeShape(n)},hitFunc:(i,n)=>{if(!this.shouldOverdrawWholeArea())return;const s=this.padding();i.beginPath(),i.rect(-s,-s,n.width()+s*2,n.height()+s*2),i.fillStrokeShape(n)}});this.add(t),this._proxyDrag(t),t.on("dragstart",i=>{i.cancelBubble=!0}),t.on("dragmove",i=>{i.cancelBubble=!0}),t.on("dragend",i=>{i.cancelBubble=!0}),this.on("dragmove",i=>{this.update()})}_handleMouseDown(t){if(this._transforming)return;this._movingAnchorName=t.target.name().split(" ")[0];const i=this._getNodeRect(),n=i.width,s=i.height,r=Math.sqrt(Math.pow(n,2)+Math.pow(s,2));this.sin=Math.abs(s/r),this.cos=Math.abs(n/r),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const o=t.target.getAbsolutePosition(),a=t.target.getStage().getPointerPosition();this._anchorDragOffset={x:a.x-o.x,y:a.y-o.y},Ir++,this._fire("transformstart",{evt:t.evt,target:this.getNode()}),this._nodes.forEach(l=>{l._fire("transformstart",{evt:t.evt,target:l})})}_handleMouseMove(t){let i,n,s;const r=this.findOne("."+this._movingAnchorName),o=r.getStage();o.setPointersPositions(t);const a=o.getPointerPosition();let l={x:a.x-this._anchorDragOffset.x,y:a.y-this._anchorDragOffset.y};const h=r.getAbsolutePosition();this.anchorDragBoundFunc()&&(l=this.anchorDragBoundFunc()(h,l,t)),r.setAbsolutePosition(l);const c=r.getAbsolutePosition();if(h.x===c.x&&h.y===c.y)return;if(this._movingAnchorName==="rotater"){const T=this._getNodeRect();i=r.x()-T.width/2,n=-r.y()+T.height/2;let d=Math.atan2(-n,i)+Math.PI/2;T.height<0&&(d-=Math.PI);const S=ce.Konva.getAngle(this.rotation())+d,P=ce.Konva.getAngle(this.rotationSnapTolerance()),y=i1(this.rotationSnaps(),S,P)-T.rotation,E=e1(T,y);this._fitNodesInto(E,t);return}const u=this.shiftBehavior();let p;u==="inverted"?p=this.keepRatio()&&!t.shiftKey:u==="none"?p=this.keepRatio():p=this.keepRatio()||t.shiftKey;let g=this.centeredScaling()||t.altKey;if(this._movingAnchorName==="top-left"){if(p){const T=g?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};s=Math.sqrt(Math.pow(T.x-r.x(),2)+Math.pow(T.y-r.y(),2));const d=this.findOne(".top-left").x()>T.x?-1:1,m=this.findOne(".top-left").y()>T.y?-1:1;i=s*this.cos*d,n=s*this.sin*m,this.findOne(".top-left").x(T.x-i),this.findOne(".top-left").y(T.y-n)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(r.y());else if(this._movingAnchorName==="top-right"){if(p){const T=g?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};s=Math.sqrt(Math.pow(r.x()-T.x,2)+Math.pow(T.y-r.y(),2));const d=this.findOne(".top-right").x()<T.x?-1:1,m=this.findOne(".top-right").y()>T.y?-1:1;i=s*this.cos*d,n=s*this.sin*m,this.findOne(".top-right").x(T.x+i),this.findOne(".top-right").y(T.y-n)}var f=r.position();this.findOne(".top-left").y(f.y),this.findOne(".bottom-right").x(f.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(r.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(r.x());else if(this._movingAnchorName==="bottom-left"){if(p){const T=g?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};s=Math.sqrt(Math.pow(T.x-r.x(),2)+Math.pow(r.y()-T.y,2));const d=T.x<r.x()?-1:1,m=r.y()<T.y?-1:1;i=s*this.cos*d,n=s*this.sin*m,r.x(T.x-i),r.y(T.y+n)}f=r.position(),this.findOne(".top-left").x(f.x),this.findOne(".bottom-right").y(f.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(r.y());else if(this._movingAnchorName==="bottom-right"){if(p){const T=g?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};s=Math.sqrt(Math.pow(r.x()-T.x,2)+Math.pow(r.y()-T.y,2));const d=this.findOne(".bottom-right").x()<T.x?-1:1,m=this.findOne(".bottom-right").y()<T.y?-1:1;i=s*this.cos*d,n=s*this.sin*m,this.findOne(".bottom-right").x(T.x+i),this.findOne(".bottom-right").y(T.y+n)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));if(g=this.centeredScaling()||t.altKey,g){const T=this.findOne(".top-left"),d=this.findOne(".bottom-right"),m=T.x(),S=T.y(),P=this.getWidth()-d.x(),F=this.getHeight()-d.y();d.move({x:-m,y:-S}),T.move({x:P,y:F})}const _=this.findOne(".top-left").getAbsolutePosition();i=_.x,n=_.y;const v=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),C=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:i,y:n,width:v,height:C,rotation:ce.Konva.getAngle(this.rotation())},t)}_handleMouseUp(t){this._removeEvents(t)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(t){var i;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const n=this.getNode();Ir--,this._fire("transformend",{evt:t,target:n}),(i=this.getLayer())===null||i===void 0||i.batchDraw(),n&&this._nodes.forEach(s=>{var r;s._fire("transformend",{evt:t,target:s}),(r=s.getLayer())===null||r===void 0||r.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(t,i){const n=this._getNodeRect(),s=1;if(bt.Util._inRange(t.width,-this.padding()*2-s,s)){this.update();return}if(bt.Util._inRange(t.height,-this.padding()*2-s,s)){this.update();return}const r=new bt.Transform;if(r.rotate(ce.Konva.getAngle(this.rotation())),this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("left")>=0){const p=r.point({x:-this.padding()*2,y:0});t.x+=p.x,t.y+=p.y,t.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=p.x,this._anchorDragOffset.y-=p.y}else if(this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("right")>=0){const p=r.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=p.x,this._anchorDragOffset.y-=p.y,t.width+=this.padding()*2}if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("top")>=0){const p=r.point({x:0,y:-this.padding()*2});t.x+=p.x,t.y+=p.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=p.x,this._anchorDragOffset.y-=p.y,t.height+=this.padding()*2}else if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const p=r.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=p.x,this._anchorDragOffset.y-=p.y,t.height+=this.padding()*2}if(this.boundBoxFunc()){const p=this.boundBoxFunc()(n,t);p?t=p:bt.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const o=1e7,a=new bt.Transform;a.translate(n.x,n.y),a.rotate(n.rotation),a.scale(n.width/o,n.height/o);const l=new bt.Transform,h=t.width/o,c=t.height/o;this.flipEnabled()===!1?(l.translate(t.x,t.y),l.rotate(t.rotation),l.translate(t.width<0?t.width:0,t.height<0?t.height:0),l.scale(Math.abs(h),Math.abs(c))):(l.translate(t.x,t.y),l.rotate(t.rotation),l.scale(h,c));const u=l.multiply(a.invert());this._nodes.forEach(p=>{var g;const f=p.getParent().getAbsoluteTransform(),_=p.getTransform().copy();_.translate(p.offsetX(),p.offsetY());const v=new bt.Transform;v.multiply(f.copy().invert()).multiply(u).multiply(f).multiply(_);const C=v.decompose();p.setAttrs(C),(g=p.getLayer())===null||g===void 0||g.batchDraw()}),this.rotation(bt.Util._getRotation(t.rotation)),this._nodes.forEach(p=>{this._fire("transform",{evt:i,target:p}),p._fire("transform",{evt:i,target:p})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(t,i){this.findOne(t).setAttrs(i)}update(){var t;const i=this._getNodeRect();this.rotation(bt.Util._getRotation(i.rotation));const n=i.width,s=i.height,r=this.enabledAnchors(),o=this.resizeEnabled(),a=this.padding(),l=this.anchorSize(),h=this.find("._anchor");h.forEach(u=>{u.setAttrs({width:l,height:l,offsetX:l/2,offsetY:l/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:l/2+a,offsetY:l/2+a,visible:o&&r.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:n/2,y:0,offsetY:l/2+a,visible:o&&r.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:n,y:0,offsetX:l/2-a,offsetY:l/2+a,visible:o&&r.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:s/2,offsetX:l/2+a,visible:o&&r.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:n,y:s/2,offsetX:l/2-a,visible:o&&r.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:s,offsetX:l/2+a,offsetY:l/2-a,visible:o&&r.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:n/2,y:s,offsetY:l/2-a,visible:o&&r.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:n,y:s,offsetX:l/2-a,offsetY:l/2-a,visible:o&&r.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:n/2,y:-this.rotateAnchorOffset()*bt.Util._sign(s)-a,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:n,height:s,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});const c=this.anchorStyleFunc();c&&h.forEach(u=>{c(u)}),(t=this.getLayer())===null||t===void 0||t.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const t=this.findOne("."+this._movingAnchorName);t&&t.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),va.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return ya.Node.prototype.toObject.call(this)}clone(t){return ya.Node.prototype.clone.call(this,t)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}}Ts.Transformer=dt;dt.isTransforming=()=>Ir>0;function n1(e){return e instanceof Array||bt.Util.warn("enabledAnchors value should be an array"),e instanceof Array&&e.forEach(function(t){$n.indexOf(t)===-1&&bt.Util.warn("Unknown anchor name: "+t+". Available names are: "+$n.join(", "))}),e||[]}dt.prototype.className="Transformer";(0,Y0._registerNode)(dt);ut.Factory.addGetterSetter(dt,"enabledAnchors",$n,n1);ut.Factory.addGetterSetter(dt,"flipEnabled",!0,(0,ei.getBooleanValidator)());ut.Factory.addGetterSetter(dt,"resizeEnabled",!0);ut.Factory.addGetterSetter(dt,"anchorSize",10,(0,ei.getNumberValidator)());ut.Factory.addGetterSetter(dt,"rotateEnabled",!0);ut.Factory.addGetterSetter(dt,"rotateLineVisible",!0);ut.Factory.addGetterSetter(dt,"rotationSnaps",[]);ut.Factory.addGetterSetter(dt,"rotateAnchorOffset",50,(0,ei.getNumberValidator)());ut.Factory.addGetterSetter(dt,"rotateAnchorCursor","crosshair");ut.Factory.addGetterSetter(dt,"rotationSnapTolerance",5,(0,ei.getNumberValidator)());ut.Factory.addGetterSetter(dt,"borderEnabled",!0);ut.Factory.addGetterSetter(dt,"anchorStroke","rgb(0, 161, 255)");ut.Factory.addGetterSetter(dt,"anchorStrokeWidth",1,(0,ei.getNumberValidator)());ut.Factory.addGetterSetter(dt,"anchorFill","white");ut.Factory.addGetterSetter(dt,"anchorCornerRadius",0,(0,ei.getNumberValidator)());ut.Factory.addGetterSetter(dt,"borderStroke","rgb(0, 161, 255)");ut.Factory.addGetterSetter(dt,"borderStrokeWidth",1,(0,ei.getNumberValidator)());ut.Factory.addGetterSetter(dt,"borderDash");ut.Factory.addGetterSetter(dt,"keepRatio",!0);ut.Factory.addGetterSetter(dt,"shiftBehavior","default");ut.Factory.addGetterSetter(dt,"centeredScaling",!1);ut.Factory.addGetterSetter(dt,"ignoreStroke",!1);ut.Factory.addGetterSetter(dt,"padding",0,(0,ei.getNumberValidator)());ut.Factory.addGetterSetter(dt,"nodes");ut.Factory.addGetterSetter(dt,"node");ut.Factory.addGetterSetter(dt,"boundBoxFunc");ut.Factory.addGetterSetter(dt,"anchorDragBoundFunc");ut.Factory.addGetterSetter(dt,"anchorStyleFunc");ut.Factory.addGetterSetter(dt,"shouldOverdrawWholeArea",!1);ut.Factory.addGetterSetter(dt,"useSingleNodeRotation",!0);ut.Factory.backCompat(dt,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"});var Ps={};Object.defineProperty(Ps,"__esModule",{value:!0});Ps.Wedge=void 0;const As=ct,s1=It,r1=lt,_c=Q,o1=lt;class Ge extends s1.Shape{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.radius(),0,r1.Konva.getAngle(this.angle()),this.clockwise()),t.lineTo(0,0),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(t){this.radius(t/2)}setHeight(t){this.radius(t/2)}}Ps.Wedge=Ge;Ge.prototype.className="Wedge";Ge.prototype._centroid=!0;Ge.prototype._attrsAffectingSize=["radius"];(0,o1._registerNode)(Ge);As.Factory.addGetterSetter(Ge,"radius",0,(0,_c.getNumberValidator)());As.Factory.addGetterSetter(Ge,"angle",0,(0,_c.getNumberValidator)());As.Factory.addGetterSetter(Ge,"clockwise",!1);As.Factory.backCompat(Ge,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});var Es={};Object.defineProperty(Es,"__esModule",{value:!0});Es.Blur=void 0;const Sa=ct,a1=Rt,l1=Q;function Ca(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const c1=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],h1=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function d1(e,t){const i=e.data,n=e.width,s=e.height;let r,o,a,l,h,c,u,p,g,f,_,v,C,T,d,m,S,P,F,y;const E=t+t+1,x=n-1,R=s-1,k=t+1,L=k*(k+1)/2,j=new Ca,V=c1[t],Z=h1[t];let K=null,B=j,ot=null,J=null;for(let z=1;z<E;z++)B=B.next=new Ca,z===k&&(K=B);B.next=j,a=o=0;for(let z=0;z<s;z++){v=C=T=d=l=h=c=u=0,p=k*(m=i[o]),g=k*(S=i[o+1]),f=k*(P=i[o+2]),_=k*(F=i[o+3]),l+=L*m,h+=L*S,c+=L*P,u+=L*F,B=j;for(let st=0;st<k;st++)B.r=m,B.g=S,B.b=P,B.a=F,B=B.next;for(let st=1;st<k;st++)r=o+((x<st?x:st)<<2),l+=(B.r=m=i[r])*(y=k-st),h+=(B.g=S=i[r+1])*y,c+=(B.b=P=i[r+2])*y,u+=(B.a=F=i[r+3])*y,v+=m,C+=S,T+=P,d+=F,B=B.next;ot=j,J=K;for(let st=0;st<n;st++)i[o+3]=F=u*V>>Z,F!==0?(F=255/F,i[o]=(l*V>>Z)*F,i[o+1]=(h*V>>Z)*F,i[o+2]=(c*V>>Z)*F):i[o]=i[o+1]=i[o+2]=0,l-=p,h-=g,c-=f,u-=_,p-=ot.r,g-=ot.g,f-=ot.b,_-=ot.a,r=a+((r=st+t+1)<x?r:x)<<2,v+=ot.r=i[r],C+=ot.g=i[r+1],T+=ot.b=i[r+2],d+=ot.a=i[r+3],l+=v,h+=C,c+=T,u+=d,ot=ot.next,p+=m=J.r,g+=S=J.g,f+=P=J.b,_+=F=J.a,v-=m,C-=S,T-=P,d-=F,J=J.next,o+=4;a+=n}for(let z=0;z<n;z++){C=T=d=v=h=c=u=l=0,o=z<<2,p=k*(m=i[o]),g=k*(S=i[o+1]),f=k*(P=i[o+2]),_=k*(F=i[o+3]),l+=L*m,h+=L*S,c+=L*P,u+=L*F,B=j;for(let Ct=0;Ct<k;Ct++)B.r=m,B.g=S,B.b=P,B.a=F,B=B.next;let st=n;for(let Ct=1;Ct<=t;Ct++)o=st+z<<2,l+=(B.r=m=i[o])*(y=k-Ct),h+=(B.g=S=i[o+1])*y,c+=(B.b=P=i[o+2])*y,u+=(B.a=F=i[o+3])*y,v+=m,C+=S,T+=P,d+=F,B=B.next,Ct<R&&(st+=n);o=z,ot=j,J=K;for(let Ct=0;Ct<s;Ct++)r=o<<2,i[r+3]=F=u*V>>Z,F>0?(F=255/F,i[r]=(l*V>>Z)*F,i[r+1]=(h*V>>Z)*F,i[r+2]=(c*V>>Z)*F):i[r]=i[r+1]=i[r+2]=0,l-=p,h-=g,c-=f,u-=_,p-=ot.r,g-=ot.g,f-=ot.b,_-=ot.a,r=z+((r=Ct+k)<R?r:R)*n<<2,l+=v+=ot.r=i[r],h+=C+=ot.g=i[r+1],c+=T+=ot.b=i[r+2],u+=d+=ot.a=i[r+3],ot=ot.next,p+=m=J.r,g+=S=J.g,f+=P=J.b,_+=F=J.a,v-=m,C-=S,T-=P,d-=F,J=J.next,o+=n}}const f1=function(t){const i=Math.round(this.blurRadius());i>0&&d1(t,i)};Es.Blur=f1;Sa.Factory.addGetterSetter(a1.Node,"blurRadius",0,(0,l1.getNumberValidator)(),Sa.Factory.afterSetFilter);var Rs={};Object.defineProperty(Rs,"__esModule",{value:!0});Rs.Brighten=void 0;const wa=ct,u1=Rt,g1=Q,p1=function(e){const t=this.brightness()*255,i=e.data,n=i.length;for(let s=0;s<n;s+=4)i[s]+=t,i[s+1]+=t,i[s+2]+=t};Rs.Brighten=p1;wa.Factory.addGetterSetter(u1.Node,"brightness",0,(0,g1.getNumberValidator)(),wa.Factory.afterSetFilter);var Ms={};Object.defineProperty(Ms,"__esModule",{value:!0});Ms.Contrast=void 0;const xa=ct,m1=Rt,_1=Q,y1=function(e){const t=Math.pow((this.contrast()+100)/100,2),i=e.data,n=i.length;let s=150,r=150,o=150;for(let a=0;a<n;a+=4)s=i[a],r=i[a+1],o=i[a+2],s/=255,s-=.5,s*=t,s+=.5,s*=255,r/=255,r-=.5,r*=t,r+=.5,r*=255,o/=255,o-=.5,o*=t,o+=.5,o*=255,s=s<0?0:s>255?255:s,r=r<0?0:r>255?255:r,o=o<0?0:o>255?255:o,i[a]=s,i[a+1]=r,i[a+2]=o};Ms.Contrast=y1;xa.Factory.addGetterSetter(m1.Node,"contrast",0,(0,_1.getNumberValidator)(),xa.Factory.afterSetFilter);var Fs={};Object.defineProperty(Fs,"__esModule",{value:!0});Fs.Emboss=void 0;const Ye=ct,ks=Rt,v1=Mt,yc=Q,b1=function(e){const t=this.embossStrength()*10,i=this.embossWhiteLevel()*255,n=this.embossDirection(),s=this.embossBlend(),r=e.data,o=e.width,a=e.height,l=o*4;let h=0,c=0,u=a;switch(n){case"top-left":h=-1,c=-1;break;case"top":h=-1,c=0;break;case"top-right":h=-1,c=1;break;case"right":h=0,c=1;break;case"bottom-right":h=1,c=1;break;case"bottom":h=1,c=0;break;case"bottom-left":h=1,c=-1;break;case"left":h=0,c=-1;break;default:v1.Util.error("Unknown emboss direction: "+n)}do{const p=(u-1)*l;let g=h;u+g<1&&(g=0),u+g>a&&(g=0);const f=(u-1+g)*o*4;let _=o;do{const v=p+(_-1)*4;let C=c;_+C<1&&(C=0),_+C>o&&(C=0);const T=f+(_-1+C)*4,d=r[v]-r[T],m=r[v+1]-r[T+1],S=r[v+2]-r[T+2];let P=d;const F=P>0?P:-P,y=m>0?m:-m,E=S>0?S:-S;if(y>F&&(P=m),E>F&&(P=S),P*=t,s){const x=r[v]+P,R=r[v+1]+P,k=r[v+2]+P;r[v]=x>255?255:x<0?0:x,r[v+1]=R>255?255:R<0?0:R,r[v+2]=k>255?255:k<0?0:k}else{let x=i-P;x<0?x=0:x>255&&(x=255),r[v]=r[v+1]=r[v+2]=x}}while(--_)}while(--u)};Fs.Emboss=b1;Ye.Factory.addGetterSetter(ks.Node,"embossStrength",.5,(0,yc.getNumberValidator)(),Ye.Factory.afterSetFilter);Ye.Factory.addGetterSetter(ks.Node,"embossWhiteLevel",.5,(0,yc.getNumberValidator)(),Ye.Factory.afterSetFilter);Ye.Factory.addGetterSetter(ks.Node,"embossDirection","top-left",void 0,Ye.Factory.afterSetFilter);Ye.Factory.addGetterSetter(ks.Node,"embossBlend",!1,void 0,Ye.Factory.afterSetFilter);var Ns={};Object.defineProperty(Ns,"__esModule",{value:!0});Ns.Enhance=void 0;const Ta=ct,S1=Rt,C1=Q;function _r(e,t,i,n,s){const r=i-t,o=s-n;if(r===0)return n+o/2;if(o===0)return n;let a=(e-t)/r;return a=o*a+n,a}const w1=function(e){const t=e.data,i=t.length;let n=t[0],s=n,r,o=t[1],a=o,l,h=t[2],c=h,u;const p=this.enhance();if(p===0)return;for(let d=0;d<i;d+=4)r=t[d+0],r<n?n=r:r>s&&(s=r),l=t[d+1],l<o?o=l:l>a&&(a=l),u=t[d+2],u<h?h=u:u>c&&(c=u);s===n&&(s=255,n=0),a===o&&(a=255,o=0),c===h&&(c=255,h=0);let g,f,_,v,C,T;if(p>0)g=s+p*(255-s),f=n-p*(n-0),_=a+p*(255-a),v=o-p*(o-0),C=c+p*(255-c),T=h-p*(h-0);else{const d=(s+n)*.5;g=s+p*(s-d),f=n+p*(n-d);const m=(a+o)*.5;_=a+p*(a-m),v=o+p*(o-m);const S=(c+h)*.5;C=c+p*(c-S),T=h+p*(h-S)}for(let d=0;d<i;d+=4)t[d+0]=_r(t[d+0],n,s,f,g),t[d+1]=_r(t[d+1],o,a,v,_),t[d+2]=_r(t[d+2],h,c,T,C)};Ns.Enhance=w1;Ta.Factory.addGetterSetter(S1.Node,"enhance",0,(0,C1.getNumberValidator)(),Ta.Factory.afterSetFilter);var Os={};Object.defineProperty(Os,"__esModule",{value:!0});Os.Grayscale=void 0;const x1=function(e){const t=e.data,i=t.length;for(let n=0;n<i;n+=4){const s=.34*t[n]+.5*t[n+1]+.16*t[n+2];t[n]=s,t[n+1]=s,t[n+2]=s}};Os.Grayscale=x1;var Ds={};Object.defineProperty(Ds,"__esModule",{value:!0});Ds.HSL=void 0;const ki=ct,_o=Rt,yo=Q;ki.Factory.addGetterSetter(_o.Node,"hue",0,(0,yo.getNumberValidator)(),ki.Factory.afterSetFilter);ki.Factory.addGetterSetter(_o.Node,"saturation",0,(0,yo.getNumberValidator)(),ki.Factory.afterSetFilter);ki.Factory.addGetterSetter(_o.Node,"luminance",0,(0,yo.getNumberValidator)(),ki.Factory.afterSetFilter);const T1=function(e){const t=e.data,i=t.length,n=1,s=Math.pow(2,this.saturation()),r=Math.abs(this.hue()+360)%360,o=this.luminance()*127,a=n*s*Math.cos(r*Math.PI/180),l=n*s*Math.sin(r*Math.PI/180),h=.299*n+.701*a+.167*l,c=.587*n-.587*a+.33*l,u=.114*n-.114*a-.497*l,p=.299*n-.299*a-.328*l,g=.587*n+.413*a+.035*l,f=.114*n-.114*a+.293*l,_=.299*n-.3*a+1.25*l,v=.587*n-.586*a-1.05*l,C=.114*n+.886*a-.2*l;let T,d,m,S;for(let P=0;P<i;P+=4)T=t[P+0],d=t[P+1],m=t[P+2],S=t[P+3],t[P+0]=h*T+c*d+u*m+o,t[P+1]=p*T+g*d+f*m+o,t[P+2]=_*T+v*d+C*m+o,t[P+3]=S};Ds.HSL=T1;var Ls={};Object.defineProperty(Ls,"__esModule",{value:!0});Ls.HSV=void 0;const Ni=ct,vo=Rt,bo=Q,P1=function(e){const t=e.data,i=t.length,n=Math.pow(2,this.value()),s=Math.pow(2,this.saturation()),r=Math.abs(this.hue()+360)%360,o=n*s*Math.cos(r*Math.PI/180),a=n*s*Math.sin(r*Math.PI/180),l=.299*n+.701*o+.167*a,h=.587*n-.587*o+.33*a,c=.114*n-.114*o-.497*a,u=.299*n-.299*o-.328*a,p=.587*n+.413*o+.035*a,g=.114*n-.114*o+.293*a,f=.299*n-.3*o+1.25*a,_=.587*n-.586*o-1.05*a,v=.114*n+.886*o-.2*a;for(let C=0;C<i;C+=4){const T=t[C+0],d=t[C+1],m=t[C+2],S=t[C+3];t[C+0]=l*T+h*d+c*m,t[C+1]=u*T+p*d+g*m,t[C+2]=f*T+_*d+v*m,t[C+3]=S}};Ls.HSV=P1;Ni.Factory.addGetterSetter(vo.Node,"hue",0,(0,bo.getNumberValidator)(),Ni.Factory.afterSetFilter);Ni.Factory.addGetterSetter(vo.Node,"saturation",0,(0,bo.getNumberValidator)(),Ni.Factory.afterSetFilter);Ni.Factory.addGetterSetter(vo.Node,"value",0,(0,bo.getNumberValidator)(),Ni.Factory.afterSetFilter);var Gs={};Object.defineProperty(Gs,"__esModule",{value:!0});Gs.Invert=void 0;const A1=function(e){const t=e.data,i=t.length;for(let n=0;n<i;n+=4)t[n]=255-t[n],t[n+1]=255-t[n+1],t[n+2]=255-t[n+2]};Gs.Invert=A1;var Is={};Object.defineProperty(Is,"__esModule",{value:!0});Is.Kaleidoscope=void 0;const Hn=ct,vc=Rt,Pa=Mt,bc=Q,E1=function(e,t,i){const n=e.data,s=t.data,r=e.width,o=e.height,a=i.polarCenterX||r/2,l=i.polarCenterY||o/2;let h=Math.sqrt(a*a+l*l),c=r-a,u=o-l;const p=Math.sqrt(c*c+u*u);h=p>h?p:h;const g=o,f=r,_=360/f*Math.PI/180;for(let v=0;v<f;v+=1){const C=Math.sin(v*_),T=Math.cos(v*_);for(let d=0;d<g;d+=1){c=Math.floor(a+h*d/g*T),u=Math.floor(l+h*d/g*C);let m=(u*r+c)*4;const S=n[m+0],P=n[m+1],F=n[m+2],y=n[m+3];m=(v+d*r)*4,s[m+0]=S,s[m+1]=P,s[m+2]=F,s[m+3]=y}}},R1=function(e,t,i){const n=e.data,s=t.data,r=e.width,o=e.height,a=i.polarCenterX||r/2,l=i.polarCenterY||o/2;let h=Math.sqrt(a*a+l*l),c=r-a,u=o-l;const p=Math.sqrt(c*c+u*u);h=p>h?p:h;const g=o,f=r,_=0;let v,C;for(c=0;c<r;c+=1)for(u=0;u<o;u+=1){const T=c-a,d=u-l,m=Math.sqrt(T*T+d*d)*g/h;let S=(Math.atan2(d,T)*180/Math.PI+360+_)%360;S=S*f/360,v=Math.floor(S),C=Math.floor(m);let P=(C*r+v)*4;const F=n[P+0],y=n[P+1],E=n[P+2],x=n[P+3];P=(u*r+c)*4,s[P+0]=F,s[P+1]=y,s[P+2]=E,s[P+3]=x}},M1=function(e){const t=e.width,i=e.height;let n,s,r,o,a,l,h,c,u,p,g=Math.round(this.kaleidoscopePower());const f=Math.round(this.kaleidoscopeAngle()),_=Math.floor(t*(f%360)/360);if(g<1)return;const v=Pa.Util.createCanvasElement();v.width=t,v.height=i;const C=v.getContext("2d").getImageData(0,0,t,i);Pa.Util.releaseCanvas(v),E1(e,C,{polarCenterX:t/2,polarCenterY:i/2});let T=t/Math.pow(2,g);for(;T<=8;)T=T*2,g-=1;T=Math.ceil(T);let d=T,m=0,S=d,P=1;for(_+T>t&&(m=d,S=0,P=-1),s=0;s<i;s+=1)for(n=m;n!==S;n+=P)r=Math.round(n+_)%t,u=(t*s+r)*4,a=C.data[u+0],l=C.data[u+1],h=C.data[u+2],c=C.data[u+3],p=(t*s+n)*4,C.data[p+0]=a,C.data[p+1]=l,C.data[p+2]=h,C.data[p+3]=c;for(s=0;s<i;s+=1)for(d=Math.floor(T),o=0;o<g;o+=1){for(n=0;n<d+1;n+=1)u=(t*s+n)*4,a=C.data[u+0],l=C.data[u+1],h=C.data[u+2],c=C.data[u+3],p=(t*s+d*2-n-1)*4,C.data[p+0]=a,C.data[p+1]=l,C.data[p+2]=h,C.data[p+3]=c;d*=2}R1(C,e,{})};Is.Kaleidoscope=M1;Hn.Factory.addGetterSetter(vc.Node,"kaleidoscopePower",2,(0,bc.getNumberValidator)(),Hn.Factory.afterSetFilter);Hn.Factory.addGetterSetter(vc.Node,"kaleidoscopeAngle",0,(0,bc.getNumberValidator)(),Hn.Factory.afterSetFilter);var Us={};Object.defineProperty(Us,"__esModule",{value:!0});Us.Mask=void 0;const Aa=ct,F1=Rt,k1=Q;function An(e,t,i){let n=(i*e.width+t)*4;const s=[];return s.push(e.data[n++],e.data[n++],e.data[n++],e.data[n++]),s}function Ki(e,t){return Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)+Math.pow(e[2]-t[2],2))}function N1(e){const t=[0,0,0];for(let i=0;i<e.length;i++)t[0]+=e[i][0],t[1]+=e[i][1],t[2]+=e[i][2];return t[0]/=e.length,t[1]/=e.length,t[2]/=e.length,t}function O1(e,t){const i=An(e,0,0),n=An(e,e.width-1,0),s=An(e,0,e.height-1),r=An(e,e.width-1,e.height-1),o=t||10;if(Ki(i,n)<o&&Ki(n,r)<o&&Ki(r,s)<o&&Ki(s,i)<o){const a=N1([n,i,r,s]),l=[];for(let h=0;h<e.width*e.height;h++){const c=Ki(a,[e.data[h*4],e.data[h*4+1],e.data[h*4+2]]);l[h]=c<o?0:255}return l}}function D1(e,t){for(let i=0;i<e.width*e.height;i++)e.data[4*i+3]=t[i]}function L1(e,t,i){const n=[1,1,1,1,0,1,1,1,1],s=Math.round(Math.sqrt(n.length)),r=Math.floor(s/2),o=[];for(let a=0;a<i;a++)for(let l=0;l<t;l++){const h=a*t+l;let c=0;for(let u=0;u<s;u++)for(let p=0;p<s;p++){const g=a+u-r,f=l+p-r;if(g>=0&&g<i&&f>=0&&f<t){const _=g*t+f,v=n[u*s+p];c+=e[_]*v}}o[h]=c===255*8?255:0}return o}function G1(e,t,i){const n=[1,1,1,1,1,1,1,1,1],s=Math.round(Math.sqrt(n.length)),r=Math.floor(s/2),o=[];for(let a=0;a<i;a++)for(let l=0;l<t;l++){const h=a*t+l;let c=0;for(let u=0;u<s;u++)for(let p=0;p<s;p++){const g=a+u-r,f=l+p-r;if(g>=0&&g<i&&f>=0&&f<t){const _=g*t+f,v=n[u*s+p];c+=e[_]*v}}o[h]=c>=255*4?255:0}return o}function I1(e,t,i){const n=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],s=Math.round(Math.sqrt(n.length)),r=Math.floor(s/2),o=[];for(let a=0;a<i;a++)for(let l=0;l<t;l++){const h=a*t+l;let c=0;for(let u=0;u<s;u++)for(let p=0;p<s;p++){const g=a+u-r,f=l+p-r;if(g>=0&&g<i&&f>=0&&f<t){const _=g*t+f,v=n[u*s+p];c+=e[_]*v}}o[h]=c}return o}const U1=function(e){const t=this.threshold();let i=O1(e,t);return i&&(i=L1(i,e.width,e.height),i=G1(i,e.width,e.height),i=I1(i,e.width,e.height),D1(e,i)),e};Us.Mask=U1;Aa.Factory.addGetterSetter(F1.Node,"threshold",0,(0,k1.getNumberValidator)(),Aa.Factory.afterSetFilter);var Bs={};Object.defineProperty(Bs,"__esModule",{value:!0});Bs.Noise=void 0;const Ea=ct,B1=Rt,$1=Q,H1=function(e){const t=this.noise()*255,i=e.data,n=i.length,s=t/2;for(let r=0;r<n;r+=4)i[r+0]+=s-2*s*Math.random(),i[r+1]+=s-2*s*Math.random(),i[r+2]+=s-2*s*Math.random()};Bs.Noise=H1;Ea.Factory.addGetterSetter(B1.Node,"noise",.2,(0,$1.getNumberValidator)(),Ea.Factory.afterSetFilter);var $s={};Object.defineProperty($s,"__esModule",{value:!0});$s.Pixelate=void 0;const Ra=ct,V1=Mt,W1=Rt,j1=Q,z1=function(e){let t=Math.ceil(this.pixelSize()),i=e.width,n=e.height,s=Math.ceil(i/t),r=Math.ceil(n/t),o=e.data;if(t<=0){V1.Util.error("pixelSize value can not be <= 0");return}for(let a=0;a<s;a+=1)for(let l=0;l<r;l+=1){let h=0,c=0,u=0,p=0;const g=a*t,f=g+t,_=l*t,v=_+t;let C=0;for(let T=g;T<f;T+=1)if(!(T>=i))for(let d=_;d<v;d+=1){if(d>=n)continue;const m=(i*d+T)*4;h+=o[m+0],c+=o[m+1],u+=o[m+2],p+=o[m+3],C+=1}h=h/C,c=c/C,u=u/C,p=p/C;for(let T=g;T<f;T+=1)if(!(T>=i))for(let d=_;d<v;d+=1){if(d>=n)continue;const m=(i*d+T)*4;o[m+0]=h,o[m+1]=c,o[m+2]=u,o[m+3]=p}}};$s.Pixelate=z1;Ra.Factory.addGetterSetter(W1.Node,"pixelSize",8,(0,j1.getNumberValidator)(),Ra.Factory.afterSetFilter);var Hs={};Object.defineProperty(Hs,"__esModule",{value:!0});Hs.Posterize=void 0;const Ma=ct,K1=Rt,Y1=Q,X1=function(e){const t=Math.round(this.levels()*254)+1,i=e.data,n=i.length,s=255/t;for(let r=0;r<n;r+=1)i[r]=Math.floor(i[r]/s)*s};Hs.Posterize=X1;Ma.Factory.addGetterSetter(K1.Node,"levels",.5,(0,Y1.getNumberValidator)(),Ma.Factory.afterSetFilter);var Vs={};Object.defineProperty(Vs,"__esModule",{value:!0});Vs.RGB=void 0;const Vn=ct,So=Rt,q1=Q,J1=function(e){const t=e.data,i=t.length,n=this.red(),s=this.green(),r=this.blue();for(let o=0;o<i;o+=4){const a=(.34*t[o]+.5*t[o+1]+.16*t[o+2])/255;t[o]=a*n,t[o+1]=a*s,t[o+2]=a*r,t[o+3]=t[o+3]}};Vs.RGB=J1;Vn.Factory.addGetterSetter(So.Node,"red",0,function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)});Vn.Factory.addGetterSetter(So.Node,"green",0,function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)});Vn.Factory.addGetterSetter(So.Node,"blue",0,q1.RGBComponent,Vn.Factory.afterSetFilter);var Ws={};Object.defineProperty(Ws,"__esModule",{value:!0});Ws.RGBA=void 0;const dn=ct,js=Rt,Q1=Q,Z1=function(e){const t=e.data,i=t.length,n=this.red(),s=this.green(),r=this.blue(),o=this.alpha();for(let a=0;a<i;a+=4){const l=1-o;t[a]=n*o+t[a]*l,t[a+1]=s*o+t[a+1]*l,t[a+2]=r*o+t[a+2]*l}};Ws.RGBA=Z1;dn.Factory.addGetterSetter(js.Node,"red",0,function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)});dn.Factory.addGetterSetter(js.Node,"green",0,function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)});dn.Factory.addGetterSetter(js.Node,"blue",0,Q1.RGBComponent,dn.Factory.afterSetFilter);dn.Factory.addGetterSetter(js.Node,"alpha",1,function(e){return this._filterUpToDate=!1,e>1?1:e<0?0:e});var zs={};Object.defineProperty(zs,"__esModule",{value:!0});zs.Sepia=void 0;const tg=function(e){const t=e.data,i=t.length;for(let n=0;n<i;n+=4){const s=t[n+0],r=t[n+1],o=t[n+2];t[n+0]=Math.min(255,s*.393+r*.769+o*.189),t[n+1]=Math.min(255,s*.349+r*.686+o*.168),t[n+2]=Math.min(255,s*.272+r*.534+o*.131)}};zs.Sepia=tg;var Ks={};Object.defineProperty(Ks,"__esModule",{value:!0});Ks.Solarize=void 0;const eg=function(e){const t=e.data,i=e.width,n=e.height,s=i*4;let r=n;do{const o=(r-1)*s;let a=i;do{const l=o+(a-1)*4;let h=t[l],c=t[l+1],u=t[l+2];h>127&&(h=255-h),c>127&&(c=255-c),u>127&&(u=255-u),t[l]=h,t[l+1]=c,t[l+2]=u}while(--a)}while(--r)};Ks.Solarize=eg;var Ys={};Object.defineProperty(Ys,"__esModule",{value:!0});Ys.Threshold=void 0;const Fa=ct,ig=Rt,ng=Q,sg=function(e){const t=this.threshold()*255,i=e.data,n=i.length;for(let s=0;s<n;s+=1)i[s]=i[s]<t?0:255};Ys.Threshold=sg;Fa.Factory.addGetterSetter(ig.Node,"threshold",.5,(0,ng.getNumberValidator)(),Fa.Factory.afterSetFilter);Object.defineProperty(ss,"__esModule",{value:!0});ss.Konva=void 0;const ka=$l,rg=cs,og=fs,ag=ps,lg=ms,cg=_s,Na=Fi,hg=_n,dg=Ui,fg=vn,ug=bs,gg=Ss,pg=Cs,mg=ws,_g=$i,yg=xs,vg=Ts,bg=Ps,Sg=Es,Cg=Rs,wg=Ms,xg=Fs,Tg=Ns,Pg=Os,Ag=Ds,Eg=Ls,Rg=Gs,Mg=Is,Fg=Us,kg=Bs,Ng=$s,Og=Hs,Dg=Vs,Lg=Ws,Gg=zs,Ig=Ks,Ug=Ys;ss.Konva=ka.Konva.Util._assign(ka.Konva,{Arc:rg.Arc,Arrow:og.Arrow,Circle:ag.Circle,Ellipse:lg.Ellipse,Image:cg.Image,Label:Na.Label,Tag:Na.Tag,Line:hg.Line,Path:dg.Path,Rect:fg.Rect,RegularPolygon:ug.RegularPolygon,Ring:gg.Ring,Sprite:pg.Sprite,Star:mg.Star,Text:_g.Text,TextPath:yg.TextPath,Transformer:vg.Transformer,Wedge:bg.Wedge,Filters:{Blur:Sg.Blur,Brighten:Cg.Brighten,Contrast:wg.Contrast,Emboss:xg.Emboss,Enhance:Tg.Enhance,Grayscale:Pg.Grayscale,HSL:Ag.HSL,HSV:Eg.HSV,Invert:Rg.Invert,Kaleidoscope:Mg.Kaleidoscope,Mask:Fg.Mask,Noise:kg.Noise,Pixelate:Ng.Pixelate,Posterize:Og.Posterize,RGB:Dg.RGB,RGBA:Lg.RGBA,Sepia:Gg.Sepia,Solarize:Ig.Solarize,Threshold:Ug.Threshold}});var Bg=ro.exports;Object.defineProperty(Bg,"__esModule",{value:!0});const $g=ss;ro.exports=$g.Konva;var Hg=ro.exports;const At=Bf(Hg);function Wn(e){if(!At.autoDrawEnabled){const t=e.getLayer()||e.getStage();t&&t.batchDraw()}}const Oa={key:!0,style:!0,elm:!0,isRootInsert:!0},yr=".vue-konva-event";function Sc(e,t,i,n){const s=e.__konvaNode,r={};let o=!1;for(let a in i){if(Oa.hasOwnProperty(a))continue;const l=a.slice(0,2)==="on",h=i[a]!==t[a];if(l&&h){let c=a.slice(2).toLowerCase();c.slice(0,7)==="content"&&(c="content"+c.slice(7,1).toUpperCase()+c.slice(8)),s==null||s.off(c+yr,i[a])}!t.hasOwnProperty(a)&&(s==null||s.setAttr(a,void 0))}for(let a in t){if(Oa.hasOwnProperty(a))continue;let l=a.slice(0,2)==="on";const h=i[a]!==t[a];if(l&&h){let c=a.slice(2).toLowerCase();c.slice(0,7)==="content"&&(c="content"+c.slice(7,1).toUpperCase()+c.slice(8)),t[a]&&(s==null||s.off(c+yr),s==null||s.on(c+yr,t[a]))}!l&&(t[a]!==i[a]||n&&t[a]!==(s==null?void 0:s.getAttr(a)))&&(o=!0,r[a]=t[a])}o&&s&&(s.setAttrs(r),Wn(s))}const Vg="v";function Wg(e){function t(i){return i!=null&&i.__konvaNode?i:i!=null&&i.parent?t(i.parent):(console.error("vue-konva error: Can not find parent node"),null)}return t(e.parent)}function Cc(e){return e.component?e.component.__konvaNode||Cc(e.component.subTree):null}function jg(e){const{el:t,component:i}=e,n=Cc(e);if(t!=null&&t.tagName&&i&&!n){const s=t.tagName.toLowerCase();return console.error(`vue-konva error: You are trying to render "${s}" inside your component tree. Looks like it is not a Konva node. You can render only Konva components inside the Stage.`),null}return n}function zg(e){const t=s=>!!(s!=null&&s.hasOwnProperty("component")),i=s=>Array.isArray(s),n=s=>t(s)?[s,...n(s.children)]:i(s)?s.flatMap(n):[];return n(e.children)}function wc(e,t){const i=zg(e),n=[];i.forEach(r=>{const o=jg(r);o&&n.push(o)});let s=!1;n.forEach((r,o)=>{r.getZIndex()!==o&&(r.setZIndex(o),s=!0)}),s&&Wn(t)}const Kg=cl({name:"Stage",props:{config:{type:Object,default:function(){return{}}},__useStrictMode:{type:Boolean}},inheritAttrs:!1,setup(e,{attrs:t,slots:i,expose:n}){const s=no();if(!s)return;const r=Oi({}),o=_t(null),a=new At.Stage({width:e.config.width,height:e.config.height,container:document.createElement("div")});s.__konvaNode=a,c();function l(){return s==null?void 0:s.__konvaNode}function h(){return s==null?void 0:s.__konvaNode}function c(){if(!s)return;const u=r||{},p={...t,...e.config};Sc(s,p,u,e.__useStrictMode),Object.assign(r,p)}return un(()=>{o.value&&(o.value.innerHTML="",a.container(o.value)),c()}),Zr(()=>{c(),wc(s.subTree,a)}),gl(()=>{a.destroy()}),en(()=>e.config,c,{deep:!0}),n({getStage:h,getNode:l}),()=>{var u;return Ul("div",{ref:o,style:t==null?void 0:t.style},(u=i.default)==null?void 0:u.call(i))}}}),Yg=".vue-konva-event",Xg={Group:!0,Layer:!0,FastLayer:!0,Label:!0};function qg(e,t){return cl({name:e,props:{config:{type:Object,default:function(){return{}}},__useStrictMode:{type:Boolean}},setup(i,{attrs:n,slots:s,expose:r}){const o=no();if(!o)return;const a=Oi({}),l=new t;o.__konvaNode=l,o.vnode.__konvaNode=l,u();function h(){return o==null?void 0:o.__konvaNode}function c(){return o==null?void 0:o.__konvaNode}function u(){if(!o)return;const g={};for(const v in o==null?void 0:o.vnode.props)v.slice(0,2)==="on"&&(g[v]=o.vnode.props[v]);const f=a||{},_={...n,...i.config,...g};Sc(o,_,f,i.__useStrictMode),Object.assign(a,_)}un(()=>{var f;const g=(f=Wg(o))==null?void 0:f.__konvaNode;g&&"add"in g&&g.add(l),Wn(l)}),ts(()=>{Wn(l),l.destroy(),l.off(Yg)}),Zr(()=>{u(),wc(o.subTree,l)}),en(()=>i.config,u,{deep:!0}),r({getStage:c,getNode:h});const p=Xg.hasOwnProperty(e);return()=>{var g;return p?Ul("template",{},(g=s.default)==null?void 0:g.call(s)):null}}})}typeof window<"u"&&!window.Konva&&require("konva");const Jg={install:(e,t)=>{const i=(t==null?void 0:t.prefix)||Vg,n={Arc:At.Arc,Arrow:At.Arrow,Circle:At.Circle,Ellipse:At.Ellipse,FastLayer:At.FastLayer,Group:At.Group,Image:At.Image,Label:At.Label,Layer:At.Layer,Line:At.Line,Path:At.Path,Rect:At.Rect,RegularPolygon:At.RegularPolygon,Ring:At.Ring,Shape:At.Shape,Sprite:At.Sprite,Star:At.Star,Tag:At.Tag,Text:At.Text,TextPath:At.TextPath,Transformer:At.Transformer,Wedge:At.Wedge,...t==null?void 0:t.customNodes};[Kg,...Object.entries(n).map(([s,r])=>qg(s,r))].forEach(s=>{e.component(`${i}${s.name}`,s)})}},jn=performance.now();console.log(" Iniciando aplicacin Vue Flow...");const xc=Hd(Uf),Tc=performance.now()-jn;console.log(` Tiempo de creacin de la app: ${Tc.toFixed(2)}ms`);xc.use(Jg);xc.mount("#app");const Pc=performance.now()-jn;console.log(` Tiempo total de inicializacin de la aplicacin: ${Pc.toFixed(2)}ms`);window.appMetrics={appStartTime:jn,appCreationTime:Tc,totalInitTime:Pc,getCurrentTime:()=>performance.now()-jn};
